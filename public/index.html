<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>E-Perpustakaan Sekolah</title>
    <!-- PATCH: Redirect Kelola Literasi to New Admin Page -->
    <script>
      (function() {
        // 1. Immediate check: If user lands on the broken page, redirect immediately
        if (window.location.pathname.includes('/admin/literacy')) {
          window.location.href = '/kelola_literasi.html';
        }

        // 2. Persistent check for navigation changes
        let lastUrl = location.href; 
        new MutationObserver(() => {
          const url = location.href;
          if (url !== lastUrl) {
            lastUrl = url;
            if (url.includes('/admin/literacy')) {
               window.location.href = '/kelola_literasi.html';
            }
          }
        }).observe(document, {subtree: true, childList: true});

        // 3. UI Patch for Menu Links
        document.addEventListener('DOMContentLoaded', () => {
          const observer = new MutationObserver((mutations) => {
            // Find all elements that might be the menu link
            const links = document.querySelectorAll('a, div, span, li');
            for (let el of links) {
              if (el.textContent && el.textContent.includes('Kelola Literasi') && !el.dataset.patched) {
                el.dataset.patched = 'true';
                // el.style.border = '2px solid red'; // Remove visible debug indicator for production
                el.title = "Link ini telah diperbaiki (Patched)";
                
                // Force redirect on click
                el.addEventListener('click', (e) => {
                  e.preventDefault();
                  e.stopPropagation();
                  window.location.href = '/kelola_literasi.html';
                }, true);
              }
            }
          });
          observer.observe(document.body, { childList: true, subtree: true });
        });
      })();
    </script>
    <script type="module" crossorigin src="/assets/index-xrVAwBp2-v3.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/index-DK-ZNvBr.css">
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>

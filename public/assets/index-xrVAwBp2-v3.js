function KS(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function GS(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p_={exports:{}},Zu={},m_={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ia=Symbol.for("react.element"),QS=Symbol.for("react.portal"),JS=Symbol.for("react.fragment"),YS=Symbol.for("react.strict_mode"),XS=Symbol.for("react.profiler"),ZS=Symbol.for("react.provider"),eb=Symbol.for("react.context"),tb=Symbol.for("react.forward_ref"),nb=Symbol.for("react.suspense"),rb=Symbol.for("react.memo"),sb=Symbol.for("react.lazy"),Jg=Symbol.iterator;function ib(t){return t===null||typeof t!="object"?null:(t=Jg&&t[Jg]||t["@@iterator"],typeof t=="function"?t:null)}var g_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y_=Object.assign,v_={};function Mi(t,e,n){this.props=t,this.context=e,this.refs=v_,this.updater=n||g_}Mi.prototype.isReactComponent={};Mi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Mi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function __(){}__.prototype=Mi.prototype;function Uf(t,e,n){this.props=t,this.context=e,this.refs=v_,this.updater=n||g_}var Ff=Uf.prototype=new __;Ff.constructor=Uf;y_(Ff,Mi.prototype);Ff.isPureReactComponent=!0;var Yg=Array.isArray,w_=Object.prototype.hasOwnProperty,Bf={current:null},x_={key:!0,ref:!0,__self:!0,__source:!0};function E_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)w_.call(e,r)&&!x_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Ia,type:t,key:i,ref:o,props:s,_owner:Bf.current}}function ob(t,e){return{$$typeof:Ia,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ia}function ab(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xg=/\/+/g;function _d(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ab(""+t.key):e.toString(36)}function Ll(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ia:case QS:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+_d(o,0):r,Yg(s)?(n="",t!=null&&(n=t.replace(Xg,"$&/")+"/"),Ll(s,e,n,"",function(d){return d})):s!=null&&(zf(s)&&(s=ob(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Xg,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Yg(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+_d(i,l);o+=Ll(i,e,n,c,s)}else if(c=ib(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+_d(i,l++),o+=Ll(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ul(t,e,n){if(t==null)return t;var r=[],s=0;return Ll(t,r,"","",function(i){return e.call(n,i,s++)}),r}function lb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var wt={current:null},Vl={transition:null},ub={ReactCurrentDispatcher:wt,ReactCurrentBatchConfig:Vl,ReactCurrentOwner:Bf};function T_(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:ul,forEach:function(t,e,n){ul(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ul(t,function(){e++}),e},toArray:function(t){return ul(t,function(e){return e})||[]},only:function(t){if(!zf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=Mi;re.Fragment=JS;re.Profiler=XS;re.PureComponent=Uf;re.StrictMode=YS;re.Suspense=nb;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ub;re.act=T_;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=y_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Bf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)w_.call(e,c)&&!x_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Ia,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:eb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZS,_context:t},t.Consumer=t};re.createElement=E_;re.createFactory=function(t){var e=E_.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:tb,render:t}};re.isValidElement=zf;re.lazy=function(t){return{$$typeof:sb,_payload:{_status:-1,_result:t},_init:lb}};re.memo=function(t,e){return{$$typeof:rb,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Vl.transition;Vl.transition={};try{t()}finally{Vl.transition=e}};re.unstable_act=T_;re.useCallback=function(t,e){return wt.current.useCallback(t,e)};re.useContext=function(t){return wt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return wt.current.useDeferredValue(t)};re.useEffect=function(t,e){return wt.current.useEffect(t,e)};re.useId=function(){return wt.current.useId()};re.useImperativeHandle=function(t,e,n){return wt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return wt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return wt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return wt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return wt.current.useReducer(t,e,n)};re.useRef=function(t){return wt.current.useRef(t)};re.useState=function(t){return wt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return wt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return wt.current.useTransition()};re.version="18.3.1";m_.exports=re;var L=m_.exports;const S_=GS(L),cb=KS({__proto__:null,default:S_},[L]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db=L,hb=Symbol.for("react.element"),fb=Symbol.for("react.fragment"),pb=Object.prototype.hasOwnProperty,mb=db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gb={key:!0,ref:!0,__self:!0,__source:!0};function b_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)pb.call(e,r)&&!gb.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:hb,type:t,key:i,ref:o,props:s,_owner:mb.current}}Zu.Fragment=fb;Zu.jsx=b_;Zu.jsxs=b_;p_.exports=Zu;var u=p_.exports,uh={},I_={exports:{}},Ft={},k_={exports:{}},N_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var ee=$.length;$.push(G);e:for(;0<ee;){var le=ee-1>>>1,he=$[le];if(0<s(he,G))$[le]=G,$[ee]=he,ee=le;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],ee=$.pop();if(ee!==G){$[0]=ee;e:for(var le=0,he=$.length,Zt=he>>>1;le<Zt;){var Je=2*(le+1)-1,pn=$[Je],en=Je+1,er=$[en];if(0>s(pn,ee))en<he&&0>s(er,pn)?($[le]=er,$[en]=ee,le=en):($[le]=pn,$[Je]=ee,le=Je);else if(en<he&&0>s(er,ee))$[le]=er,$[en]=ee,le=en;else break e}}return G}function s($,G){var ee=$.sortIndex-G.sortIndex;return ee!==0?ee:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,p=null,m=3,x=!1,_=!1,b=!1,k=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N($){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=$)r(d),G.sortIndex=G.expirationTime,e(c,G);else break;G=n(d)}}function j($){if(b=!1,N($),!_)if(n(c)!==null)_=!0,rt(F);else{var G=n(d);G!==null&&Zn(j,G.startTime-$)}}function F($,G){_=!1,b&&(b=!1,S(v),v=-1),x=!0;var ee=m;try{for(N(G),p=n(c);p!==null&&(!(p.expirationTime>G)||$&&!R());){var le=p.callback;if(typeof le=="function"){p.callback=null,m=p.priorityLevel;var he=le(p.expirationTime<=G);G=t.unstable_now(),typeof he=="function"?p.callback=he:p===n(c)&&r(c),N(G)}else r(c);p=n(c)}if(p!==null)var Zt=!0;else{var Je=n(d);Je!==null&&Zn(j,Je.startTime-G),Zt=!1}return Zt}finally{p=null,m=ee,x=!1}}var V=!1,T=null,v=-1,w=5,I=-1;function R(){return!(t.unstable_now()-I<w)}function C(){if(T!==null){var $=t.unstable_now();I=$;var G=!0;try{G=T(!0,$)}finally{G?A():(V=!1,T=null)}}else V=!1}var A;if(typeof E=="function")A=function(){E(C)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,zt=ge.port2;ge.port1.onmessage=C,A=function(){zt.postMessage(null)}}else A=function(){k(C,0)};function rt($){T=$,V||(V=!0,A())}function Zn($,G){v=k(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){_||x||(_=!0,rt(F))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):w=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var ee=m;m=G;try{return $()}finally{m=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var ee=m;m=$;try{return G()}finally{m=ee}},t.unstable_scheduleCallback=function($,G,ee){var le=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?le+ee:le):ee=le,$){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ee+he,$={id:h++,callback:G,priorityLevel:$,startTime:ee,expirationTime:he,sortIndex:-1},ee>le?($.sortIndex=ee,e(d,$),n(c)===null&&$===n(d)&&(b?(S(v),v=-1):b=!0,Zn(j,ee-le))):($.sortIndex=he,e(c,$),_||x||(_=!0,rt(F))),$},t.unstable_shouldYield=R,t.unstable_wrapCallback=function($){var G=m;return function(){var ee=m;m=G;try{return $.apply(this,arguments)}finally{m=ee}}}})(N_);k_.exports=N_;var yb=k_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vb=L,Ut=yb;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var A_=new Set,Jo={};function Os(t,e){xi(t,e),xi(t+"Capture",e)}function xi(t,e){for(Jo[t]=e,t=0;t<e.length;t++)A_.add(e[t])}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ch=Object.prototype.hasOwnProperty,_b=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zg={},ey={};function wb(t){return ch.call(ey,t)?!0:ch.call(Zg,t)?!1:_b.test(t)?ey[t]=!0:(Zg[t]=!0,!1)}function xb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=String(t||"").toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Eb(t,e,n,r){if(e===null||typeof e>"u"||xb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function xt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new xt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new xt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new xt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new xt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new xt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new xt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new xt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new xt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new xt(t,5,!1,t.toLowerCase(),null,!1,!1)});var $f=/[\-:]([a-z])/g;function qf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace($f,qf);tt[e]=new xt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace($f,qf);tt[e]=new xt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace($f,qf);tt[e]=new xt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new xt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new xt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new xt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Hf(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Eb(e,n,s,r)&&(n=null),r||s===null?wb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yn=vb.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,cl=Symbol.for("react.element"),Js=Symbol.for("react.portal"),Ys=Symbol.for("react.fragment"),Wf=Symbol.for("react.strict_mode"),dh=Symbol.for("react.profiler"),R_=Symbol.for("react.provider"),C_=Symbol.for("react.context"),Kf=Symbol.for("react.forward_ref"),hh=Symbol.for("react.suspense"),fh=Symbol.for("react.suspense_list"),Gf=Symbol.for("react.memo"),ur=Symbol.for("react.lazy"),P_=Symbol.for("react.offscreen"),ty=Symbol.iterator;function ho(t){return t===null||typeof t!="object"?null:(t=ty&&t[ty]||t["@@iterator"],typeof t=="function"?t:null)}var be=Object.assign,wd;function To(t){if(wd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);wd=e&&e[1]||""}return`
`+wd+t}var xd=!1;function Ed(t,e){if(!t||xd)return"";xd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{xd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?To(t):""}function Tb(t){switch(t.tag){case 5:return To(t.type);case 16:return To("Lazy");case 13:return To("Suspense");case 19:return To("SuspenseList");case 0:case 2:case 15:return t=Ed(t.type,!1),t;case 11:return t=Ed(t.type.render,!1),t;case 1:return t=Ed(t.type,!0),t;default:return""}}function ph(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ys:return"Fragment";case Js:return"Portal";case dh:return"Profiler";case Wf:return"StrictMode";case hh:return"Suspense";case fh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case C_:return(t.displayName||"Context")+".Consumer";case R_:return(t._context.displayName||"Context")+".Provider";case Kf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Gf:return e=t.displayName||null,e!==null?e:ph(t.type)||"Memo";case ur:e=t._payload,t=t._init;try{return ph(t(e))}catch{}}return null}function Sb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ph(e);case 8:return e===Wf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function j_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bb(t){var e=j_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function dl(t){t._valueTracker||(t._valueTracker=bb(t))}function D_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=j_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function au(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function mh(t,e){var n=e.checked;return be({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ny(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Or(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function O_(t,e){e=e.checked,e!=null&&Hf(t,"checked",e,!1)}function gh(t,e){O_(t,e);var n=Or(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?yh(t,e.type,n):e.hasOwnProperty("defaultValue")&&yh(t,e.type,Or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ry(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function yh(t,e,n){(e!=="number"||au(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var So=Array.isArray;function ui(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Or(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function vh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return be({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(B(92));if(So(n)){if(1<n.length)throw Error(B(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Or(n)}}function L_(t,e){var n=Or(e.value),r=Or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function iy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function _h(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var hl,M_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(hl=hl||document.createElement("div"),hl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Yo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var jo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ib=["Webkit","ms","Moz","O"];Object.keys(jo).forEach(function(t){Ib.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),jo[e]=jo[t]})});function U_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||jo.hasOwnProperty(t)&&jo[t]?(""+e).trim():e+"px"}function F_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=U_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var kb=be({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function wh(t,e){if(e){if(kb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function xh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Eh=null;function Qf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Th=null,ci=null,di=null;function oy(t){if(t=Aa(t)){if(typeof Th!="function")throw Error(B(280));var e=t.stateNode;e&&(e=sc(e),Th(t.stateNode,t.type,e))}}function B_(t){ci?di?di.push(t):di=[t]:ci=t}function z_(){if(ci){var t=ci,e=di;if(di=ci=null,oy(t),e)for(t=0;t<e.length;t++)oy(e[t])}}function $_(t,e){return t(e)}function q_(){}var Td=!1;function H_(t,e,n){if(Td)return t(e,n);Td=!0;try{return $_(t,e,n)}finally{Td=!1,(ci!==null||di!==null)&&(q_(),z_())}}function Xo(t,e){var n=t.stateNode;if(n===null)return null;var r=sc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(B(231,e,typeof n));return n}var Sh=!1;if($n)try{var fo={};Object.defineProperty(fo,"passive",{get:function(){Sh=!0}}),window.addEventListener("test",fo,fo),window.removeEventListener("test",fo,fo)}catch{Sh=!1}function Nb(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Do=!1,lu=null,uu=!1,bh=null,Ab={onError:function(t){Do=!0,lu=t}};function Rb(t,e,n,r,s,i,o,l,c){Do=!1,lu=null,Nb.apply(Ab,arguments)}function Cb(t,e,n,r,s,i,o,l,c){if(Rb.apply(this,arguments),Do){if(Do){var d=lu;Do=!1,lu=null}else throw Error(B(198));uu||(uu=!0,bh=d)}}function Ls(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function W_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ay(t){if(Ls(t)!==t)throw Error(B(188))}function Pb(t){var e=t.alternate;if(!e){if(e=Ls(t),e===null)throw Error(B(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return ay(s),t;if(i===r)return ay(s),e;i=i.sibling}throw Error(B(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(B(189))}}if(n.alternate!==r)throw Error(B(190))}if(n.tag!==3)throw Error(B(188));return n.stateNode.current===n?t:e}function K_(t){return t=Pb(t),t!==null?G_(t):null}function G_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=G_(t);if(e!==null)return e;t=t.sibling}return null}var Q_=Ut.unstable_scheduleCallback,ly=Ut.unstable_cancelCallback,jb=Ut.unstable_shouldYield,Db=Ut.unstable_requestPaint,je=Ut.unstable_now,Ob=Ut.unstable_getCurrentPriorityLevel,Jf=Ut.unstable_ImmediatePriority,J_=Ut.unstable_UserBlockingPriority,cu=Ut.unstable_NormalPriority,Lb=Ut.unstable_LowPriority,Y_=Ut.unstable_IdlePriority,ec=null,Tn=null;function Vb(t){if(Tn&&typeof Tn.onCommitFiberRoot=="function")try{Tn.onCommitFiberRoot(ec,t,void 0,(t.current.flags&128)===128)}catch{}}var an=Math.clz32?Math.clz32:Fb,Mb=Math.log,Ub=Math.LN2;function Fb(t){return t>>>=0,t===0?32:31-(Mb(t)/Ub|0)|0}var fl=64,pl=4194304;function bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function du(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=bo(l):(i&=o,i!==0&&(r=bo(i)))}else o=n&~s,o!==0?r=bo(o):i!==0&&(r=bo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-an(e),s=1<<n,r|=t[n],e&=~s;return r}function Bb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zb(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-an(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=Bb(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Ih(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function X_(){var t=fl;return fl<<=1,!(fl&4194240)&&(fl=64),t}function Sd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ka(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-an(e),t[e]=n}function $b(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-an(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Yf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-an(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function Z_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ew,Xf,tw,nw,rw,kh=!1,ml=[],Tr=null,Sr=null,br=null,Zo=new Map,ea=new Map,dr=[],qb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uy(t,e){switch(t){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Sr=null;break;case"mouseover":case"mouseout":br=null;break;case"pointerover":case"pointerout":Zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ea.delete(e.pointerId)}}function po(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Aa(e),e!==null&&Xf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Hb(t,e,n,r,s){switch(e){case"focusin":return Tr=po(Tr,t,e,n,r,s),!0;case"dragenter":return Sr=po(Sr,t,e,n,r,s),!0;case"mouseover":return br=po(br,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Zo.set(i,po(Zo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ea.set(i,po(ea.get(i)||null,t,e,n,r,s)),!0}return!1}function sw(t){var e=us(t.target);if(e!==null){var n=Ls(e);if(n!==null){if(e=n.tag,e===13){if(e=W_(n),e!==null){t.blockedOn=e,rw(t.priority,function(){tw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ml(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Nh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Eh=r,n.target.dispatchEvent(r),Eh=null}else return e=Aa(n),e!==null&&Xf(e),t.blockedOn=n,!1;e.shift()}return!0}function cy(t,e,n){Ml(t)&&n.delete(e)}function Wb(){kh=!1,Tr!==null&&Ml(Tr)&&(Tr=null),Sr!==null&&Ml(Sr)&&(Sr=null),br!==null&&Ml(br)&&(br=null),Zo.forEach(cy),ea.forEach(cy)}function mo(t,e){t.blockedOn===e&&(t.blockedOn=null,kh||(kh=!0,Ut.unstable_scheduleCallback(Ut.unstable_NormalPriority,Wb)))}function ta(t){function e(s){return mo(s,t)}if(0<ml.length){mo(ml[0],t);for(var n=1;n<ml.length;n++){var r=ml[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Tr!==null&&mo(Tr,t),Sr!==null&&mo(Sr,t),br!==null&&mo(br,t),Zo.forEach(e),ea.forEach(e),n=0;n<dr.length;n++)r=dr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<dr.length&&(n=dr[0],n.blockedOn===null);)sw(n),n.blockedOn===null&&dr.shift()}var hi=Yn.ReactCurrentBatchConfig,hu=!0;function Kb(t,e,n,r){var s=de,i=hi.transition;hi.transition=null;try{de=1,Zf(t,e,n,r)}finally{de=s,hi.transition=i}}function Gb(t,e,n,r){var s=de,i=hi.transition;hi.transition=null;try{de=4,Zf(t,e,n,r)}finally{de=s,hi.transition=i}}function Zf(t,e,n,r){if(hu){var s=Nh(t,e,n,r);if(s===null)Dd(t,e,r,fu,n),uy(t,r);else if(Hb(s,t,e,n,r))r.stopPropagation();else if(uy(t,r),e&4&&-1<qb.indexOf(t)){for(;s!==null;){var i=Aa(s);if(i!==null&&ew(i),i=Nh(t,e,n,r),i===null&&Dd(t,e,r,fu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Dd(t,e,r,null,n)}}var fu=null;function Nh(t,e,n,r){if(fu=null,t=Qf(r),t=us(t),t!==null)if(e=Ls(t),e===null)t=null;else if(n=e.tag,n===13){if(t=W_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return fu=t,null}function iw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ob()){case Jf:return 1;case J_:return 4;case cu:case Lb:return 16;case Y_:return 536870912;default:return 16}default:return 16}}var _r=null,ep=null,Ul=null;function ow(){if(Ul)return Ul;var t,e=ep,n=e.length,r,s="value"in _r?_r.value:_r.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ul=s.slice(t,1<r?1-r:void 0)}function Fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function gl(){return!0}function dy(){return!1}function Bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?gl:dy,this.isPropagationStopped=dy,this}return be(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=gl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=gl)},persist:function(){},isPersistent:gl}),e}var Ui={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tp=Bt(Ui),Na=be({},Ui,{view:0,detail:0}),Qb=Bt(Na),bd,Id,go,tc=be({},Na,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:np,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==go&&(go&&t.type==="mousemove"?(bd=t.screenX-go.screenX,Id=t.screenY-go.screenY):Id=bd=0,go=t),bd)},movementY:function(t){return"movementY"in t?t.movementY:Id}}),hy=Bt(tc),Jb=be({},tc,{dataTransfer:0}),Yb=Bt(Jb),Xb=be({},Na,{relatedTarget:0}),kd=Bt(Xb),Zb=be({},Ui,{animationName:0,elapsedTime:0,pseudoElement:0}),eI=Bt(Zb),tI=be({},Ui,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),nI=Bt(tI),rI=be({},Ui,{data:0}),fy=Bt(rI),sI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oI[t])?!!e[t]:!1}function np(){return aI}var lI=be({},Na,{key:function(t){if(t.key){var e=sI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:np,charCode:function(t){return t.type==="keypress"?Fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),uI=Bt(lI),cI=be({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),py=Bt(cI),dI=be({},Na,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:np}),hI=Bt(dI),fI=be({},Ui,{propertyName:0,elapsedTime:0,pseudoElement:0}),pI=Bt(fI),mI=be({},tc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gI=Bt(mI),yI=[9,13,27,32],rp=$n&&"CompositionEvent"in window,Oo=null;$n&&"documentMode"in document&&(Oo=document.documentMode);var vI=$n&&"TextEvent"in window&&!Oo,aw=$n&&(!rp||Oo&&8<Oo&&11>=Oo),my=" ",gy=!1;function lw(t,e){switch(t){case"keyup":return yI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function _I(t,e){switch(t){case"compositionend":return uw(e);case"keypress":return e.which!==32?null:(gy=!0,my);case"textInput":return t=e.data,t===my&&gy?null:t;default:return null}}function wI(t,e){if(Xs)return t==="compositionend"||!rp&&lw(t,e)?(t=ow(),Ul=ep=_r=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return aw&&e.locale!=="ko"?null:e.data;default:return null}}var xI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!xI[t.type]:e==="textarea"}function cw(t,e,n,r){B_(r),e=pu(e,"onChange"),0<e.length&&(n=new tp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Lo=null,na=null;function EI(t){xw(t,0)}function nc(t){var e=ti(t);if(D_(e))return t}function TI(t,e){if(t==="change")return e}var dw=!1;if($n){var Nd;if($n){var Ad="oninput"in document;if(!Ad){var vy=document.createElement("div");vy.setAttribute("oninput","return;"),Ad=typeof vy.oninput=="function"}Nd=Ad}else Nd=!1;dw=Nd&&(!document.documentMode||9<document.documentMode)}function _y(){Lo&&(Lo.detachEvent("onpropertychange",hw),na=Lo=null)}function hw(t){if(t.propertyName==="value"&&nc(na)){var e=[];cw(e,na,t,Qf(t)),H_(EI,e)}}function SI(t,e,n){t==="focusin"?(_y(),Lo=e,na=n,Lo.attachEvent("onpropertychange",hw)):t==="focusout"&&_y()}function bI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nc(na)}function II(t,e){if(t==="click")return nc(e)}function kI(t,e){if(t==="input"||t==="change")return nc(e)}function NI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var cn=typeof Object.is=="function"?Object.is:NI;function ra(t,e){if(cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ch.call(e,s)||!cn(t[s],e[s]))return!1}return!0}function wy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xy(t,e){var n=wy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wy(n)}}function fw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pw(){for(var t=window,e=au();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=au(t.document)}return e}function sp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function AI(t){var e=pw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fw(n.ownerDocument.documentElement,n)){if(r!==null&&sp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=xy(n,i);var o=xy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RI=$n&&"documentMode"in document&&11>=document.documentMode,Zs=null,Ah=null,Vo=null,Rh=!1;function Ey(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rh||Zs==null||Zs!==au(r)||(r=Zs,"selectionStart"in r&&sp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vo&&ra(Vo,r)||(Vo=r,r=pu(Ah,"onSelect"),0<r.length&&(e=new tp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Zs)))}function yl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ei={animationend:yl("Animation","AnimationEnd"),animationiteration:yl("Animation","AnimationIteration"),animationstart:yl("Animation","AnimationStart"),transitionend:yl("Transition","TransitionEnd")},Rd={},mw={};$n&&(mw=document.createElement("div").style,"AnimationEvent"in window||(delete ei.animationend.animation,delete ei.animationiteration.animation,delete ei.animationstart.animation),"TransitionEvent"in window||delete ei.transitionend.transition);function rc(t){if(Rd[t])return Rd[t];if(!ei[t])return t;var e=ei[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mw)return Rd[t]=e[n];return t}var gw=rc("animationend"),yw=rc("animationiteration"),vw=rc("animationstart"),_w=rc("transitionend"),ww=new Map,Ty="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qr(t,e){ww.set(t,e),Os(e,[t])}for(var Cd=0;Cd<Ty.length;Cd++){var Pd=Ty[Cd],CI=Pd.toLowerCase(),PI=Pd[0].toUpperCase()+Pd.slice(1);qr(CI,"on"+PI)}qr(gw,"onAnimationEnd");qr(yw,"onAnimationIteration");qr(vw,"onAnimationStart");qr("dblclick","onDoubleClick");qr("focusin","onFocus");qr("focusout","onBlur");qr(_w,"onTransitionEnd");xi("onMouseEnter",["mouseout","mouseover"]);xi("onMouseLeave",["mouseout","mouseover"]);xi("onPointerEnter",["pointerout","pointerover"]);xi("onPointerLeave",["pointerout","pointerover"]);Os("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Os("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Os("onBeforeInput",["compositionend","keypress","textInput","paste"]);Os("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Os("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Io));function Sy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Cb(r,e,void 0,t),t.currentTarget=null}function xw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Sy(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Sy(s,l,d),i=c}}}if(uu)throw t=bh,uu=!1,bh=null,t}function ve(t,e){var n=e[Oh];n===void 0&&(n=e[Oh]=new Set);var r=t+"__bubble";n.has(r)||(Ew(e,t,2,!1),n.add(r))}function jd(t,e,n){var r=0;e&&(r|=4),Ew(n,t,r,e)}var vl="_reactListening"+Math.random().toString(36).slice(2);function sa(t){if(!t[vl]){t[vl]=!0,A_.forEach(function(n){n!=="selectionchange"&&(jI.has(n)||jd(n,!1,t),jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[vl]||(e[vl]=!0,jd("selectionchange",!1,e))}}function Ew(t,e,n,r){switch(iw(e)){case 1:var s=Kb;break;case 4:s=Gb;break;default:s=Zf}n=s.bind(null,e,n,t),s=void 0,!Sh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Dd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=us(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}H_(function(){var d=i,h=Qf(n),p=[];e:{var m=ww.get(t);if(m!==void 0){var x=tp,_=t;switch(t){case"keypress":if(Fl(n)===0)break e;case"keydown":case"keyup":x=uI;break;case"focusin":_="focus",x=kd;break;case"focusout":_="blur",x=kd;break;case"beforeblur":case"afterblur":x=kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=hy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Yb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=hI;break;case gw:case yw:case vw:x=eI;break;case _w:x=pI;break;case"scroll":x=Qb;break;case"wheel":x=gI;break;case"copy":case"cut":case"paste":x=nI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=py}var b=(e&4)!==0,k=!b&&t==="scroll",S=b?m!==null?m+"Capture":null:m;b=[];for(var E=d,N;E!==null;){N=E;var j=N.stateNode;if(N.tag===5&&j!==null&&(N=j,S!==null&&(j=Xo(E,S),j!=null&&b.push(ia(E,j,N)))),k)break;E=E.return}0<b.length&&(m=new x(m,_,null,n,h),p.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==Eh&&(_=n.relatedTarget||n.fromElement)&&(us(_)||_[qn]))break e;if((x||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,x?(_=n.relatedTarget||n.toElement,x=d,_=_?us(_):null,_!==null&&(k=Ls(_),_!==k||_.tag!==5&&_.tag!==6)&&(_=null)):(x=null,_=d),x!==_)){if(b=hy,j="onMouseLeave",S="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(b=py,j="onPointerLeave",S="onPointerEnter",E="pointer"),k=x==null?m:ti(x),N=_==null?m:ti(_),m=new b(j,E+"leave",x,n,h),m.target=k,m.relatedTarget=N,j=null,us(h)===d&&(b=new b(S,E+"enter",_,n,h),b.target=N,b.relatedTarget=k,j=b),k=j,x&&_)t:{for(b=x,S=_,E=0,N=b;N;N=Ws(N))E++;for(N=0,j=S;j;j=Ws(j))N++;for(;0<E-N;)b=Ws(b),E--;for(;0<N-E;)S=Ws(S),N--;for(;E--;){if(b===S||S!==null&&b===S.alternate)break t;b=Ws(b),S=Ws(S)}b=null}else b=null;x!==null&&by(p,m,x,b,!1),_!==null&&k!==null&&by(p,k,_,b,!0)}}e:{if(m=d?ti(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var F=TI;else if(yy(m))if(dw)F=kI;else{F=bI;var V=SI}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(F=II);if(F&&(F=F(t,d))){cw(p,F,n,h);break e}V&&V(t,m,d),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&yh(m,"number",m.value)}switch(V=d?ti(d):window,t){case"focusin":(yy(V)||V.contentEditable==="true")&&(Zs=V,Ah=d,Vo=null);break;case"focusout":Vo=Ah=Zs=null;break;case"mousedown":Rh=!0;break;case"contextmenu":case"mouseup":case"dragend":Rh=!1,Ey(p,n,h);break;case"selectionchange":if(RI)break;case"keydown":case"keyup":Ey(p,n,h)}var T;if(rp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Xs?lw(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(aw&&n.locale!=="ko"&&(Xs||v!=="onCompositionStart"?v==="onCompositionEnd"&&Xs&&(T=ow()):(_r=h,ep="value"in _r?_r.value:_r.textContent,Xs=!0)),V=pu(d,v),0<V.length&&(v=new fy(v,t,null,n,h),p.push({event:v,listeners:V}),T?v.data=T:(T=uw(n),T!==null&&(v.data=T)))),(T=vI?_I(t,n):wI(t,n))&&(d=pu(d,"onBeforeInput"),0<d.length&&(h=new fy("onBeforeInput","beforeinput",null,n,h),p.push({event:h,listeners:d}),h.data=T))}xw(p,e)})}function ia(t,e,n){return{instance:t,listener:e,currentTarget:n}}function pu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Xo(t,n),i!=null&&r.unshift(ia(t,i,s)),i=Xo(t,e),i!=null&&r.push(ia(t,i,s))),t=t.return}return r}function Ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function by(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Xo(n,i),c!=null&&o.unshift(ia(n,c,l))):s||(c=Xo(n,i),c!=null&&o.push(ia(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var DI=/\r\n?/g,OI=/\u0000|\uFFFD/g;function Iy(t){return(typeof t=="string"?t:""+t).replace(DI,`
`).replace(OI,"")}function _l(t,e,n){if(e=Iy(e),Iy(t)!==e&&n)throw Error(B(425))}function mu(){}var Ch=null,Ph=null;function jh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Dh=typeof setTimeout=="function"?setTimeout:void 0,LI=typeof clearTimeout=="function"?clearTimeout:void 0,ky=typeof Promise=="function"?Promise:void 0,VI=typeof queueMicrotask=="function"?queueMicrotask:typeof ky<"u"?function(t){return ky.resolve(null).then(t).catch(MI)}:Dh;function MI(t){setTimeout(function(){throw t})}function Od(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ta(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ta(e)}function Ir(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ny(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fi=Math.random().toString(36).slice(2),xn="__reactFiber$"+Fi,oa="__reactProps$"+Fi,qn="__reactContainer$"+Fi,Oh="__reactEvents$"+Fi,UI="__reactListeners$"+Fi,FI="__reactHandles$"+Fi;function us(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[qn]||n[xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ny(t);t!==null;){if(n=t[xn])return n;t=Ny(t)}return e}t=n,n=t.parentNode}return null}function Aa(t){return t=t[xn]||t[qn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ti(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function sc(t){return t[oa]||null}var Lh=[],ni=-1;function Hr(t){return{current:t}}function we(t){0>ni||(t.current=Lh[ni],Lh[ni]=null,ni--)}function me(t,e){ni++,Lh[ni]=t.current,t.current=e}var Lr={},ht=Hr(Lr),bt=Hr(!1),xs=Lr;function Ei(t,e){var n=t.type.contextTypes;if(!n)return Lr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function It(t){return t=t.childContextTypes,t!=null}function gu(){we(bt),we(ht)}function Ay(t,e,n){if(ht.current!==Lr)throw Error(B(168));me(ht,e),me(bt,n)}function Tw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(B(108,Sb(t)||"Unknown",s));return be({},n,r)}function yu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Lr,xs=ht.current,me(ht,t),me(bt,bt.current),!0}function Ry(t,e,n){var r=t.stateNode;if(!r)throw Error(B(169));n?(t=Tw(t,e,xs),r.__reactInternalMemoizedMergedChildContext=t,we(bt),we(ht),me(ht,t)):we(bt),me(bt,n)}var Ln=null,ic=!1,Ld=!1;function Sw(t){Ln===null?Ln=[t]:Ln.push(t)}function BI(t){ic=!0,Sw(t)}function Wr(){if(!Ld&&Ln!==null){Ld=!0;var t=0,e=de;try{var n=Ln;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ln=null,ic=!1}catch(s){throw Ln!==null&&(Ln=Ln.slice(t+1)),Q_(Jf,Wr),s}finally{de=e,Ld=!1}}return null}var ri=[],si=0,vu=null,_u=0,$t=[],qt=0,Es=null,Vn=1,Mn="";function os(t,e){ri[si++]=_u,ri[si++]=vu,vu=t,_u=e}function bw(t,e,n){$t[qt++]=Vn,$t[qt++]=Mn,$t[qt++]=Es,Es=t;var r=Vn;t=Mn;var s=32-an(r)-1;r&=~(1<<s),n+=1;var i=32-an(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Vn=1<<32-an(e)+s|n<<s|r,Mn=i+t}else Vn=1<<i|n<<s|r,Mn=t}function ip(t){t.return!==null&&(os(t,1),bw(t,1,0))}function op(t){for(;t===vu;)vu=ri[--si],ri[si]=null,_u=ri[--si],ri[si]=null;for(;t===Es;)Es=$t[--qt],$t[qt]=null,Mn=$t[--qt],$t[qt]=null,Vn=$t[--qt],$t[qt]=null}var Vt=null,Dt=null,xe=!1,sn=null;function Iw(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Cy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,Dt=Ir(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:Vn,overflow:Mn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,Dt=null,!0):!1;default:return!1}}function Vh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mh(t){if(xe){var e=Dt;if(e){var n=e;if(!Cy(t,e)){if(Vh(t))throw Error(B(418));e=Ir(n.nextSibling);var r=Vt;e&&Cy(t,e)?Iw(r,n):(t.flags=t.flags&-4097|2,xe=!1,Vt=t)}}else{if(Vh(t))throw Error(B(418));t.flags=t.flags&-4097|2,xe=!1,Vt=t}}}function Py(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function wl(t){if(t!==Vt)return!1;if(!xe)return Py(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jh(t.type,t.memoizedProps)),e&&(e=Dt)){if(Vh(t))throw kw(),Error(B(418));for(;e;)Iw(t,e),e=Ir(e.nextSibling)}if(Py(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=Ir(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Vt?Ir(t.stateNode.nextSibling):null;return!0}function kw(){for(var t=Dt;t;)t=Ir(t.nextSibling)}function Ti(){Dt=Vt=null,xe=!1}function ap(t){sn===null?sn=[t]:sn.push(t)}var zI=Yn.ReactCurrentBatchConfig;function yo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(B(309));var r=n.stateNode}if(!r)throw Error(B(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!n._owner)throw Error(B(290,t))}return t}function xl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function jy(t){var e=t._init;return e(t._payload)}function Nw(t){function e(S,E){if(t){var N=S.deletions;N===null?(S.deletions=[E],S.flags|=16):N.push(E)}}function n(S,E){if(!t)return null;for(;E!==null;)e(S,E),E=E.sibling;return null}function r(S,E){for(S=new Map;E!==null;)E.key!==null?S.set(E.key,E):S.set(E.index,E),E=E.sibling;return S}function s(S,E){return S=Rr(S,E),S.index=0,S.sibling=null,S}function i(S,E,N){return S.index=N,t?(N=S.alternate,N!==null?(N=N.index,N<E?(S.flags|=2,E):N):(S.flags|=2,E)):(S.flags|=1048576,E)}function o(S){return t&&S.alternate===null&&(S.flags|=2),S}function l(S,E,N,j){return E===null||E.tag!==6?(E=$d(N,S.mode,j),E.return=S,E):(E=s(E,N),E.return=S,E)}function c(S,E,N,j){var F=N.type;return F===Ys?h(S,E,N.props.children,j,N.key):E!==null&&(E.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ur&&jy(F)===E.type)?(j=s(E,N.props),j.ref=yo(S,E,N),j.return=S,j):(j=Kl(N.type,N.key,N.props,null,S.mode,j),j.ref=yo(S,E,N),j.return=S,j)}function d(S,E,N,j){return E===null||E.tag!==4||E.stateNode.containerInfo!==N.containerInfo||E.stateNode.implementation!==N.implementation?(E=qd(N,S.mode,j),E.return=S,E):(E=s(E,N.children||[]),E.return=S,E)}function h(S,E,N,j,F){return E===null||E.tag!==7?(E=gs(N,S.mode,j,F),E.return=S,E):(E=s(E,N),E.return=S,E)}function p(S,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return E=$d(""+E,S.mode,N),E.return=S,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case cl:return N=Kl(E.type,E.key,E.props,null,S.mode,N),N.ref=yo(S,null,E),N.return=S,N;case Js:return E=qd(E,S.mode,N),E.return=S,E;case ur:var j=E._init;return p(S,j(E._payload),N)}if(So(E)||ho(E))return E=gs(E,S.mode,N,null),E.return=S,E;xl(S,E)}return null}function m(S,E,N,j){var F=E!==null?E.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return F!==null?null:l(S,E,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case cl:return N.key===F?c(S,E,N,j):null;case Js:return N.key===F?d(S,E,N,j):null;case ur:return F=N._init,m(S,E,F(N._payload),j)}if(So(N)||ho(N))return F!==null?null:h(S,E,N,j,null);xl(S,N)}return null}function x(S,E,N,j,F){if(typeof j=="string"&&j!==""||typeof j=="number")return S=S.get(N)||null,l(E,S,""+j,F);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case cl:return S=S.get(j.key===null?N:j.key)||null,c(E,S,j,F);case Js:return S=S.get(j.key===null?N:j.key)||null,d(E,S,j,F);case ur:var V=j._init;return x(S,E,N,V(j._payload),F)}if(So(j)||ho(j))return S=S.get(N)||null,h(E,S,j,F,null);xl(E,j)}return null}function _(S,E,N,j){for(var F=null,V=null,T=E,v=E=0,w=null;T!==null&&v<N.length;v++){T.index>v?(w=T,T=null):w=T.sibling;var I=m(S,T,N[v],j);if(I===null){T===null&&(T=w);break}t&&T&&I.alternate===null&&e(S,T),E=i(I,E,v),V===null?F=I:V.sibling=I,V=I,T=w}if(v===N.length)return n(S,T),xe&&os(S,v),F;if(T===null){for(;v<N.length;v++)T=p(S,N[v],j),T!==null&&(E=i(T,E,v),V===null?F=T:V.sibling=T,V=T);return xe&&os(S,v),F}for(T=r(S,T);v<N.length;v++)w=x(T,S,v,N[v],j),w!==null&&(t&&w.alternate!==null&&T.delete(w.key===null?v:w.key),E=i(w,E,v),V===null?F=w:V.sibling=w,V=w);return t&&T.forEach(function(R){return e(S,R)}),xe&&os(S,v),F}function b(S,E,N,j){var F=ho(N);if(typeof F!="function")throw Error(B(150));if(N=F.call(N),N==null)throw Error(B(151));for(var V=F=null,T=E,v=E=0,w=null,I=N.next();T!==null&&!I.done;v++,I=N.next()){T.index>v?(w=T,T=null):w=T.sibling;var R=m(S,T,I.value,j);if(R===null){T===null&&(T=w);break}t&&T&&R.alternate===null&&e(S,T),E=i(R,E,v),V===null?F=R:V.sibling=R,V=R,T=w}if(I.done)return n(S,T),xe&&os(S,v),F;if(T===null){for(;!I.done;v++,I=N.next())I=p(S,I.value,j),I!==null&&(E=i(I,E,v),V===null?F=I:V.sibling=I,V=I);return xe&&os(S,v),F}for(T=r(S,T);!I.done;v++,I=N.next())I=x(T,S,v,I.value,j),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?v:I.key),E=i(I,E,v),V===null?F=I:V.sibling=I,V=I);return t&&T.forEach(function(C){return e(S,C)}),xe&&os(S,v),F}function k(S,E,N,j){if(typeof N=="object"&&N!==null&&N.type===Ys&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case cl:e:{for(var F=N.key,V=E;V!==null;){if(V.key===F){if(F=N.type,F===Ys){if(V.tag===7){n(S,V.sibling),E=s(V,N.props.children),E.return=S,S=E;break e}}else if(V.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===ur&&jy(F)===V.type){n(S,V.sibling),E=s(V,N.props),E.ref=yo(S,V,N),E.return=S,S=E;break e}n(S,V);break}else e(S,V);V=V.sibling}N.type===Ys?(E=gs(N.props.children,S.mode,j,N.key),E.return=S,S=E):(j=Kl(N.type,N.key,N.props,null,S.mode,j),j.ref=yo(S,E,N),j.return=S,S=j)}return o(S);case Js:e:{for(V=N.key;E!==null;){if(E.key===V)if(E.tag===4&&E.stateNode.containerInfo===N.containerInfo&&E.stateNode.implementation===N.implementation){n(S,E.sibling),E=s(E,N.children||[]),E.return=S,S=E;break e}else{n(S,E);break}else e(S,E);E=E.sibling}E=qd(N,S.mode,j),E.return=S,S=E}return o(S);case ur:return V=N._init,k(S,E,V(N._payload),j)}if(So(N))return _(S,E,N,j);if(ho(N))return b(S,E,N,j);xl(S,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,E!==null&&E.tag===6?(n(S,E.sibling),E=s(E,N),E.return=S,S=E):(n(S,E),E=$d(N,S.mode,j),E.return=S,S=E),o(S)):n(S,E)}return k}var Si=Nw(!0),Aw=Nw(!1),wu=Hr(null),xu=null,ii=null,lp=null;function up(){lp=ii=xu=null}function cp(t){var e=wu.current;we(wu),t._currentValue=e}function Uh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function fi(t,e){xu=t,lp=ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(St=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(lp!==t)if(t={context:t,memoizedValue:e,next:null},ii===null){if(xu===null)throw Error(B(308));ii=t,xu.dependencies={lanes:0,firstContext:t}}else ii=ii.next=t;return e}var cs=null;function dp(t){cs===null?cs=[t]:cs.push(t)}function Rw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,dp(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var cr=!1;function hp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Cw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ue&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,dp(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function Bl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yf(t,n)}}function Dy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Eu(t,e,n,r){var s=t.updateQueue;cr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var p=s.baseState;o=0,h=d=c=null,l=i;do{var m=l.lane,x=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,b=l;switch(m=e,x=n,b.tag){case 1:if(_=b.payload,typeof _=="function"){p=_.call(x,p,m);break e}p=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,m=typeof _=="function"?_.call(x,p,m):_,m==null)break e;p=be({},p,m);break e;case 2:cr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=x,c=p):h=h.next=x,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=p),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ss|=o,t.lanes=o,t.memoizedState=p}}function Oy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(B(191,s));s.call(r)}}}var Ra={},Sn=Hr(Ra),aa=Hr(Ra),la=Hr(Ra);function ds(t){if(t===Ra)throw Error(B(174));return t}function fp(t,e){switch(me(la,e),me(aa,t),me(Sn,Ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:_h(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=_h(e,t)}we(Sn),me(Sn,e)}function bi(){we(Sn),we(aa),we(la)}function Pw(t){ds(la.current);var e=ds(Sn.current),n=_h(e,t.type);e!==n&&(me(aa,t),me(Sn,n))}function pp(t){aa.current===t&&(we(Sn),we(aa))}var Te=Hr(0);function Tu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Vd=[];function mp(){for(var t=0;t<Vd.length;t++)Vd[t]._workInProgressVersionPrimary=null;Vd.length=0}var zl=Yn.ReactCurrentDispatcher,Md=Yn.ReactCurrentBatchConfig,Ts=0,Se=null,ze=null,Ge=null,Su=!1,Mo=!1,ua=0,$I=0;function it(){throw Error(B(321))}function gp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!cn(t[n],e[n]))return!1;return!0}function yp(t,e,n,r,s,i){if(Ts=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zl.current=t===null||t.memoizedState===null?KI:GI,t=n(r,s),Mo){i=0;do{if(Mo=!1,ua=0,25<=i)throw Error(B(301));i+=1,Ge=ze=null,e.updateQueue=null,zl.current=QI,t=n(r,s)}while(Mo)}if(zl.current=bu,e=ze!==null&&ze.next!==null,Ts=0,Ge=ze=Se=null,Su=!1,e)throw Error(B(300));return t}function vp(){var t=ua!==0;return ua=0,t}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Se.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Jt(){if(ze===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=ze.next;var e=Ge===null?Se.memoizedState:Ge.next;if(e!==null)Ge=e,ze=t;else{if(t===null)throw Error(B(310));ze=t,t={memoizedState:ze.memoizedState,baseState:ze.baseState,baseQueue:ze.baseQueue,queue:ze.queue,next:null},Ge===null?Se.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function ca(t,e){return typeof e=="function"?e(t):e}function Ud(t){var e=Jt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=ze,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((Ts&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=p,o=r):c=c.next=p,Se.lanes|=h,Ss|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,cn(r,e.memoizedState)||(St=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,Ss|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fd(t){var e=Jt(),n=e.queue;if(n===null)throw Error(B(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);cn(i,e.memoizedState)||(St=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function jw(){}function Dw(t,e){var n=Se,r=Jt(),s=e(),i=!cn(r.memoizedState,s);if(i&&(r.memoizedState=s,St=!0),r=r.queue,_p(Vw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,da(9,Lw.bind(null,n,r,s,e),void 0,null),Qe===null)throw Error(B(349));Ts&30||Ow(n,e,s)}return s}function Ow(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lw(t,e,n,r){e.value=n,e.getSnapshot=r,Mw(e)&&Uw(t)}function Vw(t,e,n){return n(function(){Mw(e)&&Uw(t)})}function Mw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!cn(t,n)}catch{return!0}}function Uw(t){var e=Hn(t,1);e!==null&&ln(e,t,1,-1)}function Ly(t){var e=_n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ca,lastRenderedState:t},e.queue=t,t=t.dispatch=WI.bind(null,Se,t),[e.memoizedState,t]}function da(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Fw(){return Jt().memoizedState}function $l(t,e,n,r){var s=_n();Se.flags|=t,s.memoizedState=da(1|e,n,void 0,r===void 0?null:r)}function oc(t,e,n,r){var s=Jt();r=r===void 0?null:r;var i=void 0;if(ze!==null){var o=ze.memoizedState;if(i=o.destroy,r!==null&&gp(r,o.deps)){s.memoizedState=da(e,n,i,r);return}}Se.flags|=t,s.memoizedState=da(1|e,n,i,r)}function Vy(t,e){return $l(8390656,8,t,e)}function _p(t,e){return oc(2048,8,t,e)}function Bw(t,e){return oc(4,2,t,e)}function zw(t,e){return oc(4,4,t,e)}function $w(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qw(t,e,n){return n=n!=null?n.concat([t]):null,oc(4,4,$w.bind(null,e,t),n)}function wp(){}function Hw(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ww(t,e){var n=Jt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&gp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Kw(t,e,n){return Ts&21?(cn(n,e)||(n=X_(),Se.lanes|=n,Ss|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,St=!0),t.memoizedState=n)}function qI(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=Md.transition;Md.transition={};try{t(!1),e()}finally{de=n,Md.transition=r}}function Gw(){return Jt().memoizedState}function HI(t,e,n){var r=Ar(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qw(t))Jw(e,n);else if(n=Rw(t,e,n,r),n!==null){var s=_t();ln(n,t,r,s),Yw(n,e,r)}}function WI(t,e,n){var r=Ar(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qw(t))Jw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,cn(l,o)){var c=e.interleaved;c===null?(s.next=s,dp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Rw(t,e,s,r),n!==null&&(s=_t(),ln(n,t,r,s),Yw(n,e,r))}}function Qw(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function Jw(t,e){Mo=Su=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Yw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Yf(t,n)}}var bu={readContext:Qt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},KI={readContext:Qt,useCallback:function(t,e){return _n().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:Vy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$l(4194308,4,$w.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $l(4194308,4,t,e)},useInsertionEffect:function(t,e){return $l(4,2,t,e)},useMemo:function(t,e){var n=_n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=HI.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=_n();return t={current:t},e.memoizedState=t},useState:Ly,useDebugValue:wp,useDeferredValue:function(t){return _n().memoizedState=t},useTransition:function(){var t=Ly(!1),e=t[0];return t=qI.bind(null,t[1]),_n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=_n();if(xe){if(n===void 0)throw Error(B(407));n=n()}else{if(n=e(),Qe===null)throw Error(B(349));Ts&30||Ow(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Vy(Vw.bind(null,r,i,t),[t]),r.flags|=2048,da(9,Lw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=_n(),e=Qe.identifierPrefix;if(xe){var n=Mn,r=Vn;n=(r&~(1<<32-an(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ua++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=$I++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GI={readContext:Qt,useCallback:Hw,useContext:Qt,useEffect:_p,useImperativeHandle:qw,useInsertionEffect:Bw,useLayoutEffect:zw,useMemo:Ww,useReducer:Ud,useRef:Fw,useState:function(){return Ud(ca)},useDebugValue:wp,useDeferredValue:function(t){var e=Jt();return Kw(e,ze.memoizedState,t)},useTransition:function(){var t=Ud(ca)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:jw,useSyncExternalStore:Dw,useId:Gw,unstable_isNewReconciler:!1},QI={readContext:Qt,useCallback:Hw,useContext:Qt,useEffect:_p,useImperativeHandle:qw,useInsertionEffect:Bw,useLayoutEffect:zw,useMemo:Ww,useReducer:Fd,useRef:Fw,useState:function(){return Fd(ca)},useDebugValue:wp,useDeferredValue:function(t){var e=Jt();return ze===null?e.memoizedState=t:Kw(e,ze.memoizedState,t)},useTransition:function(){var t=Fd(ca)[0],e=Jt().memoizedState;return[t,e]},useMutableSource:jw,useSyncExternalStore:Dw,useId:Gw,unstable_isNewReconciler:!1};function nn(t,e){if(t&&t.defaultProps){e=be({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Fh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:be({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ac={isMounted:function(t){return(t=t._reactInternals)?Ls(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Ar(t),i=Bn(r,s);i.payload=e,n!=null&&(i.callback=n),e=kr(t,i,s),e!==null&&(ln(e,t,s,r),Bl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=_t(),s=Ar(t),i=Bn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=kr(t,i,s),e!==null&&(ln(e,t,s,r),Bl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=_t(),r=Ar(t),s=Bn(n,r);s.tag=2,e!=null&&(s.callback=e),e=kr(t,s,r),e!==null&&(ln(e,t,r,n),Bl(e,t,r))}};function My(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ra(n,r)||!ra(s,i):!0}function Xw(t,e,n){var r=!1,s=Lr,i=e.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(s=It(e)?xs:ht.current,r=e.contextTypes,i=(r=r!=null)?Ei(t,s):Lr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ac,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Uy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ac.enqueueReplaceState(e,e.state,null)}function Bh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},hp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qt(i):(i=It(e)?xs:ht.current,s.context=Ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Fh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ac.enqueueReplaceState(s,s.state,null),Eu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ii(t,e){try{var n="",r=e;do n+=Tb(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Bd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JI=typeof WeakMap=="function"?WeakMap:Map;function Zw(t,e,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ku||(ku=!0,Xh=r),zh(t,e)},n}function ex(t,e,n){n=Bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){zh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){zh(t,e),typeof r!="function"&&(Nr===null?Nr=new Set([this]):Nr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new JI;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=ck.bind(null,t,e,n),e.then(t,t))}function By(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bn(-1,1),e.tag=2,kr(n,e,1))),n.lanes|=1),t)}var YI=Yn.ReactCurrentOwner,St=!1;function yt(t,e,n,r){e.child=t===null?Aw(e,null,n,r):Si(e,t.child,n,r)}function $y(t,e,n,r,s){n=n.render;var i=e.ref;return fi(e,s),r=yp(t,e,n,r,i,s),n=vp(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(xe&&n&&ip(e),e.flags|=1,yt(t,e,r,s),e.child)}function qy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Np(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,tx(t,e,i,r,s)):(t=Kl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ra,n(o,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Rr(i,r),t.ref=e.ref,t.return=e,e.child=t}function tx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ra(i,r)&&t.ref===e.ref)if(St=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(St=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return $h(t,e,n,r,s)}function nx(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(ai,Pt),Pt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(ai,Pt),Pt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,me(ai,Pt),Pt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,me(ai,Pt),Pt|=r;return yt(t,e,s,n),e.child}function rx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function $h(t,e,n,r,s){var i=It(n)?xs:ht.current;return i=Ei(e,i),fi(e,s),n=yp(t,e,n,r,i,s),r=vp(),t!==null&&!St?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(xe&&r&&ip(e),e.flags|=1,yt(t,e,n,s),e.child)}function Hy(t,e,n,r,s){if(It(n)){var i=!0;yu(e)}else i=!1;if(fi(e,s),e.stateNode===null)ql(t,e),Xw(e,n,r),Bh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Qt(d):(d=It(n)?xs:ht.current,d=Ei(e,d));var h=n.getDerivedStateFromProps,p=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&Uy(e,o,r,d),cr=!1;var m=e.memoizedState;o.state=m,Eu(e,r,o,s),c=e.memoizedState,l!==r||m!==c||bt.current||cr?(typeof h=="function"&&(Fh(e,n,h,r),c=e.memoizedState),(l=cr||My(e,n,l,r,m,c,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Cw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:nn(e.type,l),o.props=d,p=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qt(c):(c=It(n)?xs:ht.current,c=Ei(e,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||m!==c)&&Uy(e,o,r,c),cr=!1,m=e.memoizedState,o.state=m,Eu(e,r,o,s);var _=e.memoizedState;l!==p||m!==_||bt.current||cr?(typeof x=="function"&&(Fh(e,n,x,r),_=e.memoizedState),(d=cr||My(e,n,d,r,m,_,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return qh(t,e,n,r,i,s)}function qh(t,e,n,r,s,i){rx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ry(e,n,!1),Wn(t,e,i);r=e.stateNode,YI.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Si(e,t.child,null,i),e.child=Si(e,null,l,i)):yt(t,e,l,i),e.memoizedState=r.state,s&&Ry(e,n,!0),e.child}function sx(t){var e=t.stateNode;e.pendingContext?Ay(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ay(t,e.context,!1),fp(t,e.containerInfo)}function Wy(t,e,n,r,s){return Ti(),ap(s),e.flags|=256,yt(t,e,n,r),e.child}var Hh={dehydrated:null,treeContext:null,retryLane:0};function Wh(t){return{baseLanes:t,cachePool:null,transitions:null}}function ix(t,e,n){var r=e.pendingProps,s=Te.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),me(Te,s&1),t===null)return Mh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cc(o,r,0,null),t=gs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Wh(n),e.memoizedState=Hh,t):xp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return XI(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Rr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Rr(l,i):(i=gs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Wh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Hh,r}return i=t.child,t=i.sibling,r=Rr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function xp(t,e){return e=cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function El(t,e,n,r){return r!==null&&ap(r),Si(e,t.child,null,n),t=xp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XI(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Bd(Error(B(422))),El(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cc({mode:"visible",children:r.children},s,0,null),i=gs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Si(e,t.child,null,o),e.child.memoizedState=Wh(o),e.memoizedState=Hh,i);if(!(e.mode&1))return El(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(B(419)),r=Bd(i,r,void 0),El(t,e,o,r)}if(l=(o&t.childLanes)!==0,St||l){if(r=Qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hn(t,s),ln(r,t,s,-1))}return kp(),r=Bd(Error(B(421))),El(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=dk.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=Ir(s.nextSibling),Vt=e,xe=!0,sn=null,t!==null&&($t[qt++]=Vn,$t[qt++]=Mn,$t[qt++]=Es,Vn=t.id,Mn=t.overflow,Es=e),e=xp(e,r.children),e.flags|=4096,e)}function Ky(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Uh(t.return,e,n)}function zd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ox(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(yt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ky(t,n,e);else if(t.tag===19)Ky(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Tu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Tu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zd(e,!0,n,null,i);break;case"together":zd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ql(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ss|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,n=Rr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Rr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ZI(t,e,n){switch(e.tag){case 3:sx(e),Ti();break;case 5:Pw(e);break;case 1:It(e.type)&&yu(e);break;case 4:fp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;me(wu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?ix(t,e,n):(me(Te,Te.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);me(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ox(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,nx(t,e,n)}return Wn(t,e,n)}var ax,Kh,lx,ux;ax=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Kh=function(){};lx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ds(Sn.current);var i=null;switch(n){case"input":s=mh(t,s),r=mh(t,r),i=[];break;case"select":s=be({},s,{value:void 0}),r=be({},r,{value:void 0}),i=[];break;case"textarea":s=vh(t,s),r=vh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=mu)}wh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Jo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Jo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ve("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};ux=function(t,e,n,r){n!==r&&(e.flags|=4)};function vo(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ek(t,e,n){var r=e.pendingProps;switch(op(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return It(e.type)&&gu(),ot(e),null;case 3:return r=e.stateNode,bi(),we(bt),we(ht),mp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(wl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(tf(sn),sn=null))),Kh(t,e),ot(e),null;case 5:pp(e);var s=ds(la.current);if(n=e.type,t!==null&&e.stateNode!=null)lx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(B(166));return ot(e),null}if(t=ds(Sn.current),wl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[xn]=e,r[oa]=i,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<Io.length;s++)ve(Io[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":ny(r,i),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ve("invalid",r);break;case"textarea":sy(r,i),ve("invalid",r)}wh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&_l(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&_l(r.textContent,l,t),s=["children",""+l]):Jo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ve("scroll",r)}switch(n){case"input":dl(r),ry(r,i,!0);break;case"textarea":dl(r),iy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=mu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xn]=e,t[oa]=r,ax(t,e,!1,!1),e.stateNode=t;e:{switch(o=xh(n,r),n){case"dialog":ve("cancel",t),ve("close",t),s=r;break;case"iframe":case"object":case"embed":ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<Io.length;s++)ve(Io[s],t);s=r;break;case"source":ve("error",t),s=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),s=r;break;case"details":ve("toggle",t),s=r;break;case"input":ny(t,r),s=mh(t,r),ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=be({},r,{value:void 0}),ve("invalid",t);break;case"textarea":sy(t,r),s=vh(t,r),ve("invalid",t);break;default:s=r}wh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?F_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&M_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Yo(t,c):typeof c=="number"&&Yo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ve("scroll",t):c!=null&&Hf(t,i,c,o))}switch(n){case"input":dl(t),ry(t,r,!1);break;case"textarea":dl(t),iy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Or(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ui(t,!!r.multiple,i,!1):r.defaultValue!=null&&ui(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=mu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)ux(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(B(166));if(n=ds(la.current),ds(Sn.current),wl(e)){if(r=e.stateNode,n=e.memoizedProps,r[xn]=e,(i=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:_l(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_l(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=e,e.stateNode=r}return ot(e),null;case 13:if(we(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Dt!==null&&e.mode&1&&!(e.flags&128))kw(),Ti(),e.flags|=98560,i=!1;else if(i=wl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[xn]=e}else Ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else sn!==null&&(tf(sn),sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?$e===0&&($e=3):kp())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return bi(),Kh(t,e),t===null&&sa(e.stateNode.containerInfo),ot(e),null;case 10:return cp(e.type._context),ot(e),null;case 17:return It(e.type)&&gu(),ot(e),null;case 19:if(we(Te),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)vo(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Tu(t),o!==null){for(e.flags|=128,vo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>ki&&(e.flags|=128,r=!0,vo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Tu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),vo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return ot(e),null}else 2*je()-i.renderingStartTime>ki&&n!==1073741824&&(e.flags|=128,r=!0,vo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=Te.current,me(Te,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return Ip(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Pt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function tk(t,e){switch(op(e),e.tag){case 1:return It(e.type)&&gu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return bi(),we(bt),we(ht),mp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return pp(e),null;case 13:if(we(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return we(Te),null;case 4:return bi(),null;case 10:return cp(e.type._context),null;case 22:case 23:return Ip(),null;case 24:return null;default:return null}}var Tl=!1,ut=!1,nk=typeof WeakSet=="function"?WeakSet:Set,W=null;function oi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function Gh(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var Gy=!1;function rk(t,e){if(Ch=hu,t=pw(),sp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,p=t,m=null;t:for(;;){for(var x;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(c=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)m=p,p=x;for(;;){if(p===t)break t;if(m===n&&++d===s&&(l=o),m===i&&++h===r&&(c=o),(x=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ph={focusedElem:t,selectionRange:n},hu=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,k=_.memoizedState,S=e.stateNode,E=S.getSnapshotBeforeUpdate(e.elementType===e.type?b:nn(e.type,b),k);S.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var N=e.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(j){Ae(e,e.return,j)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return _=Gy,Gy=!1,_}function Uo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Gh(e,n,i)}s=s.next}while(s!==r)}}function lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Qh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cx(t){var e=t.alternate;e!==null&&(t.alternate=null,cx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[oa],delete e[Oh],delete e[UI],delete e[FI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dx(t){return t.tag===5||t.tag===3||t.tag===4}function Qy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Jh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=mu));else if(r!==4&&(t=t.child,t!==null))for(Jh(t,e,n),t=t.sibling;t!==null;)Jh(t,e,n),t=t.sibling}function Yh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Yh(t,e,n),t=t.sibling;t!==null;)Yh(t,e,n),t=t.sibling}var Ye=null,rn=!1;function ar(t,e,n){for(n=n.child;n!==null;)hx(t,e,n),n=n.sibling}function hx(t,e,n){if(Tn&&typeof Tn.onCommitFiberUnmount=="function")try{Tn.onCommitFiberUnmount(ec,n)}catch{}switch(n.tag){case 5:ut||oi(n,e);case 6:var r=Ye,s=rn;Ye=null,ar(t,e,n),Ye=r,rn=s,Ye!==null&&(rn?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(rn?(t=Ye,n=n.stateNode,t.nodeType===8?Od(t.parentNode,n):t.nodeType===1&&Od(t,n),ta(t)):Od(Ye,n.stateNode));break;case 4:r=Ye,s=rn,Ye=n.stateNode.containerInfo,rn=!0,ar(t,e,n),Ye=r,rn=s;break;case 0:case 11:case 14:case 15:if(!ut&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Gh(n,e,o),s=s.next}while(s!==r)}ar(t,e,n);break;case 1:if(!ut&&(oi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ae(n,e,l)}ar(t,e,n);break;case 21:ar(t,e,n);break;case 22:n.mode&1?(ut=(r=ut)||n.memoizedState!==null,ar(t,e,n),ut=r):ar(t,e,n);break;default:ar(t,e,n)}}function Jy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new nk),e.forEach(function(r){var s=hk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,rn=!1;break e;case 3:Ye=l.stateNode.containerInfo,rn=!0;break e;case 4:Ye=l.stateNode.containerInfo,rn=!0;break e}l=l.return}if(Ye===null)throw Error(B(160));hx(i,o,s),Ye=null,rn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ae(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fx(e,t),e=e.sibling}function fx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),yn(t),r&4){try{Uo(3,t,t.return),lc(3,t)}catch(b){Ae(t,t.return,b)}try{Uo(5,t,t.return)}catch(b){Ae(t,t.return,b)}}break;case 1:tn(e,t),yn(t),r&512&&n!==null&&oi(n,n.return);break;case 5:if(tn(e,t),yn(t),r&512&&n!==null&&oi(n,n.return),t.flags&32){var s=t.stateNode;try{Yo(s,"")}catch(b){Ae(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&O_(s,i),xh(l,o);var d=xh(l,i);for(o=0;o<c.length;o+=2){var h=c[o],p=c[o+1];h==="style"?F_(s,p):h==="dangerouslySetInnerHTML"?M_(s,p):h==="children"?Yo(s,p):Hf(s,h,p,d)}switch(l){case"input":gh(s,i);break;case"textarea":L_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?ui(s,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?ui(s,!!i.multiple,i.defaultValue,!0):ui(s,!!i.multiple,i.multiple?[]:"",!1))}s[oa]=i}catch(b){Ae(t,t.return,b)}}break;case 6:if(tn(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Ae(t,t.return,b)}}break;case 3:if(tn(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ta(e.containerInfo)}catch(b){Ae(t,t.return,b)}break;case 4:tn(e,t),yn(t);break;case 13:tn(e,t),yn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Sp=je())),r&4&&Jy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(ut=(d=ut)||h,tn(e,t),ut=d):tn(e,t),yn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(W=t,h=t.child;h!==null;){for(p=W=h;W!==null;){switch(m=W,x=m.child,m.tag){case 0:case 11:case 14:case 15:Uo(4,m,m.return);break;case 1:oi(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(b){Ae(r,n,b)}}break;case 5:oi(m,m.return);break;case 22:if(m.memoizedState!==null){Xy(p);continue}}x!==null?(x.return=m,W=x):Xy(p)}h=h.sibling}e:for(h=null,p=t;;){if(p.tag===5){if(h===null){h=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,c=p.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=U_("display",o))}catch(b){Ae(t,t.return,b)}}}else if(p.tag===6){if(h===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(b){Ae(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;h===p&&(h=null),p=p.return}h===p&&(h=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:tn(e,t),yn(t),r&4&&Jy(t);break;case 21:break;default:tn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dx(n)){var r=n;break e}n=n.return}throw Error(B(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Yo(s,""),r.flags&=-33);var i=Qy(t);Yh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Qy(t);Jh(t,l,o);break;default:throw Error(B(161))}}catch(c){Ae(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sk(t,e,n){W=t,px(t)}function px(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Tl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ut;l=Tl;var d=ut;if(Tl=o,(ut=c)&&!d)for(W=s;W!==null;)o=W,c=o.child,o.tag===22&&o.memoizedState!==null?Zy(s):c!==null?(c.return=o,W=c):Zy(s);for(;i!==null;)W=i,px(i),i=i.sibling;W=s,Tl=l,ut=d}Yy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Yy(t)}}function Yy(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ut||lc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ut)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Oy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Oy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var p=h.dehydrated;p!==null&&ta(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}ut||e.flags&512&&Qh(e)}catch(m){Ae(e,e.return,m)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function Xy(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Zy(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lc(4,e)}catch(c){Ae(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ae(e,s,c)}}var i=e.return;try{Qh(e)}catch(c){Ae(e,i,c)}break;case 5:var o=e.return;try{Qh(e)}catch(c){Ae(e,o,c)}}}catch(c){Ae(e,e.return,c)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var ik=Math.ceil,Iu=Yn.ReactCurrentDispatcher,Ep=Yn.ReactCurrentOwner,Kt=Yn.ReactCurrentBatchConfig,ue=0,Qe=null,Ve=null,et=0,Pt=0,ai=Hr(0),$e=0,ha=null,Ss=0,uc=0,Tp=0,Fo=null,Tt=null,Sp=0,ki=1/0,On=null,ku=!1,Xh=null,Nr=null,Sl=!1,wr=null,Nu=0,Bo=0,Zh=null,Hl=-1,Wl=0;function _t(){return ue&6?je():Hl!==-1?Hl:Hl=je()}function Ar(t){return t.mode&1?ue&2&&et!==0?et&-et:zI.transition!==null?(Wl===0&&(Wl=X_()),Wl):(t=de,t!==0||(t=window.event,t=t===void 0?16:iw(t.type)),t):1}function ln(t,e,n,r){if(50<Bo)throw Bo=0,Zh=null,Error(B(185));ka(t,n,r),(!(ue&2)||t!==Qe)&&(t===Qe&&(!(ue&2)&&(uc|=n),$e===4&&hr(t,et)),kt(t,r),n===1&&ue===0&&!(e.mode&1)&&(ki=je()+500,ic&&Wr()))}function kt(t,e){var n=t.callbackNode;zb(t,e);var r=du(t,t===Qe?et:0);if(r===0)n!==null&&ly(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ly(n),e===1)t.tag===0?BI(e0.bind(null,t)):Sw(e0.bind(null,t)),VI(function(){!(ue&6)&&Wr()}),n=null;else{switch(Z_(r)){case 1:n=Jf;break;case 4:n=J_;break;case 16:n=cu;break;case 536870912:n=Y_;break;default:n=cu}n=Ex(n,mx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mx(t,e){if(Hl=-1,Wl=0,ue&6)throw Error(B(327));var n=t.callbackNode;if(pi()&&t.callbackNode!==n)return null;var r=du(t,t===Qe?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Au(t,r);else{e=r;var s=ue;ue|=2;var i=yx();(Qe!==t||et!==e)&&(On=null,ki=je()+500,ms(t,e));do try{lk();break}catch(l){gx(t,l)}while(!0);up(),Iu.current=i,ue=s,Ve!==null?e=0:(Qe=null,et=0,e=$e)}if(e!==0){if(e===2&&(s=Ih(t),s!==0&&(r=s,e=ef(t,s))),e===1)throw n=ha,ms(t,0),hr(t,r),kt(t,je()),n;if(e===6)hr(t,r);else{if(s=t.current.alternate,!(r&30)&&!ok(s)&&(e=Au(t,r),e===2&&(i=Ih(t),i!==0&&(r=i,e=ef(t,i))),e===1))throw n=ha,ms(t,0),hr(t,r),kt(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(B(345));case 2:as(t,Tt,On);break;case 3:if(hr(t,r),(r&130023424)===r&&(e=Sp+500-je(),10<e)){if(du(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){_t(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Dh(as.bind(null,t,Tt,On),e);break}as(t,Tt,On);break;case 4:if(hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-an(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ik(r/1960))-r,10<r){t.timeoutHandle=Dh(as.bind(null,t,Tt,On),r);break}as(t,Tt,On);break;case 5:as(t,Tt,On);break;default:throw Error(B(329))}}}return kt(t,je()),t.callbackNode===n?mx.bind(null,t):null}function ef(t,e){var n=Fo;return t.current.memoizedState.isDehydrated&&(ms(t,e).flags|=256),t=Au(t,e),t!==2&&(e=Tt,Tt=n,e!==null&&tf(e)),t}function tf(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function ok(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!cn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(t,e){for(e&=~Tp,e&=~uc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-an(e),r=1<<n;t[n]=-1,e&=~r}}function e0(t){if(ue&6)throw Error(B(327));pi();var e=du(t,0);if(!(e&1))return kt(t,je()),null;var n=Au(t,e);if(t.tag!==0&&n===2){var r=Ih(t);r!==0&&(e=r,n=ef(t,r))}if(n===1)throw n=ha,ms(t,0),hr(t,e),kt(t,je()),n;if(n===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,as(t,Tt,On),kt(t,je()),null}function bp(t,e){var n=ue;ue|=1;try{return t(e)}finally{ue=n,ue===0&&(ki=je()+500,ic&&Wr())}}function bs(t){wr!==null&&wr.tag===0&&!(ue&6)&&pi();var e=ue;ue|=1;var n=Kt.transition,r=de;try{if(Kt.transition=null,de=1,t)return t()}finally{de=r,Kt.transition=n,ue=e,!(ue&6)&&Wr()}}function Ip(){Pt=ai.current,we(ai)}function ms(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,LI(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(op(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&gu();break;case 3:bi(),we(bt),we(ht),mp();break;case 5:pp(r);break;case 4:bi();break;case 13:we(Te);break;case 19:we(Te);break;case 10:cp(r.type._context);break;case 22:case 23:Ip()}n=n.return}if(Qe=t,Ve=t=Rr(t.current,null),et=Pt=e,$e=0,ha=null,Tp=uc=Ss=0,Tt=Fo=null,cs!==null){for(e=0;e<cs.length;e++)if(n=cs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}cs=null}return t}function gx(t,e){do{var n=Ve;try{if(up(),zl.current=bu,Su){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Su=!1}if(Ts=0,Ge=ze=Se=null,Mo=!1,ua=0,Ep.current=null,n===null||n.return===null){$e=1,ha=e,Ve=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,p=h.tag;if(!(h.mode&1)&&(p===0||p===11||p===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=By(o);if(x!==null){x.flags&=-257,zy(x,o,l,i,e),x.mode&1&&Fy(i,d,e),e=x,c=d;var _=e.updateQueue;if(_===null){var b=new Set;b.add(c),e.updateQueue=b}else _.add(c);break e}else{if(!(e&1)){Fy(i,d,e),kp();break e}c=Error(B(426))}}else if(xe&&l.mode&1){var k=By(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),zy(k,o,l,i,e),ap(Ii(c,l));break e}}i=c=Ii(c,l),$e!==4&&($e=2),Fo===null?Fo=[i]:Fo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var S=Zw(i,c,e);Dy(i,S);break e;case 1:l=c;var E=i.type,N=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Nr===null||!Nr.has(N)))){i.flags|=65536,e&=-e,i.lanes|=e;var j=ex(i,l,e);Dy(i,j);break e}}i=i.return}while(i!==null)}_x(n)}catch(F){e=F,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function yx(){var t=Iu.current;return Iu.current=bu,t===null?bu:t}function kp(){($e===0||$e===3||$e===2)&&($e=4),Qe===null||!(Ss&268435455)&&!(uc&268435455)||hr(Qe,et)}function Au(t,e){var n=ue;ue|=2;var r=yx();(Qe!==t||et!==e)&&(On=null,ms(t,e));do try{ak();break}catch(s){gx(t,s)}while(!0);if(up(),ue=n,Iu.current=r,Ve!==null)throw Error(B(261));return Qe=null,et=0,$e}function ak(){for(;Ve!==null;)vx(Ve)}function lk(){for(;Ve!==null&&!jb();)vx(Ve)}function vx(t){var e=xx(t.alternate,t,Pt);t.memoizedProps=t.pendingProps,e===null?_x(t):Ve=e,Ep.current=null}function _x(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=tk(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Ve=null;return}}else if(n=ek(n,e,Pt),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);$e===0&&($e=5)}function as(t,e,n){var r=de,s=Kt.transition;try{Kt.transition=null,de=1,uk(t,e,n,r)}finally{Kt.transition=s,de=r}return null}function uk(t,e,n,r){do pi();while(wr!==null);if(ue&6)throw Error(B(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if($b(t,i),t===Qe&&(Ve=Qe=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Sl||(Sl=!0,Ex(cu,function(){return pi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Kt.transition,Kt.transition=null;var o=de;de=1;var l=ue;ue|=4,Ep.current=null,rk(t,n),fx(n,t),AI(Ph),hu=!!Ch,Ph=Ch=null,t.current=n,sk(n),Db(),ue=l,de=o,Kt.transition=i}else t.current=n;if(Sl&&(Sl=!1,wr=t,Nu=s),i=t.pendingLanes,i===0&&(Nr=null),Vb(n.stateNode),kt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ku)throw ku=!1,t=Xh,Xh=null,t;return Nu&1&&t.tag!==0&&pi(),i=t.pendingLanes,i&1?t===Zh?Bo++:(Bo=0,Zh=t):Bo=0,Wr(),null}function pi(){if(wr!==null){var t=Z_(Nu),e=Kt.transition,n=de;try{if(Kt.transition=null,de=16>t?16:t,wr===null)var r=!1;else{if(t=wr,wr=null,Nu=0,ue&6)throw Error(B(331));var s=ue;for(ue|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(W=d;W!==null;){var h=W;switch(h.tag){case 0:case 11:case 15:Uo(8,h,i)}var p=h.child;if(p!==null)p.return=h,W=p;else for(;W!==null;){h=W;var m=h.sibling,x=h.return;if(cx(h),h===d){W=null;break}if(m!==null){m.return=x,W=m;break}W=x}}}var _=i.alternate;if(_!==null){var b=_.child;if(b!==null){_.child=null;do{var k=b.sibling;b.sibling=null,b=k}while(b!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Uo(9,i,i.return)}var S=i.sibling;if(S!==null){S.return=i.return,W=S;break e}W=i.return}}var E=t.current;for(W=E;W!==null;){o=W;var N=o.child;if(o.subtreeFlags&2064&&N!==null)N.return=o,W=N;else e:for(o=E;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lc(9,l)}}catch(F){Ae(l,l.return,F)}if(l===o){W=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,W=j;break e}W=l.return}}if(ue=s,Wr(),Tn&&typeof Tn.onPostCommitFiberRoot=="function")try{Tn.onPostCommitFiberRoot(ec,t)}catch{}r=!0}return r}finally{de=n,Kt.transition=e}}return!1}function t0(t,e,n){e=Ii(n,e),e=Zw(t,e,1),t=kr(t,e,1),e=_t(),t!==null&&(ka(t,1,e),kt(t,e))}function Ae(t,e,n){if(t.tag===3)t0(t,t,n);else for(;e!==null;){if(e.tag===3){t0(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Nr===null||!Nr.has(r))){t=Ii(n,t),t=ex(e,t,1),e=kr(e,t,1),t=_t(),e!==null&&(ka(e,1,t),kt(e,t));break}}e=e.return}}function ck(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(et&n)===n&&($e===4||$e===3&&(et&130023424)===et&&500>je()-Sp?ms(t,0):Tp|=n),kt(t,e)}function wx(t,e){e===0&&(t.mode&1?(e=pl,pl<<=1,!(pl&130023424)&&(pl=4194304)):e=1);var n=_t();t=Hn(t,e),t!==null&&(ka(t,e,n),kt(t,n))}function dk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),wx(t,n)}function hk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(B(314))}r!==null&&r.delete(e),wx(t,n)}var xx;xx=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bt.current)St=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return St=!1,ZI(t,e,n);St=!!(t.flags&131072)}else St=!1,xe&&e.flags&1048576&&bw(e,_u,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ql(t,e),t=e.pendingProps;var s=Ei(e,ht.current);fi(e,n),s=yp(null,e,r,t,s,n);var i=vp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(r)?(i=!0,yu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,hp(e),s.updater=ac,e.stateNode=s,s._reactInternals=e,Bh(e,r,t,n),e=qh(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&ip(e),yt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ql(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=pk(r),t=nn(r,t),s){case 0:e=$h(null,e,r,t,n);break e;case 1:e=Hy(null,e,r,t,n);break e;case 11:e=$y(null,e,r,t,n);break e;case 14:e=qy(null,e,r,nn(r.type,t),n);break e}throw Error(B(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),$h(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Hy(t,e,r,s,n);case 3:e:{if(sx(e),t===null)throw Error(B(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Cw(t,e),Eu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ii(Error(B(423)),e),e=Wy(t,e,r,n,s);break e}else if(r!==s){s=Ii(Error(B(424)),e),e=Wy(t,e,r,n,s);break e}else for(Dt=Ir(e.stateNode.containerInfo.firstChild),Vt=e,xe=!0,sn=null,n=Aw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ti(),r===s){e=Wn(t,e,n);break e}yt(t,e,r,n)}e=e.child}return e;case 5:return Pw(e),t===null&&Mh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,jh(r,s)?o=null:i!==null&&jh(r,i)&&(e.flags|=32),rx(t,e),yt(t,e,o,n),e.child;case 6:return t===null&&Mh(e),null;case 13:return ix(t,e,n);case 4:return fp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Si(e,null,r,n):yt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),$y(t,e,r,s,n);case 7:return yt(t,e,e.pendingProps,n),e.child;case 8:return yt(t,e,e.pendingProps.children,n),e.child;case 12:return yt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,me(wu,r._currentValue),r._currentValue=o,i!==null)if(cn(i.value,o)){if(i.children===s.children&&!bt.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Bn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Uh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(B(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Uh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}yt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,fi(e,n),s=Qt(s),r=r(s),e.flags|=1,yt(t,e,r,n),e.child;case 14:return r=e.type,s=nn(r,e.pendingProps),s=nn(r.type,s),qy(t,e,r,s,n);case 15:return tx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),ql(t,e),e.tag=1,It(r)?(t=!0,yu(e)):t=!1,fi(e,n),Xw(e,r,s),Bh(e,r,s,n),qh(null,e,r,!0,t,n);case 19:return ox(t,e,n);case 22:return nx(t,e,n)}throw Error(B(156,e.tag))};function Ex(t,e){return Q_(t,e)}function fk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new fk(t,e,n,r)}function Np(t){return t=t.prototype,!(!t||!t.isReactComponent)}function pk(t){if(typeof t=="function")return Np(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kf)return 11;if(t===Gf)return 14}return 2}function Rr(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Np(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ys:return gs(n.children,s,i,e);case Wf:o=8,s|=8;break;case dh:return t=Wt(12,n,e,s|2),t.elementType=dh,t.lanes=i,t;case hh:return t=Wt(13,n,e,s),t.elementType=hh,t.lanes=i,t;case fh:return t=Wt(19,n,e,s),t.elementType=fh,t.lanes=i,t;case P_:return cc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case R_:o=10;break e;case C_:o=9;break e;case Kf:o=11;break e;case Gf:o=14;break e;case ur:o=16,r=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function gs(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function cc(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=P_,t.lanes=n,t.stateNode={isHidden:!1},t}function $d(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function qd(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Sd(0),this.expirationTimes=Sd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Sd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Ap(t,e,n,r,s,i,o,l,c){return t=new mk(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hp(i),t}function gk(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Js,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Tx(t){if(!t)return Lr;t=t._reactInternals;e:{if(Ls(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var n=t.type;if(It(n))return Tw(t,n,e)}return e}function Sx(t,e,n,r,s,i,o,l,c){return t=Ap(n,r,!0,t,s,i,o,l,c),t.context=Tx(null),n=t.current,r=_t(),s=Ar(n),i=Bn(r,s),i.callback=e??null,kr(n,i,s),t.current.lanes=s,ka(t,s,r),kt(t,r),t}function dc(t,e,n,r){var s=e.current,i=_t(),o=Ar(s);return n=Tx(n),e.context===null?e.context=n:e.pendingContext=n,e=Bn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=kr(s,e,o),t!==null&&(ln(t,s,o,i),Bl(t,s,o)),o}function Ru(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function n0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Rp(t,e){n0(t,e),(t=t.alternate)&&n0(t,e)}function yk(){return null}var bx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Cp(t){this._internalRoot=t}hc.prototype.render=Cp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));dc(t,e,null,null)};hc.prototype.unmount=Cp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bs(function(){dc(null,t,null,null)}),e[qn]=null}};function hc(t){this._internalRoot=t}hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=nw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<dr.length&&e!==0&&e<dr[n].priority;n++);dr.splice(n,0,t),n===0&&sw(t)}};function Pp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function r0(){}function vk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ru(o);i.call(d)}}var o=Sx(e,r,t,0,null,!1,!1,"",r0);return t._reactRootContainer=o,t[qn]=o.current,sa(t.nodeType===8?t.parentNode:t),bs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Ru(c);l.call(d)}}var c=Ap(t,0,!1,null,null,!1,!1,"",r0);return t._reactRootContainer=c,t[qn]=c.current,sa(t.nodeType===8?t.parentNode:t),bs(function(){dc(e,c,n,r)}),c}function pc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Ru(o);l.call(c)}}dc(e,o,t,s)}else o=vk(n,e,t,s,r);return Ru(o)}ew=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bo(e.pendingLanes);n!==0&&(Yf(e,n|1),kt(e,je()),!(ue&6)&&(ki=je()+500,Wr()))}break;case 13:bs(function(){var r=Hn(t,1);if(r!==null){var s=_t();ln(r,t,1,s)}}),Rp(t,1)}};Xf=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=_t();ln(e,t,134217728,n)}Rp(t,134217728)}};tw=function(t){if(t.tag===13){var e=Ar(t),n=Hn(t,e);if(n!==null){var r=_t();ln(n,t,e,r)}Rp(t,e)}};nw=function(){return de};rw=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};Th=function(t,e,n){switch(e){case"input":if(gh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sc(r);if(!s)throw Error(B(90));D_(r),gh(r,s)}}}break;case"textarea":L_(t,n);break;case"select":e=n.value,e!=null&&ui(t,!!n.multiple,e,!1)}};$_=bp;q_=bs;var _k={usingClientEntryPoint:!1,Events:[Aa,ti,sc,B_,z_,bp]},_o={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wk={bundleType:_o.bundleType,version:_o.version,rendererPackageName:_o.rendererPackageName,rendererConfig:_o.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=K_(t),t===null?null:t.stateNode},findFiberByHostInstance:_o.findFiberByHostInstance||yk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var bl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!bl.isDisabled&&bl.supportsFiber)try{ec=bl.inject(wk),Tn=bl}catch{}}Ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_k;Ft.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Pp(e))throw Error(B(200));return gk(t,e,null,n)};Ft.createRoot=function(t,e){if(!Pp(t))throw Error(B(299));var n=!1,r="",s=bx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Ap(t,1,!1,null,null,n,!1,r,s),t[qn]=e.current,sa(t.nodeType===8?t.parentNode:t),new Cp(e)};Ft.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=K_(e),t=t===null?null:t.stateNode,t};Ft.flushSync=function(t){return bs(t)};Ft.hydrate=function(t,e,n){if(!fc(e))throw Error(B(200));return pc(null,t,e,!0,n)};Ft.hydrateRoot=function(t,e,n){if(!Pp(t))throw Error(B(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=bx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Sx(e,null,t,1,n??null,s,!1,i,o),t[qn]=e.current,sa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hc(e)};Ft.render=function(t,e,n){if(!fc(e))throw Error(B(200));return pc(null,t,e,!1,n)};Ft.unmountComponentAtNode=function(t){if(!fc(t))throw Error(B(40));return t._reactRootContainer?(bs(function(){pc(null,null,t,!1,function(){t._reactRootContainer=null,t[qn]=null})}),!0):!1};Ft.unstable_batchedUpdates=bp;Ft.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fc(n))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return pc(t,e,n,!1,r)};Ft.version="18.3.1-next-f1338f8080-20240426";function Ix(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ix)}catch(t){console.error(t)}}Ix(),I_.exports=Ft;var xk=I_.exports,s0=xk;uh.createRoot=s0.createRoot,uh.hydrateRoot=s0.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function fa(){return fa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fa.apply(this,arguments)}var xr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(xr||(xr={}));const i0="popstate";function Ek(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return nf("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:kx(s)}return Sk(e,n,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Tk(){return Math.random().toString(36).substr(2,8)}function o0(t,e){return{usr:t.state,key:t.key,idx:e}}function nf(t,e,n,r){return n===void 0&&(n=null),fa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bi(e):e,{state:n,key:e&&e.key||r||Tk()})}function kx(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Sk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=xr.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(fa({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=xr.Pop;let k=h(),S=k==null?null:k-d;d=k,c&&c({action:l,location:b.location,delta:S})}function m(k,S){l=xr.Push;let E=nf(b.location,k,S);d=h()+1;let N=o0(E,d),j=b.createHref(E);try{o.pushState(N,"",j)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(j)}i&&c&&c({action:l,location:b.location,delta:1})}function x(k,S){l=xr.Replace;let E=nf(b.location,k,S);d=h();let N=o0(E,d),j=b.createHref(E);o.replaceState(N,"",j),i&&c&&c({action:l,location:b.location,delta:0})}function _(k){let S=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof k=="string"?k:kx(k);return E=E.replace(/ $/,"%20"),Fe(S,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,S)}let b={get action(){return l},get location(){return t(s,o)},listen(k){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(i0,p),c=k,()=>{s.removeEventListener(i0,p),c=null}},createHref(k){return e(s,k)},createURL:_,encodeLocation(k){let S=_(k);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:m,replace:x,go(k){return o.go(k)}};return b}var a0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(a0||(a0={}));function bk(t,e,n){return n===void 0&&(n="/"),Ik(t,e,n)}function Ik(t,e,n,r){let s=typeof e=="string"?Bi(e):e,i=Rx(s.pathname||"/",n);if(i==null)return null;let o=Nx(t);kk(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=Uk(i);l=Lk(o[c],d)}return l}function Nx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Fe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=ys([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Fe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Nx(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Dk(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of Ax(i.path))s(i,o,c)}),e}function Ax(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Ax(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function kk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Ok(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Nk=/^:[\w-]+$/,Ak=3,Rk=2,Ck=1,Pk=10,jk=-2,l0=t=>t==="*";function Dk(t,e){let n=t.split("/"),r=n.length;return n.some(l0)&&(r+=jk),e&&(r+=Rk),n.filter(s=>!l0(s)).reduce((s,i)=>s+(Nk.test(i)?Ak:i===""?Ck:Pk),r)}function Ok(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Lk(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",p=Vk({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:ys([i,p.pathname]),pathnameBase:qk(ys([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=ys([i,p.pathnameBase]))}return o}function Vk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Mk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:m,isOptional:x}=h;if(m==="*"){let b=l[p]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const _=l[p];return x&&!_?d[m]=void 0:d[m]=(_||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function Mk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Uk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Rx(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Fk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bk=t=>Fk.test(t);function zk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bi(t):t,i;if(n)if(Bk(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),jp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=u0(n.substring(1),"/"):i=u0(n,e)}else i=e;return{pathname:i,search:Hk(r),hash:Wk(s)}}function u0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $k(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Cx(t,e){let n=$k(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Px(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bi(t):(s=fa({},t),Fe(!s.pathname||!s.pathname.includes("?"),Hd("?","pathname","search",s)),Fe(!s.pathname||!s.pathname.includes("#"),Hd("#","pathname","hash",s)),Fe(!s.search||!s.search.includes("#"),Hd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}l=p>=0?e[p]:"/"}let c=zk(s,l),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const ys=t=>t.join("/").replace(/\/\/+/g,"/"),qk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Hk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Wk=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Kk(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const jx=["post","put","patch","delete"];new Set(jx);const Gk=["get",...jx];new Set(Gk);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pa(){return pa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pa.apply(this,arguments)}const Dp=L.createContext(null),Qk=L.createContext(null),Ca=L.createContext(null),mc=L.createContext(null),Kr=L.createContext({outlet:null,matches:[],isDataRoute:!1}),Dx=L.createContext(null);function Pa(){return L.useContext(mc)!=null}function zi(){return Pa()||Fe(!1),L.useContext(mc).location}function Ox(t){L.useContext(Ca).static||L.useLayoutEffect(t)}function Gr(){let{isDataRoute:t}=L.useContext(Kr);return t?cN():Jk()}function Jk(){Pa()||Fe(!1);let t=L.useContext(Dp),{basename:e,future:n,navigator:r}=L.useContext(Ca),{matches:s}=L.useContext(Kr),{pathname:i}=zi(),o=JSON.stringify(Cx(s,n.v7_relativeSplatPath)),l=L.useRef(!1);return Ox(()=>{l.current=!0}),L.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=Px(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:ys([e,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[e,r,o,i,t])}const Yk=L.createContext(null);function Xk(t){let e=L.useContext(Kr).outlet;return e&&L.createElement(Yk.Provider,{value:t},e)}function Zk(t,e){return eN(t,e)}function eN(t,e,n,r){Pa()||Fe(!1);let{navigator:s}=L.useContext(Ca),{matches:i}=L.useContext(Kr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=zi(),h;if(e){var p;let k=typeof e=="string"?Bi(e):e;c==="/"||(p=k.pathname)!=null&&p.startsWith(c)||Fe(!1),h=k}else h=d;let m=h.pathname||"/",x=m;if(c!=="/"){let k=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(k.length).join("/")}let _=bk(t,{pathname:x}),b=iN(_&&_.map(k=>Object.assign({},k,{params:Object.assign({},l,k.params),pathname:ys([c,s.encodeLocation?s.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?c:ys([c,s.encodeLocation?s.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),i,n,r);return e&&b?L.createElement(mc.Provider,{value:{location:pa({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:xr.Pop}},b):b}function tN(){let t=uN(),e=Kk(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return L.createElement(L.Fragment,null,L.createElement("h2",null,"Unexpected Application Error!"),L.createElement("h3",{style:{fontStyle:"italic"}},e),n?L.createElement("pre",{style:s},n):null,null)}const nN=L.createElement(tN,null);class rN extends L.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?L.createElement(Kr.Provider,{value:this.props.routeContext},L.createElement(Dx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sN(t){let{routeContext:e,match:n,children:r}=t,s=L.useContext(Dp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),L.createElement(Kr.Provider,{value:e},r)}function iN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);h>=0||Fe(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:x}=n,_=p.route.loader&&m[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||_){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let x,_=!1,b=null,k=null;n&&(x=l&&p.route.id?l[p.route.id]:void 0,b=p.route.errorElement||nN,c&&(d<0&&m===0?(dN("route-fallback"),_=!0,k=null):d===m&&(_=!0,k=p.route.hydrateFallbackElement||null)));let S=e.concat(o.slice(0,m+1)),E=()=>{let N;return x?N=b:_?N=k:p.route.Component?N=L.createElement(p.route.Component,null):p.route.element?N=p.route.element:N=h,L.createElement(sN,{match:p,routeContext:{outlet:h,matches:S,isDataRoute:n!=null},children:N})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?L.createElement(rN,{location:n.location,revalidation:n.revalidation,component:b,error:x,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}var Lx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Lx||{}),Vx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Vx||{});function oN(t){let e=L.useContext(Dp);return e||Fe(!1),e}function aN(t){let e=L.useContext(Qk);return e||Fe(!1),e}function lN(t){let e=L.useContext(Kr);return e||Fe(!1),e}function Mx(t){let e=lN(),n=e.matches[e.matches.length-1];return n.route.id||Fe(!1),n.route.id}function uN(){var t;let e=L.useContext(Dx),n=aN(),r=Mx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function cN(){let{router:t}=oN(Lx.UseNavigateStable),e=Mx(Vx.UseNavigateStable),n=L.useRef(!1);return Ox(()=>{n.current=!0}),L.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,pa({fromRouteId:e},i)))},[t,e])}const c0={};function dN(t,e,n){c0[t]||(c0[t]=!0)}function hN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function fN(t){let{to:e,replace:n,state:r,relative:s}=t;Pa()||Fe(!1);let{future:i,static:o}=L.useContext(Ca),{matches:l}=L.useContext(Kr),{pathname:c}=zi(),d=Gr(),h=Px(e,Cx(l,i.v7_relativeSplatPath),c,s==="path"),p=JSON.stringify(h);return L.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function Ux(t){return Xk(t.context)}function We(t){Fe(!1)}function pN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=xr.Pop,navigator:i,static:o=!1,future:l}=t;Pa()&&Fe(!1);let c=e.replace(/^\/*/,"/"),d=L.useMemo(()=>({basename:c,navigator:i,static:o,future:pa({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Bi(r));let{pathname:h="/",search:p="",hash:m="",state:x=null,key:_="default"}=r,b=L.useMemo(()=>{let k=Rx(h,c);return k==null?null:{location:{pathname:k,search:p,hash:m,state:x,key:_},navigationType:s}},[c,h,p,m,x,_,s]);return b==null?null:L.createElement(Ca.Provider,{value:d},L.createElement(mc.Provider,{children:n,value:b}))}function mN(t){let{children:e,location:n}=t;return Zk(rf(e),n)}new Promise(()=>{});function rf(t,e){e===void 0&&(e=[]);let n=[];return L.Children.forEach(t,(r,s)=>{if(!L.isValidElement(r))return;let i=[...e,s];if(r.type===L.Fragment){n.push.apply(n,rf(r.props.children,i));return}r.type!==We&&Fe(!1),!r.props.index||!r.props.children||Fe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=rf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const gN="6";try{window.__reactRouterVersion=gN}catch{}const yN="startTransition",d0=cb[yN];function vN(t){let{basename:e,children:n,future:r,window:s}=t,i=L.useRef();i.current==null&&(i.current=Ek({window:s,v5Compat:!0}));let o=i.current,[l,c]=L.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=L.useCallback(p=>{d&&d0?d0(()=>c(p)):c(p)},[c,d]);return L.useLayoutEffect(()=>o.listen(h),[o,h]),L.useEffect(()=>hN(r),[r]),L.createElement(pN,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var h0;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(h0||(h0={}));var f0;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(f0||(f0={}));const _N=()=>{};var p0={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},wN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Bx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,x=d&63;c||(x=64,o||(m=64)),r.push(n[h],n[p],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Fx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new xN;const m=i<<2|l>>4;if(r.push(m),d!==64){const x=l<<4&240|d>>2;if(r.push(x),p!==64){const _=d<<6&192|p;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EN=function(t){const e=Fx(t);return Bx.encodeByteArray(e,!0)},Cu=function(t){return EN(t).replace(/\./g,"")},zx=function(t){try{return Bx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SN=()=>TN().__FIREBASE_DEFAULTS__,bN=()=>{if(typeof process>"u"||typeof p0>"u")return;const t=p0.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},IN=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&zx(t[1]);return e&&JSON.parse(e)},gc=()=>{try{return _N()||SN()||bN()||IN()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},$x=t=>{var e,n;return(n=(e=gc())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},qx=t=>{const e=$x(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Hx=()=>{var t;return(t=gc())==null?void 0:t.config},Wx=t=>{var e;return(e=gc())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Op(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Cu(JSON.stringify(n)),Cu(JSON.stringify(o)),""].join(".")}const zo={};function NN(){const t={prod:[],emulator:[]};for(const e of Object.keys(zo))zo[e]?t.emulator.push(e):t.prod.push(e);return t}function AN(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let m0=!1;function Lp(t,e){if(typeof window>"u"||typeof document>"u"||!Qr(window.location.host)||zo[t]===e||zo[t]||m0)return;zo[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=NN().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,x){m.setAttribute("width","24"),m.setAttribute("id",x),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{m0=!0,o()},m}function h(m,x){m.setAttribute("id",x),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=AN(r),x=n("text"),_=document.getElementById(x)||document.createElement("span"),b=n("learnmore"),k=document.getElementById(b)||document.createElement("a"),S=n("preprendIcon"),E=document.getElementById(S)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const N=m.element;l(N),h(k,b);const j=d();c(E,S),N.append(E,_,k,j),document.body.appendChild(N)}i?(_.innerText="Preview backend disconnected.",E.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(E.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",x)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function RN(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(ft())}function CN(){var e;const t=(e=gc())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function PN(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function jN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DN(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ON(){const t=ft();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function LN(){return!CN()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function VN(){try{return typeof indexedDB=="object"}catch{return!1}}function MN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN="FirebaseError";class Dn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=UN,Object.setPrototypeOf(this,Dn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ja.prototype.create)}}class ja{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?FN(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Dn(s,l,r)}}function FN(t,e){return t.replace(BN,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const BN=/\{\$([^}]+)}/g;function zN(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Is(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(g0(i)&&g0(o)){if(!Is(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function g0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Da(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ko(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function No(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function $N(t,e){const n=new qN(t,e);return n.subscribe.bind(n)}class qN{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");HN(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Wd),s.error===void 0&&(s.error=Wd),s.complete===void 0&&(s.complete=Wd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function HN(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t){return t&&t._delegate?t._delegate:t}class Vr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WN{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new kN;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(GN(e))try{this.getOrInitializeService({instanceIdentifier:ls})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ls){return this.instances.has(e)}getOptions(e=ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:KN(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ls){return this.component?this.component.multipleInstances?e:ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function KN(t){return t===ls?void 0:t}function GN(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new WN(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const JN={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},YN=se.INFO,XN={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},ZN=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=XN[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Vp{constructor(e){this.name=e,this._logLevel=YN,this._logHandler=ZN,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?JN[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const eA=(t,e)=>e.some(n=>t instanceof n);let y0,v0;function tA(){return y0||(y0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nA(){return v0||(v0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Gx=new WeakMap,sf=new WeakMap,Qx=new WeakMap,Kd=new WeakMap,Mp=new WeakMap;function rA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Cr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Gx.set(n,t)}).catch(()=>{}),Mp.set(e,t),e}function sA(t){if(sf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});sf.set(t,e)}let of={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Qx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Cr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function iA(t){of=t(of)}function oA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gd(this),e,...n);return Qx.set(r,e.sort?e.sort():[e]),Cr(r)}:nA().includes(t)?function(...e){return t.apply(Gd(this),e),Cr(Gx.get(this))}:function(...e){return Cr(t.apply(Gd(this),e))}}function aA(t){return typeof t=="function"?oA(t):(t instanceof IDBTransaction&&sA(t),eA(t,tA())?new Proxy(t,of):t)}function Cr(t){if(t instanceof IDBRequest)return rA(t);if(Kd.has(t))return Kd.get(t);const e=aA(t);return e!==t&&(Kd.set(t,e),Mp.set(e,t)),e}const Gd=t=>Mp.get(t);function lA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Cr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Cr(o.result),c.oldVersion,c.newVersion,Cr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const uA=["get","getKey","getAll","getAllKeys","count"],cA=["put","add","delete","clear"],Qd=new Map;function _0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qd.get(e))return Qd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=cA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||uA.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Qd.set(e,i),i}iA(t=>({...t,get:(e,n,r)=>_0(e,n)||t.get(e,n,r),has:(e,n)=>!!_0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(hA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function hA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const af="@firebase/app",w0="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new Vp("@firebase/app"),fA="@firebase/app-compat",pA="@firebase/analytics-compat",mA="@firebase/analytics",gA="@firebase/app-check-compat",yA="@firebase/app-check",vA="@firebase/auth",_A="@firebase/auth-compat",wA="@firebase/database",xA="@firebase/data-connect",EA="@firebase/database-compat",TA="@firebase/functions",SA="@firebase/functions-compat",bA="@firebase/installations",IA="@firebase/installations-compat",kA="@firebase/messaging",NA="@firebase/messaging-compat",AA="@firebase/performance",RA="@firebase/performance-compat",CA="@firebase/remote-config",PA="@firebase/remote-config-compat",jA="@firebase/storage",DA="@firebase/storage-compat",OA="@firebase/firestore",LA="@firebase/ai",VA="@firebase/firestore-compat",MA="firebase",UA="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="[DEFAULT]",FA={[af]:"fire-core",[fA]:"fire-core-compat",[mA]:"fire-analytics",[pA]:"fire-analytics-compat",[yA]:"fire-app-check",[gA]:"fire-app-check-compat",[vA]:"fire-auth",[_A]:"fire-auth-compat",[wA]:"fire-rtdb",[xA]:"fire-data-connect",[EA]:"fire-rtdb-compat",[TA]:"fire-fn",[SA]:"fire-fn-compat",[bA]:"fire-iid",[IA]:"fire-iid-compat",[kA]:"fire-fcm",[NA]:"fire-fcm-compat",[AA]:"fire-perf",[RA]:"fire-perf-compat",[CA]:"fire-rc",[PA]:"fire-rc-compat",[jA]:"fire-gcs",[DA]:"fire-gcs-compat",[OA]:"fire-fst",[VA]:"fire-fst-compat",[LA]:"fire-vertex","fire-js":"fire-js",[MA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new Map,BA=new Map,uf=new Map;function x0(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ks(t){const e=t.name;if(uf.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;uf.set(e,t);for(const n of Pu.values())x0(n,t);for(const n of BA.values())x0(n,t);return!0}function yc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function jt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Pr=new ja("app","Firebase",zA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Vr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Pr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=UA;function Jx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:lf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Pr.create("bad-app-name",{appName:String(s)});if(n||(n=Hx()),!n)throw Pr.create("no-options");const i=Pu.get(s);if(i){if(Is(n,i.options)&&Is(r,i.config))return i;throw Pr.create("duplicate-app",{appName:s})}const o=new QN(s);for(const c of uf.values())o.addComponent(c);const l=new $A(n,r,o);return Pu.set(s,l),l}function Up(t=lf){const e=Pu.get(t);if(!e&&t===lf&&Hx())return Jx();if(!e)throw Pr.create("no-app",{appName:t});return e}function bn(t,e,n){let r=FA[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(o.join(" "));return}ks(new Vr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firebase-heartbeat-database",HA=1,ma="firebase-heartbeat-store";let Jd=null;function Yx(){return Jd||(Jd=lA(qA,HA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ma)}catch(n){console.warn(n)}}}}).catch(t=>{throw Pr.create("idb-open",{originalErrorMessage:t.message})})),Jd}async function WA(t){try{const n=(await Yx()).transaction(ma),r=await n.objectStore(ma).get(Xx(t));return await n.done,r}catch(e){if(e instanceof Dn)Kn.warn(e.message);else{const n=Pr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function E0(t,e){try{const r=(await Yx()).transaction(ma,"readwrite");await r.objectStore(ma).put(e,Xx(t)),await r.done}catch(n){if(n instanceof Dn)Kn.warn(n.message);else{const r=Pr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function Xx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KA=1024,GA=30;class QA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new YA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=T0();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>GA){const o=XA(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=T0(),{heartbeatsToSend:r,unsentEntries:s}=JA(this._heartbeatsCache.heartbeats),i=Cu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kn.warn(n),""}}}function T0(){return new Date().toISOString().substring(0,10)}function JA(t,e=KA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),S0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),S0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class YA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return VN()?MN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await WA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return E0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return E0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function S0(t){return Cu(JSON.stringify({version:2,heartbeats:t})).length}function XA(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(t){ks(new Vr("platform-logger",e=>new dA(e),"PRIVATE")),ks(new Vr("heartbeat",e=>new QA(e),"PRIVATE")),bn(af,w0,t),bn(af,w0,"esm2020"),bn("fire-js","")}ZA("");var eR="firebase",tR="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn(eR,tR,"app");var b0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jr,Zx;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function w(){}w.prototype=v.prototype,T.F=v.prototype,T.prototype=new w,T.prototype.constructor=T,T.D=function(I,R,C){for(var A=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)A[ge-2]=arguments[ge];return v.prototype[R].apply(I,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,v,w){w||(w=0);const I=Array(16);if(typeof v=="string")for(var R=0;R<16;++R)I[R]=v.charCodeAt(w++)|v.charCodeAt(w++)<<8|v.charCodeAt(w++)<<16|v.charCodeAt(w++)<<24;else for(R=0;R<16;++R)I[R]=v[w++]|v[w++]<<8|v[w++]<<16|v[w++]<<24;v=T.g[0],w=T.g[1],R=T.g[2];let C=T.g[3],A;A=v+(C^w&(R^C))+I[0]+3614090360&4294967295,v=w+(A<<7&4294967295|A>>>25),A=C+(R^v&(w^R))+I[1]+3905402710&4294967295,C=v+(A<<12&4294967295|A>>>20),A=R+(w^C&(v^w))+I[2]+606105819&4294967295,R=C+(A<<17&4294967295|A>>>15),A=w+(v^R&(C^v))+I[3]+3250441966&4294967295,w=R+(A<<22&4294967295|A>>>10),A=v+(C^w&(R^C))+I[4]+4118548399&4294967295,v=w+(A<<7&4294967295|A>>>25),A=C+(R^v&(w^R))+I[5]+1200080426&4294967295,C=v+(A<<12&4294967295|A>>>20),A=R+(w^C&(v^w))+I[6]+2821735955&4294967295,R=C+(A<<17&4294967295|A>>>15),A=w+(v^R&(C^v))+I[7]+4249261313&4294967295,w=R+(A<<22&4294967295|A>>>10),A=v+(C^w&(R^C))+I[8]+1770035416&4294967295,v=w+(A<<7&4294967295|A>>>25),A=C+(R^v&(w^R))+I[9]+2336552879&4294967295,C=v+(A<<12&4294967295|A>>>20),A=R+(w^C&(v^w))+I[10]+4294925233&4294967295,R=C+(A<<17&4294967295|A>>>15),A=w+(v^R&(C^v))+I[11]+2304563134&4294967295,w=R+(A<<22&4294967295|A>>>10),A=v+(C^w&(R^C))+I[12]+1804603682&4294967295,v=w+(A<<7&4294967295|A>>>25),A=C+(R^v&(w^R))+I[13]+4254626195&4294967295,C=v+(A<<12&4294967295|A>>>20),A=R+(w^C&(v^w))+I[14]+2792965006&4294967295,R=C+(A<<17&4294967295|A>>>15),A=w+(v^R&(C^v))+I[15]+1236535329&4294967295,w=R+(A<<22&4294967295|A>>>10),A=v+(R^C&(w^R))+I[1]+4129170786&4294967295,v=w+(A<<5&4294967295|A>>>27),A=C+(w^R&(v^w))+I[6]+3225465664&4294967295,C=v+(A<<9&4294967295|A>>>23),A=R+(v^w&(C^v))+I[11]+643717713&4294967295,R=C+(A<<14&4294967295|A>>>18),A=w+(C^v&(R^C))+I[0]+3921069994&4294967295,w=R+(A<<20&4294967295|A>>>12),A=v+(R^C&(w^R))+I[5]+3593408605&4294967295,v=w+(A<<5&4294967295|A>>>27),A=C+(w^R&(v^w))+I[10]+38016083&4294967295,C=v+(A<<9&4294967295|A>>>23),A=R+(v^w&(C^v))+I[15]+3634488961&4294967295,R=C+(A<<14&4294967295|A>>>18),A=w+(C^v&(R^C))+I[4]+3889429448&4294967295,w=R+(A<<20&4294967295|A>>>12),A=v+(R^C&(w^R))+I[9]+568446438&4294967295,v=w+(A<<5&4294967295|A>>>27),A=C+(w^R&(v^w))+I[14]+3275163606&4294967295,C=v+(A<<9&4294967295|A>>>23),A=R+(v^w&(C^v))+I[3]+4107603335&4294967295,R=C+(A<<14&4294967295|A>>>18),A=w+(C^v&(R^C))+I[8]+1163531501&4294967295,w=R+(A<<20&4294967295|A>>>12),A=v+(R^C&(w^R))+I[13]+2850285829&4294967295,v=w+(A<<5&4294967295|A>>>27),A=C+(w^R&(v^w))+I[2]+4243563512&4294967295,C=v+(A<<9&4294967295|A>>>23),A=R+(v^w&(C^v))+I[7]+1735328473&4294967295,R=C+(A<<14&4294967295|A>>>18),A=w+(C^v&(R^C))+I[12]+2368359562&4294967295,w=R+(A<<20&4294967295|A>>>12),A=v+(w^R^C)+I[5]+4294588738&4294967295,v=w+(A<<4&4294967295|A>>>28),A=C+(v^w^R)+I[8]+2272392833&4294967295,C=v+(A<<11&4294967295|A>>>21),A=R+(C^v^w)+I[11]+1839030562&4294967295,R=C+(A<<16&4294967295|A>>>16),A=w+(R^C^v)+I[14]+4259657740&4294967295,w=R+(A<<23&4294967295|A>>>9),A=v+(w^R^C)+I[1]+2763975236&4294967295,v=w+(A<<4&4294967295|A>>>28),A=C+(v^w^R)+I[4]+1272893353&4294967295,C=v+(A<<11&4294967295|A>>>21),A=R+(C^v^w)+I[7]+4139469664&4294967295,R=C+(A<<16&4294967295|A>>>16),A=w+(R^C^v)+I[10]+3200236656&4294967295,w=R+(A<<23&4294967295|A>>>9),A=v+(w^R^C)+I[13]+681279174&4294967295,v=w+(A<<4&4294967295|A>>>28),A=C+(v^w^R)+I[0]+3936430074&4294967295,C=v+(A<<11&4294967295|A>>>21),A=R+(C^v^w)+I[3]+3572445317&4294967295,R=C+(A<<16&4294967295|A>>>16),A=w+(R^C^v)+I[6]+76029189&4294967295,w=R+(A<<23&4294967295|A>>>9),A=v+(w^R^C)+I[9]+3654602809&4294967295,v=w+(A<<4&4294967295|A>>>28),A=C+(v^w^R)+I[12]+3873151461&4294967295,C=v+(A<<11&4294967295|A>>>21),A=R+(C^v^w)+I[15]+530742520&4294967295,R=C+(A<<16&4294967295|A>>>16),A=w+(R^C^v)+I[2]+3299628645&4294967295,w=R+(A<<23&4294967295|A>>>9),A=v+(R^(w|~C))+I[0]+4096336452&4294967295,v=w+(A<<6&4294967295|A>>>26),A=C+(w^(v|~R))+I[7]+1126891415&4294967295,C=v+(A<<10&4294967295|A>>>22),A=R+(v^(C|~w))+I[14]+2878612391&4294967295,R=C+(A<<15&4294967295|A>>>17),A=w+(C^(R|~v))+I[5]+4237533241&4294967295,w=R+(A<<21&4294967295|A>>>11),A=v+(R^(w|~C))+I[12]+1700485571&4294967295,v=w+(A<<6&4294967295|A>>>26),A=C+(w^(v|~R))+I[3]+2399980690&4294967295,C=v+(A<<10&4294967295|A>>>22),A=R+(v^(C|~w))+I[10]+4293915773&4294967295,R=C+(A<<15&4294967295|A>>>17),A=w+(C^(R|~v))+I[1]+2240044497&4294967295,w=R+(A<<21&4294967295|A>>>11),A=v+(R^(w|~C))+I[8]+1873313359&4294967295,v=w+(A<<6&4294967295|A>>>26),A=C+(w^(v|~R))+I[15]+4264355552&4294967295,C=v+(A<<10&4294967295|A>>>22),A=R+(v^(C|~w))+I[6]+2734768916&4294967295,R=C+(A<<15&4294967295|A>>>17),A=w+(C^(R|~v))+I[13]+1309151649&4294967295,w=R+(A<<21&4294967295|A>>>11),A=v+(R^(w|~C))+I[4]+4149444226&4294967295,v=w+(A<<6&4294967295|A>>>26),A=C+(w^(v|~R))+I[11]+3174756917&4294967295,C=v+(A<<10&4294967295|A>>>22),A=R+(v^(C|~w))+I[2]+718787259&4294967295,R=C+(A<<15&4294967295|A>>>17),A=w+(C^(R|~v))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(R+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+R&4294967295,T.g[3]=T.g[3]+C&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);const w=v-this.blockSize,I=this.C;let R=this.h,C=0;for(;C<v;){if(R==0)for(;C<=w;)s(this,T,C),C+=this.blockSize;if(typeof T=="string"){for(;C<v;)if(I[R++]=T.charCodeAt(C++),R==this.blockSize){s(this,I),R=0;break}}else for(;C<v;)if(I[R++]=T[C++],R==this.blockSize){s(this,I),R=0;break}}this.h=R,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var w=T.length-8;w<T.length;++w)T[w]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,w=0;w<4;++w)for(let I=0;I<32;I+=8)T[v++]=this.g[w]>>>I&255;return T};function i(T,v){var w=l;return Object.prototype.hasOwnProperty.call(w,T)?w[T]:w[T]=v(T)}function o(T,v){this.h=v;const w=[];let I=!0;for(let R=T.length-1;R>=0;R--){const C=T[R]|0;I&&C==v||(w[R]=C,I=!1)}this.g=w}var l={};function c(T){return-128<=T&&T<128?i(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return p;if(T<0)return k(d(-T));const v=[];let w=1;for(let I=0;T>=w;I++)v[I]=T/w|0,w*=4294967296;return new o(v,0)}function h(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return k(h(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const w=d(Math.pow(v,8));let I=p;for(let C=0;C<T.length;C+=8){var R=Math.min(8,T.length-C);const A=parseInt(T.substring(C,C+R),v);R<8?(R=d(Math.pow(v,R)),I=I.j(R).add(d(A))):(I=I.j(w),I=I.add(d(A)))}return I}var p=c(0),m=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(b(this))return-k(this).m();let T=0,v=1;for(let w=0;w<this.g.length;w++){const I=this.i(w);T+=(I>=0?I:4294967296+I)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(_(this))return"0";if(b(this))return"-"+k(this).toString(T);const v=d(Math.pow(T,6));var w=this;let I="";for(;;){const R=j(w,v).g;w=S(w,R.j(v));let C=((w.g.length>0?w.g[0]:w.h)>>>0).toString(T);if(w=R,_(w))return C+I;for(;C.length<6;)C="0"+C;I=C+I}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function _(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function b(T){return T.h==-1}t.l=function(T){return T=S(this,T),b(T)?-1:_(T)?0:1};function k(T){const v=T.g.length,w=[];for(let I=0;I<v;I++)w[I]=~T.g[I];return new o(w,~T.h).add(m)}t.abs=function(){return b(this)?k(this):this},t.add=function(T){const v=Math.max(this.g.length,T.g.length),w=[];let I=0;for(let R=0;R<=v;R++){let C=I+(this.i(R)&65535)+(T.i(R)&65535),A=(C>>>16)+(this.i(R)>>>16)+(T.i(R)>>>16);I=A>>>16,C&=65535,A&=65535,w[R]=A<<16|C}return new o(w,w[w.length-1]&-2147483648?-1:0)};function S(T,v){return T.add(k(v))}t.j=function(T){if(_(this)||_(T))return p;if(b(this))return b(T)?k(this).j(k(T)):k(k(this).j(T));if(b(T))return k(this.j(k(T)));if(this.l(x)<0&&T.l(x)<0)return d(this.m()*T.m());const v=this.g.length+T.g.length,w=[];for(var I=0;I<2*v;I++)w[I]=0;for(I=0;I<this.g.length;I++)for(let R=0;R<T.g.length;R++){const C=this.i(I)>>>16,A=this.i(I)&65535,ge=T.i(R)>>>16,zt=T.i(R)&65535;w[2*I+2*R]+=A*zt,E(w,2*I+2*R),w[2*I+2*R+1]+=C*zt,E(w,2*I+2*R+1),w[2*I+2*R+1]+=A*ge,E(w,2*I+2*R+1),w[2*I+2*R+2]+=C*ge,E(w,2*I+2*R+2)}for(T=0;T<v;T++)w[T]=w[2*T+1]<<16|w[2*T];for(T=v;T<2*v;T++)w[T]=0;return new o(w,0)};function E(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function N(T,v){this.g=T,this.h=v}function j(T,v){if(_(v))throw Error("division by zero");if(_(T))return new N(p,p);if(b(T))return v=j(k(T),v),new N(k(v.g),k(v.h));if(b(v))return v=j(T,k(v)),new N(k(v.g),v.h);if(T.g.length>30){if(b(T)||b(v))throw Error("slowDivide_ only works with positive integers.");for(var w=m,I=v;I.l(T)<=0;)w=F(w),I=F(I);var R=V(w,1),C=V(I,1);for(I=V(I,2),w=V(w,2);!_(I);){var A=C.add(I);A.l(T)<=0&&(R=R.add(w),C=A),I=V(I,1),w=V(w,1)}return v=S(T,R.j(v)),new N(R,v)}for(R=p;T.l(v)>=0;){for(w=Math.max(1,Math.floor(T.m()/v.m())),I=Math.ceil(Math.log(w)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),C=d(w),A=C.j(v);b(A)||A.l(T)>0;)w-=I,C=d(w),A=C.j(v);_(C)&&(C=m),R=R.add(C),T=S(T,A)}return new N(R,T)}t.B=function(T){return j(this,T).h},t.and=function(T){const v=Math.max(this.g.length,T.g.length),w=[];for(let I=0;I<v;I++)w[I]=this.i(I)&T.i(I);return new o(w,this.h&T.h)},t.or=function(T){const v=Math.max(this.g.length,T.g.length),w=[];for(let I=0;I<v;I++)w[I]=this.i(I)|T.i(I);return new o(w,this.h|T.h)},t.xor=function(T){const v=Math.max(this.g.length,T.g.length),w=[];for(let I=0;I<v;I++)w[I]=this.i(I)^T.i(I);return new o(w,this.h^T.h)};function F(T){const v=T.g.length+1,w=[];for(let I=0;I<v;I++)w[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(w,T.h)}function V(T,v){const w=v>>5;v%=32;const I=T.g.length-w,R=[];for(let C=0;C<I;C++)R[C]=v>0?T.i(C+w)>>>v|T.i(C+w+1)<<32-v:T.i(C+w);return new o(R,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,Zx=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,jr=o}).apply(typeof b0<"u"?b0:typeof self<"u"?self:typeof window<"u"?window:{});var Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var eE,Ao,tE,Gl,cf,nE,rE,sE;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Il=="object"&&Il];for(var f=0;f<a.length;++f){var g=a[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(a,f){if(f)e:{var g=r;a=a.split(".");for(var y=0;y<a.length-1;y++){var P=a[y];if(!(P in g))break e;g=g[P]}a=a[a.length-1],y=g[a],f=f(y),f!=y&&f!=null&&e(g,a,{configurable:!0,writable:!0,value:f})}}s("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(a){return a||function(f){var g=[],y;for(y in f)Object.prototype.hasOwnProperty.call(f,y)&&g.push([y,f[y]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(a){var f=typeof a;return f=="object"&&a!=null||f=="function"}function c(a,f,g){return a.call.apply(a.bind,arguments)}function d(a,f,g){return d=c,d.apply(null,arguments)}function h(a,f){var g=Array.prototype.slice.call(arguments,1);return function(){var y=g.slice();return y.push.apply(y,arguments),a.apply(this,y)}}function p(a,f){function g(){}g.prototype=f.prototype,a.Z=f.prototype,a.prototype=new g,a.prototype.constructor=a,a.Ob=function(y,P,D){for(var z=Array(arguments.length-2),te=2;te<arguments.length;te++)z[te-2]=arguments[te];return f.prototype[P].apply(y,z)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function x(a){const f=a.length;if(f>0){const g=Array(f);for(let y=0;y<f;y++)g[y]=a[y];return g}return[]}function _(a,f){for(let y=1;y<arguments.length;y++){const P=arguments[y];var g=typeof P;if(g=g!="object"?g:P?Array.isArray(P)?"array":g:"null",g=="array"||g=="object"&&typeof P.length=="number"){g=a.length||0;const D=P.length||0;a.length=g+D;for(let z=0;z<D;z++)a[g+z]=P[z]}else a.push(P)}}class b{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return this.h>0?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function k(a){o.setTimeout(()=>{throw a},0)}function S(){var a=T;let f=null;return a.g&&(f=a.g,a.g=a.g.next,a.g||(a.h=null),f.next=null),f}class E{constructor(){this.h=this.g=null}add(f,g){const y=N.get();y.set(f,g),this.h?this.h.next=y:this.g=y,this.h=y}}var N=new b(()=>new j,a=>a.reset());class j{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let F,V=!1,T=new E,v=()=>{const a=Promise.resolve(void 0);F=()=>{a.then(w)}};function w(){for(var a;a=S();){try{a.h.call(a.g)}catch(g){k(g)}var f=N;f.j(a),f.h<100&&(f.h++,a.next=f.g,f.g=a)}V=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function R(a,f){this.type=a,this.g=this.target=f,this.defaultPrevented=!1}R.prototype.h=function(){this.defaultPrevented=!0};var C=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,f=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const g=()=>{};o.addEventListener("test",g,f),o.removeEventListener("test",g,f)}catch{}return a}();function A(a){return/^[\s\xa0]*$/.test(a)}function ge(a,f){R.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,f)}p(ge,R),ge.prototype.init=function(a,f){const g=this.type=a.type,y=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=f,f=a.relatedTarget,f||(g=="mouseover"?f=a.fromElement:g=="mouseout"&&(f=a.toElement)),this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ge.Z.h.call(this)},ge.prototype.h=function(){ge.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var zt="closure_listenable_"+(Math.random()*1e6|0),rt=0;function Zn(a,f,g,y,P){this.listener=a,this.proxy=null,this.src=f,this.type=g,this.capture=!!y,this.ha=P,this.key=++rt,this.da=this.fa=!1}function $(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function G(a,f,g){for(const y in a)f.call(g,a[y],y,a)}function ee(a,f){for(const g in a)f.call(void 0,a[g],g,a)}function le(a){const f={};for(const g in a)f[g]=a[g];return f}const he="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Zt(a,f){let g,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(g in y)a[g]=y[g];for(let D=0;D<he.length;D++)g=he[D],Object.prototype.hasOwnProperty.call(y,g)&&(a[g]=y[g])}}function Je(a){this.src=a,this.g={},this.h=0}Je.prototype.add=function(a,f,g,y,P){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const z=en(a,f,y,P);return z>-1?(f=a[z],g||(f.fa=!1)):(f=new Zn(f,this.src,D,!!y,P),f.fa=g,a.push(f)),f};function pn(a,f){const g=f.type;if(g in a.g){var y=a.g[g],P=Array.prototype.indexOf.call(y,f,void 0),D;(D=P>=0)&&Array.prototype.splice.call(y,P,1),D&&($(f),a.g[g].length==0&&(delete a.g[g],a.h--))}}function en(a,f,g,y){for(let P=0;P<a.length;++P){const D=a[P];if(!D.da&&D.listener==f&&D.capture==!!g&&D.ha==y)return P}return-1}var er="closure_lm_"+(Math.random()*1e6|0),Xc={};function Xm(a,f,g,y,P){if(Array.isArray(f)){for(let D=0;D<f.length;D++)Xm(a,f[D],g,y,P);return null}return g=tg(g),a&&a[zt]?a.J(f,g,l(y)?!!y.capture:!1,P):vS(a,f,g,!1,y,P)}function vS(a,f,g,y,P,D){if(!f)throw Error("Invalid event type");const z=l(P)?!!P.capture:!!P;let te=ed(a);if(te||(a[er]=te=new Je(a)),g=te.add(f,g,y,z,D),g.proxy)return g;if(y=_S(),g.proxy=y,y.src=a,y.listener=g,a.addEventListener)C||(P=z),P===void 0&&(P=!1),a.addEventListener(f.toString(),y,P);else if(a.attachEvent)a.attachEvent(eg(f.toString()),y);else if(a.addListener&&a.removeListener)a.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return g}function _S(){function a(g){return f.call(a.src,a.listener,g)}const f=wS;return a}function Zm(a,f,g,y,P){if(Array.isArray(f))for(var D=0;D<f.length;D++)Zm(a,f[D],g,y,P);else y=l(y)?!!y.capture:!!y,g=tg(g),a&&a[zt]?(a=a.i,D=String(f).toString(),D in a.g&&(f=a.g[D],g=en(f,g,y,P),g>-1&&($(f[g]),Array.prototype.splice.call(f,g,1),f.length==0&&(delete a.g[D],a.h--)))):a&&(a=ed(a))&&(f=a.g[f.toString()],a=-1,f&&(a=en(f,g,y,P)),(g=a>-1?f[a]:null)&&Zc(g))}function Zc(a){if(typeof a!="number"&&a&&!a.da){var f=a.src;if(f&&f[zt])pn(f.i,a);else{var g=a.type,y=a.proxy;f.removeEventListener?f.removeEventListener(g,y,a.capture):f.detachEvent?f.detachEvent(eg(g),y):f.addListener&&f.removeListener&&f.removeListener(y),(g=ed(f))?(pn(g,a),g.h==0&&(g.src=null,f[er]=null)):$(a)}}}function eg(a){return a in Xc?Xc[a]:Xc[a]="on"+a}function wS(a,f){if(a.da)a=!0;else{f=new ge(f,this);const g=a.listener,y=a.ha||a.src;a.fa&&Zc(a),a=g.call(y,f)}return a}function ed(a){return a=a[er],a instanceof Je?a:null}var td="__closure_events_fn_"+(Math.random()*1e9>>>0);function tg(a){return typeof a=="function"?a:(a[td]||(a[td]=function(f){return a.handleEvent(f)}),a[td])}function st(){I.call(this),this.i=new Je(this),this.M=this,this.G=null}p(st,I),st.prototype[zt]=!0,st.prototype.removeEventListener=function(a,f,g,y){Zm(this,a,f,g,y)};function pt(a,f){var g,y=a.G;if(y)for(g=[];y;y=y.G)g.push(y);if(a=a.M,y=f.type||f,typeof f=="string")f=new R(f,a);else if(f instanceof R)f.target=f.target||a;else{var P=f;f=new R(y,a),Zt(f,P)}P=!0;let D,z;if(g)for(z=g.length-1;z>=0;z--)D=f.g=g[z],P=Ya(D,y,!0,f)&&P;if(D=f.g=a,P=Ya(D,y,!0,f)&&P,P=Ya(D,y,!1,f)&&P,g)for(z=0;z<g.length;z++)D=f.g=g[z],P=Ya(D,y,!1,f)&&P}st.prototype.N=function(){if(st.Z.N.call(this),this.i){var a=this.i;for(const f in a.g){const g=a.g[f];for(let y=0;y<g.length;y++)$(g[y]);delete a.g[f],a.h--}}this.G=null},st.prototype.J=function(a,f,g,y){return this.i.add(String(a),f,!1,g,y)},st.prototype.K=function(a,f,g,y){return this.i.add(String(a),f,!0,g,y)};function Ya(a,f,g,y){if(f=a.i.g[String(f)],!f)return!0;f=f.concat();let P=!0;for(let D=0;D<f.length;++D){const z=f[D];if(z&&!z.da&&z.capture==g){const te=z.listener,Be=z.ha||z.src;z.fa&&pn(a.i,z),P=te.call(Be,y)!==!1&&P}}return P&&!y.defaultPrevented}function xS(a,f){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=d(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(f)>2147483647?-1:o.setTimeout(a,f||0)}function ng(a){a.g=xS(()=>{a.g=null,a.i&&(a.i=!1,ng(a))},a.l);const f=a.h;a.h=null,a.m.apply(null,f)}class ES extends I{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:ng(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Qi(a){I.call(this),this.h=a,this.g={}}p(Qi,I);var rg=[];function sg(a){G(a.g,function(f,g){this.g.hasOwnProperty(g)&&Zc(f)},a),a.g={}}Qi.prototype.N=function(){Qi.Z.N.call(this),sg(this)},Qi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nd=o.JSON.stringify,TS=o.JSON.parse,SS=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function ig(){}function og(){}var Ji={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function rd(){R.call(this,"d")}p(rd,R);function sd(){R.call(this,"c")}p(sd,R);var ts={},ag=null;function Xa(){return ag=ag||new st}ts.Ia="serverreachability";function lg(a){R.call(this,ts.Ia,a)}p(lg,R);function Yi(a){const f=Xa();pt(f,new lg(f))}ts.STAT_EVENT="statevent";function ug(a,f){R.call(this,ts.STAT_EVENT,a),this.stat=f}p(ug,R);function mt(a){const f=Xa();pt(f,new ug(f,a))}ts.Ja="timingevent";function cg(a,f){R.call(this,ts.Ja,a),this.size=f}p(cg,R);function Xi(a,f){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},f)}function Zi(){this.g=!0}Zi.prototype.ua=function(){this.g=!1};function bS(a,f,g,y,P,D){a.info(function(){if(a.g)if(D){var z="",te=D.split("&");for(let fe=0;fe<te.length;fe++){var Be=te[fe].split("=");if(Be.length>1){const He=Be[0];Be=Be[1];const gn=He.split("_");z=gn.length>=2&&gn[1]=="type"?z+(He+"="+Be+"&"):z+(He+"=redacted&")}}}else z=null;else z=D;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+f+`
`+g+`
`+z})}function IS(a,f,g,y,P,D,z){a.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+f+`
`+g+`
`+D+" "+z})}function $s(a,f,g,y){a.info(function(){return"XMLHTTP TEXT ("+f+"): "+NS(a,g)+(y?" "+y:"")})}function kS(a,f){a.info(function(){return"TIMEOUT: "+f})}Zi.prototype.info=function(){};function NS(a,f){if(!a.g)return f;if(!f)return null;try{const D=JSON.parse(f);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var g=D[a];if(!(g.length<2)){var y=g[1];if(Array.isArray(y)&&!(y.length<1)){var P=y[0];if(P!="noop"&&P!="stop"&&P!="close")for(let z=1;z<y.length;z++)y[z]=""}}}}return nd(D)}catch{return f}}var Za={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},dg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hg;function id(){}p(id,ig),id.prototype.g=function(){return new XMLHttpRequest},hg=new id;function eo(a){return encodeURIComponent(String(a))}function AS(a){var f=1;a=a.split(":");const g=[];for(;f>0&&a.length;)g.push(a.shift()),f--;return a.length&&g.push(a.join(":")),g}function tr(a,f,g,y){this.j=a,this.i=f,this.l=g,this.S=y||1,this.V=new Qi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new fg}function fg(){this.i=null,this.g="",this.h=!1}var pg={},od={};function ad(a,f,g){a.M=1,a.A=tl(mn(f)),a.u=g,a.R=!0,mg(a,null)}function mg(a,f){a.F=Date.now(),el(a),a.B=mn(a.A);var g=a.B,y=a.S;Array.isArray(y)||(y=[String(y)]),Ng(g.i,"t",y),a.C=0,g=a.j.L,a.h=new fg,a.g=Wg(a.j,g?f:null,!a.u),a.P>0&&(a.O=new ES(d(a.Y,a,a.g),a.P)),f=a.V,g=a.g,y=a.ba;var P="readystatechange";Array.isArray(P)||(P&&(rg[0]=P.toString()),P=rg);for(let D=0;D<P.length;D++){const z=Xm(g,P[D],y||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=a.J?le(a.J):{},a.u?(a.v||(a.v="POST"),f["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,f)):(a.v="GET",a.g.ea(a.B,a.v,null,f)),Yi(),bS(a.i,a.v,a.B,a.l,a.S,a.u)}tr.prototype.ba=function(a){a=a.target;const f=this.O;f&&sr(a)==3?f.j():this.Y(a)},tr.prototype.Y=function(a){try{if(a==this.g)e:{const te=sr(this.g),Be=this.g.ya(),fe=this.g.ca();if(!(te<3)&&(te!=3||this.g&&(this.h.h||this.g.la()||Og(this.g)))){this.K||te!=4||Be==7||(Be==8||fe<=0?Yi(3):Yi(2)),ld(this);var f=this.g.ca();this.X=f;var g=RS(this);if(this.o=f==200,IS(this.i,this.v,this.B,this.l,this.S,te,f),this.o){if(this.U&&!this.L){t:{if(this.g){var y,P=this.g;if((y=P.g?P.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(y)){var D=y;break t}}D=null}if(a=D)$s(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,ud(this,a);else{this.o=!1,this.m=3,mt(12),ns(this),to(this);break e}}if(this.R){a=!0;let He;for(;!this.K&&this.C<g.length;)if(He=CS(this,g),He==od){te==4&&(this.m=4,mt(14),a=!1),$s(this.i,this.l,null,"[Incomplete Response]");break}else if(He==pg){this.m=4,mt(15),$s(this.i,this.l,g,"[Invalid Chunk]"),a=!1;break}else $s(this.i,this.l,He,null),ud(this,He);if(gg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),te!=4||g.length!=0||this.h.h||(this.m=1,mt(16),a=!1),this.o=this.o&&a,!a)$s(this.i,this.l,g,"[Invalid Chunked Response]"),ns(this),to(this);else if(g.length>0&&!this.W){this.W=!0;var z=this.j;z.g==this&&z.aa&&!z.P&&(z.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),yd(z),z.P=!0,mt(11))}}else $s(this.i,this.l,g,null),ud(this,g);te==4&&ns(this),this.o&&!this.K&&(te==4?zg(this.j,this):(this.o=!1,el(this)))}else HS(this.g),f==400&&g.indexOf("Unknown SID")>0?(this.m=3,mt(12)):(this.m=0,mt(13)),ns(this),to(this)}}}catch{}finally{}};function RS(a){if(!gg(a))return a.g.la();const f=Og(a.g);if(f==="")return"";let g="";const y=f.length,P=sr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return ns(a),to(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<y;D++)a.h.h=!0,g+=a.h.i.decode(f[D],{stream:!(P&&D==y-1)});return f.length=0,a.h.g+=g,a.C=0,a.h.g}function gg(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function CS(a,f){var g=a.C,y=f.indexOf(`
`,g);return y==-1?od:(g=Number(f.substring(g,y)),isNaN(g)?pg:(y+=1,y+g>f.length?od:(f=f.slice(y,y+g),a.C=y+g,f)))}tr.prototype.cancel=function(){this.K=!0,ns(this)};function el(a){a.T=Date.now()+a.H,yg(a,a.H)}function yg(a,f){if(a.D!=null)throw Error("WatchDog timer not null");a.D=Xi(d(a.aa,a),f)}function ld(a){a.D&&(o.clearTimeout(a.D),a.D=null)}tr.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(kS(this.i,this.B),this.M!=2&&(Yi(),mt(17)),ns(this),this.m=2,to(this)):yg(this,this.T-a)};function to(a){a.j.I==0||a.K||zg(a.j,a)}function ns(a){ld(a);var f=a.O;f&&typeof f.dispose=="function"&&f.dispose(),a.O=null,sg(a.V),a.g&&(f=a.g,a.g=null,f.abort(),f.dispose())}function ud(a,f){try{var g=a.j;if(g.I!=0&&(g.g==a||cd(g.h,a))){if(!a.L&&cd(g.h,a)&&g.I==3){try{var y=g.Ba.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<a.F)ol(g),sl(g);else break e;gd(g),mt(18)}}else g.xa=P[1],0<g.xa-g.K&&P[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Xi(d(g.Va,g),6e3));wg(g.h)<=1&&g.ta&&(g.ta=void 0)}else ss(g,11)}else if((a.L||g.g==a)&&ol(g),!A(f))for(P=g.Ba.g.parse(f),f=0;f<P.length;f++){let fe=P[f];const He=fe[0];if(!(He<=g.K))if(g.K=He,fe=fe[1],g.I==2)if(fe[0]=="c"){g.M=fe[1],g.ba=fe[2];const gn=fe[3];gn!=null&&(g.ka=gn,g.j.info("VER="+g.ka));const is=fe[4];is!=null&&(g.za=is,g.j.info("SVER="+g.za));const ir=fe[5];ir!=null&&typeof ir=="number"&&ir>0&&(y=1.5*ir,g.O=y,g.j.info("backChannelRequestTimeoutMs_="+y)),y=g;const or=a.g;if(or){const ll=or.g?or.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ll){var D=y.h;D.g||ll.indexOf("spdy")==-1&&ll.indexOf("quic")==-1&&ll.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(dd(D,D.h),D.h=null))}if(y.G){const vd=or.g?or.g.getResponseHeader("X-HTTP-Session-Id"):null;vd&&(y.wa=vd,ye(y.J,y.G,vd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-a.F,g.j.info("Handshake RTT: "+g.T+"ms")),y=g;var z=a;if(y.na=Hg(y,y.L?y.ba:null,y.W),z.L){xg(y.h,z);var te=z,Be=y.O;Be&&(te.H=Be),te.D&&(ld(te),el(te)),y.g=z}else Fg(y);g.i.length>0&&il(g)}else fe[0]!="stop"&&fe[0]!="close"||ss(g,7);else g.I==3&&(fe[0]=="stop"||fe[0]=="close"?fe[0]=="stop"?ss(g,7):md(g):fe[0]!="noop"&&g.l&&g.l.qa(fe),g.A=0)}}Yi(4)}catch{}}var PS=class{constructor(a,f){this.g=a,this.map=f}};function vg(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _g(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function wg(a){return a.h?1:a.g?a.g.size:0}function cd(a,f){return a.h?a.h==f:a.g?a.g.has(f):!1}function dd(a,f){a.g?a.g.add(f):a.h=f}function xg(a,f){a.h&&a.h==f?a.h=null:a.g&&a.g.has(f)&&a.g.delete(f)}vg.prototype.cancel=function(){if(this.i=Eg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Eg(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let f=a.i;for(const g of a.g.values())f=f.concat(g.G);return f}return x(a.i)}var Tg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jS(a,f){if(a){a=a.split("&");for(let g=0;g<a.length;g++){const y=a[g].indexOf("=");let P,D=null;y>=0?(P=a[g].substring(0,y),D=a[g].substring(y+1)):P=a[g],f(P,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function nr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let f;a instanceof nr?(this.l=a.l,no(this,a.j),this.o=a.o,this.g=a.g,ro(this,a.u),this.h=a.h,hd(this,Ag(a.i)),this.m=a.m):a&&(f=String(a).match(Tg))?(this.l=!1,no(this,f[1]||"",!0),this.o=so(f[2]||""),this.g=so(f[3]||"",!0),ro(this,f[4]),this.h=so(f[5]||"",!0),hd(this,f[6]||"",!0),this.m=so(f[7]||"")):(this.l=!1,this.i=new oo(null,this.l))}nr.prototype.toString=function(){const a=[];var f=this.j;f&&a.push(io(f,Sg,!0),":");var g=this.g;return(g||f=="file")&&(a.push("//"),(f=this.o)&&a.push(io(f,Sg,!0),"@"),a.push(eo(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&a.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&a.push("/"),a.push(io(g,g.charAt(0)=="/"?LS:OS,!0))),(g=this.i.toString())&&a.push("?",g),(g=this.m)&&a.push("#",io(g,MS)),a.join("")},nr.prototype.resolve=function(a){const f=mn(this);let g=!!a.j;g?no(f,a.j):g=!!a.o,g?f.o=a.o:g=!!a.g,g?f.g=a.g:g=a.u!=null;var y=a.h;if(g)ro(f,a.u);else if(g=!!a.h){if(y.charAt(0)!="/")if(this.g&&!this.h)y="/"+y;else{var P=f.h.lastIndexOf("/");P!=-1&&(y=f.h.slice(0,P+1)+y)}if(P=y,P==".."||P==".")y="";else if(P.indexOf("./")!=-1||P.indexOf("/.")!=-1){y=P.lastIndexOf("/",0)==0,P=P.split("/");const D=[];for(let z=0;z<P.length;){const te=P[z++];te=="."?y&&z==P.length&&D.push(""):te==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),y&&z==P.length&&D.push("")):(D.push(te),y=!0)}y=D.join("/")}else y=P}return g?f.h=y:g=a.i.toString()!=="",g?hd(f,Ag(a.i)):g=!!a.m,g&&(f.m=a.m),f};function mn(a){return new nr(a)}function no(a,f,g){a.j=g?so(f,!0):f,a.j&&(a.j=a.j.replace(/:$/,""))}function ro(a,f){if(f){if(f=Number(f),isNaN(f)||f<0)throw Error("Bad port number "+f);a.u=f}else a.u=null}function hd(a,f,g){f instanceof oo?(a.i=f,US(a.i,a.l)):(g||(f=io(f,VS)),a.i=new oo(f,a.l))}function ye(a,f,g){a.i.set(f,g)}function tl(a){return ye(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function so(a,f){return a?f?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function io(a,f,g){return typeof a=="string"?(a=encodeURI(a).replace(f,DS),g&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function DS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Sg=/[#\/\?@]/g,OS=/[#\?:]/g,LS=/[#\?]/g,VS=/[#\?@]/g,MS=/#/g;function oo(a,f){this.h=this.g=null,this.i=a||null,this.j=!!f}function rs(a){a.g||(a.g=new Map,a.h=0,a.i&&jS(a.i,function(f,g){a.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=oo.prototype,t.add=function(a,f){rs(this),this.i=null,a=qs(this,a);let g=this.g.get(a);return g||this.g.set(a,g=[]),g.push(f),this.h+=1,this};function bg(a,f){rs(a),f=qs(a,f),a.g.has(f)&&(a.i=null,a.h-=a.g.get(f).length,a.g.delete(f))}function Ig(a,f){return rs(a),f=qs(a,f),a.g.has(f)}t.forEach=function(a,f){rs(this),this.g.forEach(function(g,y){g.forEach(function(P){a.call(f,P,y,this)},this)},this)};function kg(a,f){rs(a);let g=[];if(typeof f=="string")Ig(a,f)&&(g=g.concat(a.g.get(qs(a,f))));else for(a=Array.from(a.g.values()),f=0;f<a.length;f++)g=g.concat(a[f]);return g}t.set=function(a,f){return rs(this),this.i=null,a=qs(this,a),Ig(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[f]),this.h+=1,this},t.get=function(a,f){return a?(a=kg(this,a),a.length>0?String(a[0]):f):f};function Ng(a,f,g){bg(a,f),g.length>0&&(a.i=null,a.g.set(qs(a,f),x(g)),a.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],f=Array.from(this.g.keys());for(let y=0;y<f.length;y++){var g=f[y];const P=eo(g);g=kg(this,g);for(let D=0;D<g.length;D++){let z=P;g[D]!==""&&(z+="="+eo(g[D])),a.push(z)}}return this.i=a.join("&")};function Ag(a){const f=new oo;return f.i=a.i,a.g&&(f.g=new Map(a.g),f.h=a.h),f}function qs(a,f){return f=String(f),a.j&&(f=f.toLowerCase()),f}function US(a,f){f&&!a.j&&(rs(a),a.i=null,a.g.forEach(function(g,y){const P=y.toLowerCase();y!=P&&(bg(this,y),Ng(this,P,g))},a)),a.j=f}function FS(a,f){const g=new Zi;if(o.Image){const y=new Image;y.onload=h(rr,g,"TestLoadImage: loaded",!0,f,y),y.onerror=h(rr,g,"TestLoadImage: error",!1,f,y),y.onabort=h(rr,g,"TestLoadImage: abort",!1,f,y),y.ontimeout=h(rr,g,"TestLoadImage: timeout",!1,f,y),o.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=a}else f(!1)}function BS(a,f){const g=new Zi,y=new AbortController,P=setTimeout(()=>{y.abort(),rr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(a,{signal:y.signal}).then(D=>{clearTimeout(P),D.ok?rr(g,"TestPingServer: ok",!0,f):rr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(P),rr(g,"TestPingServer: error",!1,f)})}function rr(a,f,g,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(g)}catch{}}function zS(){this.g=new SS}function fd(a){this.i=a.Sb||null,this.h=a.ab||!1}p(fd,ig),fd.prototype.g=function(){return new nl(this.i,this.h)};function nl(a,f){st.call(this),this.H=a,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(nl,st),t=nl.prototype,t.open=function(a,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=f,this.readyState=1,lo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const f={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(f.body=a),(this.H||o).fetch(new Request(this.D,f)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ao(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,lo(this)),this.g&&(this.readyState=3,lo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Rg(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function Rg(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var f=a.value?a.value:new Uint8Array(0);(f=this.B.decode(f,{stream:!a.done}))&&(this.response=this.responseText+=f)}a.done?ao(this):lo(this),this.readyState==3&&Rg(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,ao(this))},t.Na=function(a){this.g&&(this.response=a,ao(this))},t.ga=function(){this.g&&ao(this)};function ao(a){a.readyState=4,a.l=null,a.j=null,a.B=null,lo(a)}t.setRequestHeader=function(a,f){this.A.append(a,f)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,a.push(g[0]+": "+g[1]),g=f.next();return a.join(`\r
`)};function lo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(nl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Cg(a){let f="";return G(a,function(g,y){f+=y,f+=":",f+=g,f+=`\r
`}),f}function pd(a,f,g){e:{for(y in g){var y=!1;break e}y=!0}y||(g=Cg(g),typeof a=="string"?g!=null&&eo(g):ye(a,f,g))}function Ne(a){st.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Ne,st);var $S=/^https?$/i,qS=["POST","PUT"];t=Ne.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,f,g,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);f=f?f.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hg.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(f,String(a),!0),this.B=!1}catch(D){Pg(this,D);return}if(a=g||"",g=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)g.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(const D of y.keys())g.set(D,y.get(D));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(g.keys()).find(D=>D.toLowerCase()=="content-type"),P=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(qS,f,void 0)>=0)||y||P||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,z]of g)this.g.setRequestHeader(D,z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){Pg(this,D)}};function Pg(a,f){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=f,a.o=5,jg(a),rl(a)}function jg(a){a.A||(a.A=!0,pt(a,"complete"),pt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,pt(this,"complete"),pt(this,"abort"),rl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),rl(this,!0)),Ne.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Dg(this):this.Xa())},t.Xa=function(){Dg(this)};function Dg(a){if(a.h&&typeof i<"u"){if(a.v&&sr(a)==4)setTimeout(a.Ca.bind(a),0);else if(pt(a,"readystatechange"),sr(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var y;if(y=D===0){let z=String(a.D).match(Tg)[1]||null;!z&&o.self&&o.self.location&&(z=o.self.location.protocol.slice(0,-1)),y=!$S.test(z?z.toLowerCase():"")}g=y}if(g)pt(a,"complete"),pt(a,"success");else{a.o=6;try{var P=sr(a)>2?a.g.statusText:""}catch{P=""}a.l=P+" ["+a.ca()+"]",jg(a)}}finally{rl(a)}}}}function rl(a,f){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const g=a.g;a.g=null,f||pt(a,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function sr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return sr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var f=this.g.responseText;return a&&f.indexOf(a)==0&&(f=f.substring(a.length)),TS(f)}};function Og(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function HS(a){const f={};a=(a.g&&sr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<a.length;y++){if(A(a[y]))continue;var g=AS(a[y]);const P=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const D=f[P]||[];f[P]=D,D.push(g)}ee(f,function(y){return y.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function uo(a,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[a]||f}function Lg(a){this.za=0,this.i=[],this.j=new Zi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=uo("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=uo("baseRetryDelayMs",5e3,a),this.Za=uo("retryDelaySeedMs",1e4,a),this.Ta=uo("forwardChannelMaxRetries",2,a),this.va=uo("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new vg(a&&a.concurrentRequestLimit),this.Ba=new zS,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Lg.prototype,t.ka=8,t.I=1,t.connect=function(a,f,g,y){mt(0),this.W=a,this.H=f||{},g&&y!==void 0&&(this.H.OSID=g,this.H.OAID=y),this.F=this.X,this.J=Hg(this,null,this.W),il(this)};function md(a){if(Vg(a),a.I==3){var f=a.V++,g=mn(a.J);if(ye(g,"SID",a.M),ye(g,"RID",f),ye(g,"TYPE","terminate"),co(a,g),f=new tr(a,a.j,f),f.M=2,f.A=tl(mn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(f.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=f.A,g=!0),g||(f.g=Wg(f.j,null),f.g.ea(f.A)),f.F=Date.now(),el(f)}qg(a)}function sl(a){a.g&&(yd(a),a.g.cancel(),a.g=null)}function Vg(a){sl(a),a.v&&(o.clearTimeout(a.v),a.v=null),ol(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function il(a){if(!_g(a.h)&&!a.m){a.m=!0;var f=a.Ea;F||v(),V||(F(),V=!0),T.add(f,a),a.D=0}}function WS(a,f){return wg(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=f.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=Xi(d(a.Ea,a,f),$g(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const P=new tr(this,this.j,a);let D=this.o;if(this.U&&(D?(D=le(D),Zt(D,this.U)):D=this.U),this.u!==null||this.R||(P.J=D,D=null),this.S)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var y=this.i[g];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,f>4096){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=Ug(this,P,f),g=mn(this.J),ye(g,"RID",a),ye(g,"CVER",22),this.G&&ye(g,"X-HTTP-Session-Id",this.G),co(this,g),D&&(this.R?f="headers="+eo(Cg(D))+"&"+f:this.u&&pd(g,this.u,D)),dd(this.h,P),this.Ra&&ye(g,"TYPE","init"),this.S?(ye(g,"$req",f),ye(g,"SID","null"),P.U=!0,ad(P,g,null)):ad(P,g,f),this.I=2}}else this.I==3&&(a?Mg(this,a):this.i.length==0||_g(this.h)||Mg(this))};function Mg(a,f){var g;f?g=f.l:g=a.V++;const y=mn(a.J);ye(y,"SID",a.M),ye(y,"RID",g),ye(y,"AID",a.K),co(a,y),a.u&&a.o&&pd(y,a.u,a.o),g=new tr(a,a.j,g,a.D+1),a.u===null&&(g.J=a.o),f&&(a.i=f.G.concat(a.i)),f=Ug(a,g,1e3),g.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),dd(a.h,g),ad(g,y,f)}function co(a,f){a.H&&G(a.H,function(g,y){ye(f,y,g)}),a.l&&G({},function(g,y){ye(f,y,g)})}function Ug(a,f,g){g=Math.min(a.i.length,g);const y=a.l?d(a.l.Ka,a.l,a):null;e:{var P=a.i;let te=-1;for(;;){const Be=["count="+g];te==-1?g>0?(te=P[0].g,Be.push("ofs="+te)):te=0:Be.push("ofs="+te);let fe=!0;for(let He=0;He<g;He++){var D=P[He].g;const gn=P[He].map;if(D-=te,D<0)te=Math.max(0,P[He].g-100),fe=!1;else try{D="req"+D+"_"||"";try{var z=gn instanceof Map?gn:Object.entries(gn);for(const[is,ir]of z){let or=ir;l(ir)&&(or=nd(ir)),Be.push(D+is+"="+encodeURIComponent(or))}}catch(is){throw Be.push(D+"type="+encodeURIComponent("_badmap")),is}}catch{y&&y(gn)}}if(fe){z=Be.join("&");break e}}z=void 0}return a=a.i.splice(0,g),f.G=a,z}function Fg(a){if(!a.g&&!a.v){a.Y=1;var f=a.Da;F||v(),V||(F(),V=!0),T.add(f,a),a.A=0}}function gd(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=Xi(d(a.Da,a),$g(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Bg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=Xi(d(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,mt(10),sl(this),Bg(this))};function yd(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Bg(a){a.g=new tr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var f=mn(a.na);ye(f,"RID","rpc"),ye(f,"SID",a.M),ye(f,"AID",a.K),ye(f,"CI",a.F?"0":"1"),!a.F&&a.ia&&ye(f,"TO",a.ia),ye(f,"TYPE","xmlhttp"),co(a,f),a.u&&a.o&&pd(f,a.u,a.o),a.O&&(a.g.H=a.O);var g=a.g;a=a.ba,g.M=1,g.A=tl(mn(f)),g.u=null,g.R=!0,mg(g,a)}t.Va=function(){this.C!=null&&(this.C=null,sl(this),gd(this),mt(19))};function ol(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function zg(a,f){var g=null;if(a.g==f){ol(a),yd(a),a.g=null;var y=2}else if(cd(a.h,f))g=f.G,xg(a.h,f),y=1;else return;if(a.I!=0){if(f.o)if(y==1){g=f.u?f.u.length:0,f=Date.now()-f.F;var P=a.D;y=Xa(),pt(y,new cg(y,g)),il(a)}else Fg(a);else if(P=f.m,P==3||P==0&&f.X>0||!(y==1&&WS(a,f)||y==2&&gd(a)))switch(g&&g.length>0&&(f=a.h,f.i=f.i.concat(g)),P){case 1:ss(a,5);break;case 4:ss(a,10);break;case 3:ss(a,6);break;default:ss(a,2)}}}function $g(a,f){let g=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(g*=2),g*f}function ss(a,f){if(a.j.info("Error code "+f),f==2){var g=d(a.bb,a),y=a.Ua;const P=!y;y=new nr(y||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||no(y,"https"),tl(y),P?FS(y.toString(),g):BS(y.toString(),g)}else mt(2);a.I=0,a.l&&a.l.pa(f),qg(a),Vg(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),mt(2)):(this.j.info("Failed to ping google.com"),mt(1))};function qg(a){if(a.I=0,a.ja=[],a.l){const f=Eg(a.h);(f.length!=0||a.i.length!=0)&&(_(a.ja,f),_(a.ja,a.i),a.h.i.length=0,x(a.i),a.i.length=0),a.l.oa()}}function Hg(a,f,g){var y=g instanceof nr?mn(g):new nr(g);if(y.g!="")f&&(y.g=f+"."+y.g),ro(y,y.u);else{var P=o.location;y=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;const D=new nr(null);y&&no(D,y),f&&(D.g=f),P&&ro(D,P),g&&(D.h=g),y=D}return g=a.G,f=a.wa,g&&f&&ye(y,g,f),ye(y,"VER",a.ka),co(a,y),y}function Wg(a,f,g){if(f&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return f=a.Aa&&!a.ma?new Ne(new fd({ab:g})):new Ne(a.ma),f.Fa(a.L),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Kg(){}t=Kg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function al(){}al.prototype.g=function(a,f){return new Ct(a,f)};function Ct(a,f){st.call(this),this.g=new Lg(f),this.l=a,this.h=f&&f.messageUrlParams||null,a=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(a?a["X-WebChannel-Content-Type"]=f.messageContentType:a={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.sa&&(a?a["X-WebChannel-Client-Profile"]=f.sa:a={"X-WebChannel-Client-Profile":f.sa}),this.g.U=a,(a=f&&f.Qb)&&!A(a)&&(this.g.u=a),this.A=f&&f.supportsCrossDomainXhr||!1,this.v=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!A(f)&&(this.g.G=f,a=this.h,a!==null&&f in a&&(a=this.h,f in a&&delete a[f])),this.j=new Hs(this)}p(Ct,st),Ct.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ct.prototype.close=function(){md(this.g)},Ct.prototype.o=function(a){var f=this.g;if(typeof a=="string"){var g={};g.__data__=a,a=g}else this.v&&(g={},g.__data__=nd(a),a=g);f.i.push(new PS(f.Ya++,a)),f.I==3&&il(f)},Ct.prototype.N=function(){this.g.l=null,delete this.j,md(this.g),delete this.g,Ct.Z.N.call(this)};function Gg(a){rd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var f=a.__sm__;if(f){e:{for(const g in f){a=g;break e}a=void 0}(this.i=a)&&(a=this.i,f=f!==null&&a in f?f[a]:void 0),this.data=f}else this.data=a}p(Gg,rd);function Qg(){sd.call(this),this.status=1}p(Qg,sd);function Hs(a){this.g=a}p(Hs,Kg),Hs.prototype.ra=function(){pt(this.g,"a")},Hs.prototype.qa=function(a){pt(this.g,new Gg(a))},Hs.prototype.pa=function(a){pt(this.g,new Qg)},Hs.prototype.oa=function(){pt(this.g,"b")},al.prototype.createWebChannel=al.prototype.g,Ct.prototype.send=Ct.prototype.o,Ct.prototype.open=Ct.prototype.m,Ct.prototype.close=Ct.prototype.close,sE=function(){return new al},rE=function(){return Xa()},nE=ts,cf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,Gl=Za,dg.COMPLETE="complete",tE=dg,og.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",st.prototype.listen=st.prototype.J,Ao=og,Ne.prototype.listenOnce=Ne.prototype.K,Ne.prototype.getLastError=Ne.prototype.Ha,Ne.prototype.getLastErrorCode=Ne.prototype.ya,Ne.prototype.getStatus=Ne.prototype.ca,Ne.prototype.getResponseJson=Ne.prototype.La,Ne.prototype.getResponseText=Ne.prototype.la,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Fa,eE=Ne}).apply(typeof Il<"u"?Il:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};lt.UNAUTHENTICATED=new lt(null),lt.GOOGLE_CREDENTIALS=new lt("google-credentials-uid"),lt.FIRST_PARTY=new lt("first-party-uid"),lt.MOCK_USER=new lt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $i="12.8.0";function nR(t){$i=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Vp("@firebase/firestore");function Ks(){return Ns.logLevel}function H(t,...e){if(Ns.logLevel<=se.DEBUG){const n=e.map(Fp);Ns.debug(`Firestore (${$i}): ${t}`,...n)}}function Gn(t,...e){if(Ns.logLevel<=se.ERROR){const n=e.map(Fp);Ns.error(`Firestore (${$i}): ${t}`,...n)}}function Ni(t,...e){if(Ns.logLevel<=se.WARN){const n=e.map(Fp);Ns.warn(`Firestore (${$i}): ${t}`,...n)}}function Fp(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,iE(t,r,n)}function iE(t,e,n){let r=`FIRESTORE (${$i}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Gn(r),new Error(r)}function ce(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||iE(e,s,r)}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Dn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class rR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(lt.UNAUTHENTICATED))}shutdown(){}}class sR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class iR{constructor(e){this.t=e,this.currentUser=lt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new In;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new In,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new In)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string",31837,{l:r}),new oE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string",2055,{h:e}),new lt(e)}}class oR{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=lt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class aR{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new oR(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(lt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class I0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class lR{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,jt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){ce(this.o===void 0,3512);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new I0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new I0(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=uR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function ie(t,e){return t<e?-1:t>e?1:0}function df(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Yd(s)===Yd(i)?ie(s,i):Yd(s)?1:-1}return ie(t.length,e.length)}const cR=55296,dR=57343;function Yd(t){const e=t.charCodeAt(0);return e>=cR&&e<=dR}function Ai(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k0="__name__";class wn{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&J(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return wn.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof wn?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=wn.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return ie(e.length,n.length)}static compareSegments(e,n){const r=wn.isNumericId(e),s=wn.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?wn.extractNumericId(e).compare(wn.extractNumericId(n)):df(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return jr.fromString(e.substring(4,e.length-2))}}class pe extends wn{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const hR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends wn{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return hR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k0}static keyField(){return new Ze([k0])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new q(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new q(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(pe.fromString(e))}static fromName(e){return new K(pe.fromString(e).popFirst(5))}static empty(){return new K(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t,e,n){if(!n)throw new q(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function fR(t,e,n,r){if(e===!0&&r===!0)throw new q(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function N0(t){if(!K.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function A0(t){if(K.isDocumentKey(t))throw new q(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function lE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function vc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J(12329,{type:typeof t})}function Yt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=vc(t);throw new q(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(t,e){const n={typeString:t};return e&&(n.value=e),n}function Oa(t,e){if(!lE(t))throw new q(M.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new q(M.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0=-62135596800,C0=1e6;class _e{static now(){return _e.fromMillis(Date.now())}static fromDate(e){return _e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*C0);return new _e(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<R0)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/C0}_compareTo(e){return this.seconds===e.seconds?ie(this.nanoseconds,e.nanoseconds):ie(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:_e._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Oa(e,_e._jsonSchema))return new _e(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-R0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}_e._jsonSchemaVersion="firestore/timestamp/1.0",_e._jsonSchema={type:Ue("string",_e._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z{static fromTimestamp(e){return new Z(e)}static min(){return new Z(new _e(0,0))}static max(){return new Z(new _e(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ga=-1;function pR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Z.fromTimestamp(r===1e9?new _e(n+1,0):new _e(n,r));return new Mr(s,K.empty(),e)}function mR(t){return new Mr(t.readTime,t.key,ga)}class Mr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Mr(Z.min(),K.empty(),ga)}static max(){return new Mr(Z.max(),K.empty(),ga)}}function gR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ie(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class vR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==yR)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function _R(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Hi(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _c{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}_c.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp=-1;function wc(t){return t==null}function ju(t){return t===0&&1/t==-1/0}function wR(t){return typeof t=="number"&&Number.isInteger(t)&&!ju(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uE="";function xR(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=P0(e)),e=ER(t.get(n),e);return P0(e)}function ER(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case uE:n+="";break;default:n+=i}}return n}function P0(t){return t+uE+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function TR(t,e){const n=[];for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(e(t[r],r,t));return n}function cE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ke{constructor(e,n){this.comparator=e,this.root=n||Xe.EMPTY}insert(e,n){return new ke(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kl(this.root,e,this.comparator,!0)}}class kl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xe.RED,this.left=s??Xe.EMPTY,this.right=i??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw J(43730,{key:this.key,value:this.value});if(this.right.isRed())throw J(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw J(27949);return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw J(57766)}get value(){throw J(16141)}get color(){throw J(16727)}get left(){throw J(29726)}get right(){throw J(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qe{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new D0(this.data.getIterator())}getIteratorFrom(e){return new D0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof qe)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new qe(this.comparator);return n.data=e,n}}class D0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Ot([])}unionWith(e){let n=new qe(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ot(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ai(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new dE("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ie(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const SR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ur(t){if(ce(!!t,39018),typeof t=="string"){let e=0;const n=SR.exec(t);if(ce(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Pe(t.seconds),nanos:Pe(t.nanos)}}function Pe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Fr(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="server_timestamp",fE="__type__",pE="__previous_value__",mE="__local_write_time__";function $p(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[fE])==null?void 0:r.stringValue)===hE}function xc(t){const e=t.mapValue.fields[pE];return $p(e)?xc(e):e}function ya(t){const e=Ur(t.mapValue.fields[mE].timestampValue);return new _e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,r,s,i,o,l,c,d,h,p){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=p}}const Du="(default)";class va{constructor(e,n){this.projectId=e,this.database=n||Du}static empty(){return new va("","")}get isDefaultDatabase(){return this.database===Du}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}function IR(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new q(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE="__type__",kR="__max__",Nl={mapValue:{}},yE="__vector__",Ou="value";function Br(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?$p(t)?4:AR(t)?9007199254740991:NR(t)?10:11:J(28295,{value:t})}function jn(t,e){if(t===e)return!0;const n=Br(t);if(n!==Br(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ya(t).isEqual(ya(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Ur(s.timestampValue),l=Ur(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Fr(s.bytesValue).isEqual(Fr(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Pe(s.geoPointValue.latitude)===Pe(i.geoPointValue.latitude)&&Pe(s.geoPointValue.longitude)===Pe(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Pe(s.integerValue)===Pe(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Pe(s.doubleValue),l=Pe(i.doubleValue);return o===l?ju(o)===ju(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Ai(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(j0(o)!==j0(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!jn(o[c],l[c])))return!1;return!0}(t,e);default:return J(52216,{left:t})}}function _a(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function Ri(t,e){if(t===e)return 0;const n=Br(t),r=Br(e);if(n!==r)return ie(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ie(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Pe(i.integerValue||i.doubleValue),c=Pe(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return O0(t.timestampValue,e.timestampValue);case 4:return O0(ya(t),ya(e));case 5:return df(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Fr(i),c=Fr(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=ie(l[d],c[d]);if(h!==0)return h}return ie(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ie(Pe(i.latitude),Pe(o.latitude));return l!==0?l:ie(Pe(i.longitude),Pe(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return L0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,x,_,b;const l=i.fields||{},c=o.fields||{},d=(m=l[Ou])==null?void 0:m.arrayValue,h=(x=c[Ou])==null?void 0:x.arrayValue,p=ie(((_=d==null?void 0:d.values)==null?void 0:_.length)||0,((b=h==null?void 0:h.values)==null?void 0:b.length)||0);return p!==0?p:L0(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Nl.mapValue&&o===Nl.mapValue)return 0;if(i===Nl.mapValue)return 1;if(o===Nl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let p=0;p<c.length&&p<h.length;++p){const m=df(c[p],h[p]);if(m!==0)return m;const x=Ri(l[c[p]],d[h[p]]);if(x!==0)return x}return ie(c.length,h.length)}(t.mapValue,e.mapValue);default:throw J(23264,{he:n})}}function O0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ie(t,e);const n=Ur(t),r=Ur(e),s=ie(n.seconds,r.seconds);return s!==0?s:ie(n.nanos,r.nanos)}function L0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ri(n[s],r[s]);if(i)return i}return ie(n.length,r.length)}function Ci(t){return hf(t)}function hf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ur(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Fr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=hf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${hf(n.fields[o])}`;return s+"}"}(t.mapValue):J(61005,{value:t})}function Ql(t){switch(Br(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=xc(t);return e?16+Ql(e):16;case 5:return 2*t.stringValue.length;case 6:return Fr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Ql(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Jr(r.fields,(i,o)=>{s+=i.length+Ql(o)}),s}(t.mapValue);default:throw J(13486,{value:t})}}function V0(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function ff(t){return!!t&&"integerValue"in t}function qp(t){return!!t&&"arrayValue"in t}function M0(t){return!!t&&"nullValue"in t}function U0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Jl(t){return!!t&&"mapValue"in t}function NR(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[gE])==null?void 0:r.stringValue)===yE}function $o(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=$o(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=$o(t.arrayValue.values[n]);return e}return{...t}}function AR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===kR}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.value=e}static empty(){return new vt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Jl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=$o(n)}setAll(e){let n=Ze.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=$o(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Jl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Jl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Jr(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new vt($o(this.value))}}function vE(t){const e=[];return Jr(t.fields,(n,r)=>{const s=new Ze([n]);if(Jl(r)){const i=vE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ct(e,0,Z.min(),Z.min(),Z.min(),vt.empty(),0)}static newFoundDocument(e,n,r,s){return new ct(e,1,n,Z.min(),r,s,0)}static newNoDocument(e,n){return new ct(e,2,n,Z.min(),Z.min(),vt.empty(),0)}static newUnknownDocument(e,n){return new ct(e,3,n,Z.min(),Z.min(),vt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=vt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=vt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e,n){this.position=e,this.inclusive=n}}function F0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=Ri(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function B0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function RR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _E=class{};class Me extends _E{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new PR(e,n,r):n==="array-contains"?new OR(e,r):n==="in"?new LR(e,r):n==="not-in"?new VR(e,r):n==="array-contains-any"?new MR(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new jR(e,r):new DR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ri(n,this.value)):n!==null&&Br(this.value)===Br(n)&&this.matchesComparison(Ri(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dn extends _E{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new dn(e,n)}matches(e){return wE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wE(t){return t.op==="and"}function xE(t){return CR(t)&&wE(t)}function CR(t){for(const e of t.filters)if(e instanceof dn)return!1;return!0}function pf(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Ci(t.value);if(xE(t))return t.filters.map(e=>pf(e)).join(",");{const e=t.filters.map(n=>pf(n)).join(",");return`${t.op}(${e})`}}function EE(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&jn(r.value,s.value)}(t,e):t instanceof dn?function(r,s){return s instanceof dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&EE(o,s.filters[l]),!0):!1}(t,e):void J(19439)}function TE(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${Ci(n.value)}`}(t):t instanceof dn?function(n){return n.op.toString()+" {"+n.getFilters().map(TE).join(" ,")+"}"}(t):"Filter"}class PR extends Me{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class jR extends Me{constructor(e,n){super(e,"in",n),this.keys=SE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class DR extends Me{constructor(e,n){super(e,"not-in",n),this.keys=SE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function SE(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class OR extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return qp(n)&&_a(n.arrayValue,this.value)}}class LR extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_a(this.value.arrayValue,n)}}class VR extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!_a(this.value.arrayValue,n)}}class MR extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!qp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_a(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UR{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function z0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new UR(t,e,n,r,s,i,o)}function Hp(t){const e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),wc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ci(r)).join(",")),e.Te=n}return e.Te}function Wp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!RR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!EE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!B0(t.startAt,e.startAt)&&B0(t.endAt,e.endAt)}function mf(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function FR(t,e,n,r,s,i,o,l){return new Wi(t,e,n,r,s,i,o,l)}function Kp(t){return new Wi(t)}function $0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function BR(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function bE(t){return t.collectionGroup!==null}function qo(t){const e=X(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new qe(Ze.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new wa(i,r))}),n.has(Ze.keyField().canonicalString())||e.Ie.push(new wa(Ze.keyField(),r))}return e.Ie}function kn(t){const e=X(t);return e.Ee||(e.Ee=IE(e,qo(t))),e.Ee}function zR(t){const e=X(t);return e.Re||(e.Re=IE(e,t.explicitOrderBy)),e.Re}function IE(t,e){if(t.limitType==="F")return z0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new wa(s.field,i)});const n=t.endAt?new Lu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Lu(t.startAt.position,t.startAt.inclusive):null;return z0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gf(t,e){const n=t.filters.concat([e]);return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function $R(t,e){const n=t.explicitOrderBy.concat([e]);return new Wi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}function Vu(t,e,n){return new Wi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ec(t,e){return Wp(kn(t),kn(e))&&t.limitType===e.limitType}function kE(t){return`${Hp(kn(t))}|lt:${t.limitType}`}function Gs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>TE(s)).join(", ")}]`),wc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ci(s)).join(",")),`Target(${r})`}(kn(t))}; limitType=${t.limitType})`}function Tc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of qo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=F0(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,qo(r),s)||r.endAt&&!function(o,l,c){const d=F0(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,qo(r),s))}(t,e)}function qR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function NE(t){return(e,n)=>{let r=!1;for(const s of qo(t)){const i=HR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function HR(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Ri(c,d):J(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return cE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WR=new ke(K.comparator);function Qn(){return WR}const AE=new ke(K.comparator);function Ro(...t){let e=AE;for(const n of t)e=e.insert(n.key,n);return e}function RE(t){let e=AE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hs(){return Ho()}function CE(){return Ho()}function Ho(){return new Ms(t=>t.toString(),(t,e)=>t.isEqual(e))}const KR=new ke(K.comparator),GR=new qe(K.comparator);function oe(...t){let e=GR;for(const n of t)e=e.add(n);return e}const QR=new qe(ie);function JR(){return QR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ju(e)?"-0":e}}function PE(t){return{integerValue:""+t}}function jE(t,e){return wR(e)?PE(e):Gp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){this._=void 0}}function YR(t,e,n){return t instanceof Mu?function(s,i){const o={fields:{[fE]:{stringValue:hE},[mE]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&$p(i)&&(i=xc(i)),i&&(o.fields[pE]=i),{mapValue:o}}(n,e):t instanceof xa?OE(t,e):t instanceof Ea?LE(t,e):function(s,i){const o=DE(s,i),l=q0(o)+q0(s.Ae);return ff(o)&&ff(s.Ae)?PE(l):Gp(s.serializer,l)}(t,e)}function XR(t,e,n){return t instanceof xa?OE(t,e):t instanceof Ea?LE(t,e):n}function DE(t,e){return t instanceof Ta?function(r){return ff(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Mu extends Sc{}class xa extends Sc{constructor(e){super(),this.elements=e}}function OE(t,e){const n=VE(e);for(const r of t.elements)n.some(s=>jn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ea extends Sc{constructor(e){super(),this.elements=e}}function LE(t,e){let n=VE(e);for(const r of t.elements)n=n.filter(s=>!jn(s,r));return{arrayValue:{values:n}}}class Ta extends Sc{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function q0(t){return Pe(t.integerValue||t.doubleValue)}function VE(t){return qp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n){this.field=e,this.transform=n}}function eC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof xa&&s instanceof xa||r instanceof Ea&&s instanceof Ea?Ai(r.elements,s.elements,jn):r instanceof Ta&&s instanceof Ta?jn(r.Ae,s.Ae):r instanceof Mu&&s instanceof Mu}(t.transform,e.transform)}class tC{constructor(e,n){this.version=e,this.transformResults=n}}class Gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Gt}static exists(e){return new Gt(void 0,e)}static updateTime(e){return new Gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bc{}function ME(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Qp(t.key,Gt.none()):new La(t.key,t.data,Gt.none());{const n=t.data,r=vt.empty();let s=new qe(Ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Yr(t.key,r,new Ot(s.toArray()),Gt.none())}}function nC(t,e,n){t instanceof La?function(s,i,o){const l=s.value.clone(),c=W0(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Yr?function(s,i,o){if(!Yl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=W0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(UE(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Wo(t,e,n,r){return t instanceof La?function(i,o,l,c){if(!Yl(i.precondition,o))return l;const d=i.value.clone(),h=K0(i.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yr?function(i,o,l,c){if(!Yl(i.precondition,o))return l;const d=K0(i.fieldTransforms,c,o),h=o.data;return h.setAll(UE(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Yl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function rC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=DE(r.transform,s||null);i!=null&&(n===null&&(n=vt.empty()),n.set(r.field,i))}return n||null}function H0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ai(r,s,(i,o)=>eC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class La extends bc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends bc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function UE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function W0(t,e,n){const r=new Map;ce(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,XR(o,l,n[s]))}return r}function K0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,YR(i,o,e))}return r}class Qp extends bc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class sC extends bc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&nC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=ME(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Z.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),oe())}isEqual(e){return this.batchId===e.batchId&&Ai(this.mutations,e.mutations,(n,r)=>H0(n,r))&&Ai(this.baseMutations,e.baseMutations,(n,r)=>H0(n,r))}}class Jp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return KR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Jp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n,r){this.alias=e,this.aggregateType=n,this.fieldPath=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,ae;function uC(t){switch(t){case M.OK:return J(64938);case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0;default:return J(15467,{code:t})}}function FE(t){if(t===void 0)return Gn("GRPC error has no .code"),M.UNKNOWN;switch(t){case Le.OK:return M.OK;case Le.CANCELLED:return M.CANCELLED;case Le.UNKNOWN:return M.UNKNOWN;case Le.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Le.INTERNAL:return M.INTERNAL;case Le.UNAVAILABLE:return M.UNAVAILABLE;case Le.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Le.NOT_FOUND:return M.NOT_FOUND;case Le.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Le.ABORTED:return M.ABORTED;case Le.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Le.DATA_LOSS:return M.DATA_LOSS;default:return J(39323,{code:t})}}(ae=Le||(Le={}))[ae.OK=0]="OK",ae[ae.CANCELLED=1]="CANCELLED",ae[ae.UNKNOWN=2]="UNKNOWN",ae[ae.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ae[ae.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ae[ae.NOT_FOUND=5]="NOT_FOUND",ae[ae.ALREADY_EXISTS=6]="ALREADY_EXISTS",ae[ae.PERMISSION_DENIED=7]="PERMISSION_DENIED",ae[ae.UNAUTHENTICATED=16]="UNAUTHENTICATED",ae[ae.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ae[ae.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ae[ae.ABORTED=10]="ABORTED",ae[ae.OUT_OF_RANGE=11]="OUT_OF_RANGE",ae[ae.UNIMPLEMENTED=12]="UNIMPLEMENTED",ae[ae.INTERNAL=13]="INTERNAL",ae[ae.UNAVAILABLE=14]="UNAVAILABLE",ae[ae.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=new jr([4294967295,4294967295],0);function G0(t){const e=cC().encode(t),n=new Zx;return n.update(e),new Uint8Array(n.digest())}function Q0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new jr([n,r],0),new jr([s,i],0)]}class Yp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Co(`Invalid padding: ${n}`);if(r<0)throw new Co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Co(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Co(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=jr.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(jr.fromNumber(r)));return s.compare(dC)===1&&(s=new jr([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=G0(e),[r,s]=Q0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Yp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=G0(e),[r,s]=Q0(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Co extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Va.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ic(Z.min(),s,new ke(ie),Qn(),oe())}}class Va{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Va(r,n,oe(),oe(),oe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xl{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class BE{constructor(e,n){this.targetId=e,this.Ce=n}}class zE{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class J0{constructor(){this.ve=0,this.Fe=Y0(),this.Me=nt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=oe(),n=oe(),r=oe();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J(38017,{changeType:i})}}),new Va(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Y0()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,ce(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class hC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Qn(),this.He=Al(),this.Je=Al(),this.Ze=new ke(ie)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:J(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(mf(i))if(r===0){const o=new K(i.path);this.et(n,o,ct.newNoDocument(o,Z.min()))}else ce(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Fr(r).toUint8Array()}catch(c){if(c instanceof dE)return Ni("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new Yp(o,s,i)}catch(c){return Ni(c instanceof Co?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&mf(l.target)){const c=new K(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,ct.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=oe();this.Je.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Ic(e,n,this.Ze,this.je,r);return this.je=Qn(),this.He=Al(),this.Je=Al(),this.Ze=new ke(ie),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new J0,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new qe(ie),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new qe(ie),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new J0),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Al(){return new ke(K.comparator)}function Y0(){return new ke(K.comparator)}const fC={asc:"ASCENDING",desc:"DESCENDING"},pC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mC={and:"AND",or:"OR"};class gC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yf(t,e){return t.useProto3Json||wc(e)?e:{value:e}}function Uu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $E(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function yC(t,e){return Uu(t,e.toTimestamp())}function Nn(t){return ce(!!t,49232),Z.fromTimestamp(function(n){const r=Ur(n);return new _e(r.seconds,r.nanos)}(t))}function Xp(t,e){return vf(t,e).canonicalString()}function vf(t,e){const n=function(s){return new pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function qE(t){const e=pe.fromString(t);return ce(JE(e),10190,{key:e.toString()}),e}function _f(t,e){return Xp(t.databaseId,e.path)}function Xd(t,e){const n=qE(e);if(n.get(1)!==t.databaseId.projectId)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(WE(n))}function HE(t,e){return Xp(t.databaseId,e)}function vC(t){const e=qE(t);return e.length===4?pe.emptyPath():WE(e)}function wf(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WE(t){return ce(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function X0(t,e,n){return{name:_f(t,e),fields:n.value.mapValue.fields}}function _C(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:J(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(ce(h===void 0||typeof h=="string",58123),nt.fromBase64String(h||"")):(ce(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),nt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?M.UNKNOWN:FE(d.code);return new q(h,d.message||"")}(o);n=new zE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Xd(t,r.document.name),i=Nn(r.document.updateTime),o=r.document.createTime?Nn(r.document.createTime):Z.min(),l=new vt({mapValue:{fields:r.document.fields}}),c=ct.newFoundDocument(s,i,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Xl(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Xd(t,r.document),i=r.readTime?Nn(r.readTime):Z.min(),o=ct.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Xl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Xd(t,r.document),i=r.removedTargetIds||[];n=new Xl([],i,s,null)}else{if(!("filter"in e))return J(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new lC(s,i),l=r.targetId;n=new BE(l,o)}}return n}function wC(t,e){let n;if(e instanceof La)n={update:X0(t,e.key,e.value)};else if(e instanceof Qp)n={delete:_f(t,e.key)};else if(e instanceof Yr)n={update:X0(t,e.key,e.data),updateMask:AC(e.fieldMask)};else{if(!(e instanceof sC))return J(16599,{dt:e.type});n={verify:_f(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Mu)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof xa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ea)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ta)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw J(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:yC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J(27497)}(t,e.precondition)),n}function xC(t,e){return t&&t.length>0?(ce(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Nn(s.updateTime):Nn(i);return o.isEqual(Z.min())&&(o=Nn(i)),new tC(o,s.transformResults||[])}(n,e))):[]}function EC(t,e){return{documents:[HE(t,e.path)]}}function KE(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HE(t,s);const i=function(d){if(d.length!==0)return QE(dn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:fr(m.field),direction:IC(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=yf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function TC(t,e,n,r){const{ft:s,parent:i}=KE(t,e),o={},l=[];let c=0;return n.forEach(d=>{const h="aggregate_"+c++;o[h]=d.alias,d.aggregateType==="count"?l.push({alias:h,count:{}}):d.aggregateType==="avg"?l.push({alias:h,avg:{field:fr(d.fieldPath)}}):d.aggregateType==="sum"&&l.push({alias:h,sum:{field:fr(d.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:l,structuredQuery:s.structuredQuery},parent:s.parent},gt:o,parent:i}}function SC(t){let e=vC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(p){const m=GE(p);return m instanceof dn&&xE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(_){return new wa(Qs(_.field),function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,wc(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,x=p.values||[];return new Lu(x,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,x=p.values||[];return new Lu(x,m)}(n.endAt)),FR(e,s,o,i,l,"F",c,d)}function bC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function GE(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Qs(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Qs(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Qs(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Qs(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return J(61313);default:return J(60726)}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Qs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return J(58110);default:return J(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return dn.create(n.compositeFilter.filters.map(r=>GE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J(1026)}}(n.compositeFilter.op))}(t):J(30097,{filter:t})}function IC(t){return fC[t]}function kC(t){return pC[t]}function NC(t){return mC[t]}function fr(t){return{fieldPath:t.canonicalString()}}function Qs(t){return Ze.fromServerFormat(t.fieldPath)}function QE(t){return t instanceof Me?function(n){if(n.op==="=="){if(U0(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NAN"}};if(M0(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(U0(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NOT_NAN"}};if(M0(n.value))return{unaryFilter:{field:fr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fr(n.field),op:kC(n.op),value:n.value}}}(t):t instanceof dn?function(n){const r=n.getFilters().map(s=>QE(s));return r.length===1?r[0]:{compositeFilter:{op:NC(n.op),filters:r}}}(t):J(54877,{filter:t})}function AC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function YE(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e,n,r,s,i=Z.min(),o=Z.min(),l=nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Er(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Er(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e){this.yt=e}}function CC(t){const e=SC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Vu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PC{constructor(){this.Sn=new jC}addToCollectionParentIndex(e,n){return this.Sn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Mr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Mr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class jC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new qe(pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new qe(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},XE=41943040;class Et{static withCacheSize(e){return new Et(e,Et.DEFAULT_COLLECTION_PERCENTILE,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Et.DEFAULT_COLLECTION_PERCENTILE=10,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Et.DEFAULT=new Et(XE,Et.DEFAULT_COLLECTION_PERCENTILE,Et.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Et.DISABLED=new Et(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new Pi(0)}static ar(){return new Pi(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ev="LruGarbageCollector",DC=1048576;function tv([t,e],[n,r]){const s=ie(t,n);return s===0?ie(e,r):s}class OC{constructor(e){this.Pr=e,this.buffer=new qe(tv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();tv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class LC{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(ev,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Hi(n)?H(ev,"Ignoring IndexedDB error during garbage collection: ",n):await qi(n)}await this.Ar(3e5)})}}class VC{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(_c.ce);const r=new OC(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Z0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z0):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(e,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(d=Date.now(),Ks()<=se.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function MC(t,e){return new VC(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UC{constructor(){this.changes=new Ms(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Wo(r.mutation,s,Ot.empty(),_e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,oe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=oe()){const s=hs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ro();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,oe()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Qn();const o=Ho(),l=function(){return Ho()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Yr)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Wo(h.mutation,d,h.mutation.getFieldMask(),_e.now())):o.set(d.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>l.set(d,new FC(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=Ho();let s=new ke((o,l)=>o-l),i=oe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||Ot.empty();h=l.applyToLocalView(d,h),r.set(c,h);const p=(s.get(l.batchId)||oe()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,p=CE();h.forEach(m=>{if(!i.has(m)){const x=ME(n.get(m),r.get(m));x!==null&&p.set(m,x),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return BR(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):bE(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(hs());let l=ga,c=i;return o.next(d=>U.forEach(d,(h,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,oe())).next(h=>({batchId:l,changes:RE(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=Ro();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ro();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,c=>{const d=function(p,m){return new Wi(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,ct.newInvalidDocument(h)))});let l=Ro();return o.forEach((c,d)=>{const h=i.get(c);h!==void 0&&Wo(h.mutation,d,Ot.empty(),_e.now()),Tc(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return U.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Nn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:CC(s.bundledQuery),readTime:Nn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $C{constructor(){this.overlays=new ke(K.comparator),this.Lr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=hs(),i=n.length+1,o=new K(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new ke((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=hs(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=hs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return U.resolve(l)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new oC(n,r));let i=this.Lr.get(n);i===void 0&&(i=oe(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(){this.kr=new qe(Ke.Kr),this.qr=new qe(Ke.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Ke(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new Ke(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new K(new pe([])),r=new Ke(n,e),s=new Ke(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new K(new pe([])),r=new Ke(n,e),s=new Ke(n,e+1);let i=oe();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ke(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ke{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return K.comparator(e.key,n.key)||ie(e.Hr,n.Hr)}static Ur(e,n){return ie(e.Hr,n.Hr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new qe(Ke.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new iC(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Jr=this.Jr.add(new Ke(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?zp:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ke(n,0),s=new Ke(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const l=this.Zr(o.Hr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new qe(ie);return n.forEach(s=>{const i=new Ke(s,0),o=new Ke(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],l=>{r=r.add(l.Hr)})}),U.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new Ke(new K(i),0);let l=new qe(ie);return this.Jr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Hr)),!0)},o),U.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return U.forEach(n.mutations,s=>{const i=new Ke(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new Ke(n,0),s=this.Jr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WC{constructor(e){this.ti=e,this.docs=function(){return new ke(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ct.newInvalidDocument(n))}getEntries(e,n){let r=Qn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ct.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Qn();const o=n.path,l=new K(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||gR(mR(h),r)<=0||(s.has(h.key)||Tc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J(9500)}ni(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new KC(this)}getSize(e){return U.resolve(this.size)}}class KC extends UC{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GC{constructor(e){this.persistence=e,this.ri=new Ms(n=>Hp(n),Wp),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.ii=0,this.si=new Zp,this.targetCount=0,this.oi=Pi._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),U.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new Pi(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.lr(n),U.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,n){this._i={},this.overlays={},this.ai=new _c(0),this.ui=!1,this.ui=!0,this.ci=new qC,this.referenceDelegate=e(this),this.li=new GC(this),this.indexManager=new PC,this.remoteDocumentCache=function(s){return new WC(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new RC(n),this.Pi=new zC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $C,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new HC(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new QC(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return U.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class QC extends vR{constructor(e){super(),this.currentSequenceNumber=e}}class em{constructor(e){this.persistence=e,this.Ri=new Zp,this.Ai=null}static Vi(e){return new em(e)}get di(){if(this.Ai)return this.Ai;throw J(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,r=>{const s=K.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,Z.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Fu{constructor(e,n){this.persistence=e,this.fi=new Ms(r=>xR(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=MC(this,n)}static Vi(e,n){return new Fu(e,n)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return U.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,i.removeEntry(o,Z.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),U.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ql(e.data.value)),n}wr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=oe(),s=oe();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new tm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YC{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return LN()?8:_R(ft())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new JC;return this.ys(e,n,o).next(l=>{if(i.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(Ks()<=se.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Gs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(Ks()<=se.DEBUG&&H("QueryEngine","Query:",Gs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(Ks()<=se.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Gs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,kn(n))):U.resolve())}gs(e,n){if($0(n))return U.resolve(null);let r=kn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Vu(n,null,"F"),r=kn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=oe(...i);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,l);return this.Ss(n,d,o,c.readTime)?this.gs(e,Vu(n,null,"F")):this.Ds(e,d,n,c)}))})))}ps(e,n,r,s){return $0(n)||s.isEqual(Z.min())?U.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?U.resolve(null):(Ks()<=se.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Gs(n)),this.Ds(e,o,n,pR(s,ga)).next(l=>l))})}bs(e,n){let r=new qe(NE(e));return n.forEach((s,i)=>{Tc(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return Ks()<=se.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Gs(n)),this.fs.getDocumentsMatchingQuery(e,n,Mr.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nm="LocalStore",XC=3e8;class ZC{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new ke(ie),this.Fs=new Ms(i=>Hp(i),Wp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new BC(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function e2(t,e,n,r){return new ZC(t,e,n,r)}async function eT(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=oe();for(const d of s){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:l}))})})}function t2(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const p=d.batch,m=p.keys();let x=U.resolve();return m.forEach(_=>{x=x.next(()=>h.getEntry(c,_)).next(b=>{const k=d.docVersions.get(_);ce(k!==null,48541),b.version.compareTo(k)<0&&(p.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),h.addEntry(b)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=oe();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function tT(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function n2(t,e){const n=X(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const l=[];e.targetChanges.forEach((h,p)=>{const m=s.get(p);if(!m)return;l.push(n.li.removeMatchingKeys(i,h.removedDocuments,p).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,p)));let x=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(nt.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(h.resumeToken,r)),s=s.insert(p,x),function(b,k,S){return b.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=XC?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(m,x,h)&&l.push(n.li.updateTargetData(i,x))});let c=Qn(),d=oe();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(r2(i,o,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!r.isEqual(Z.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next(p=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.vs=s,i))}function r2(t,e,n){let r=oe(),s=oe();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Qn();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):H(nm,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Bs:o,Ls:s}})}function s2(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=zp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function i2(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Er(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function xf(t,e,n){const r=X(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Hi(o))throw o;H(nm,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function nv(t,e,n){const r=X(t);let s=Z.min(),i=oe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const p=X(c),m=p.Fs.get(h);return m!==void 0?U.resolve(p.vs.get(m)):p.li.getTargetData(d,h)}(r,o,kn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:Z.min(),n?i:oe())).next(l=>(o2(r,qR(e),l),{documents:l,ks:i})))}function o2(t,e,n){let r=t.Ms.get(e)||Z.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class rv{constructor(){this.activeTargetIds=JR()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class a2{constructor(){this.vo=new rv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new rv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv="ConnectivityMonitor";class iv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(sv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(sv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl=null;function Ef(){return Rl===null?Rl=function(){return 268435456+Math.round(2147483648*Math.random())}():Rl++,"0x"+Rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="RestConnection",u2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class c2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===Du?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=Ef(),l=this.Qo(e,n.toUriEncodedString());H(Zd,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:d}=new URL(l),h=Qr(d);return this.zo(e,l,c,r,h).then(p=>(H(Zd,`Received RPC '${e}' ${o}: `,p),p),p=>{throw Ni(Zd,`RPC '${e}' ${o} failed with error: `,p,"url: ",l,"request:",r),p})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$i}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=u2[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection",wo=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class mi extends c2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!mi.c_){const e=rE();wo(e,nE.STAT_EVENT,n=>{n.stat===cf.PROXY?H(at,"STAT_EVENT: detected buffering proxy"):n.stat===cf.NOPROXY&&H(at,"STAT_EVENT: detected no buffering proxy")}),mi.c_=!0}}zo(e,n,r,s,i){const o=Ef();return new Promise((l,c)=>{const d=new eE;d.setWithCredentials(!0),d.listenOnce(tE.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Gl.NO_ERROR:const p=d.getResponseJson();H(at,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),l(p);break;case Gl.TIMEOUT:H(at,`RPC '${e}' ${o} timed out`),c(new q(M.DEADLINE_EXCEEDED,"Request time out"));break;case Gl.HTTP_ERROR:const m=d.getStatus();if(H(at,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let x=d.getResponseJson();Array.isArray(x)&&(x=x[0]);const _=x==null?void 0:x.error;if(_&&_.status&&_.message){const b=function(S){const E=S.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(E)>=0?E:M.UNKNOWN}(_.status);c(new q(b,_.message))}else c(new q(M.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new q(M.UNAVAILABLE,"Connection failed."));break;default:J(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{H(at,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);H(at,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=Ef(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const d=i.join("");H(at,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=o.createWebChannel(d,l);this.I_(h);let p=!1,m=!1;const x=new d2({Ho:_=>{m?H(at,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(p||(H(at,`Opening RPC '${e}' stream ${s} transport.`),h.open(),p=!0),H(at,`RPC '${e}' stream ${s} sending:`,_),h.send(_))},Jo:()=>h.close()});return wo(h,Ao.EventType.OPEN,()=>{m||(H(at,`RPC '${e}' stream ${s} transport opened.`),x.i_())}),wo(h,Ao.EventType.CLOSE,()=>{m||(m=!0,H(at,`RPC '${e}' stream ${s} transport closed`),x.o_(),this.E_(h))}),wo(h,Ao.EventType.ERROR,_=>{m||(m=!0,Ni(at,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),x.o_(new q(M.UNAVAILABLE,"The operation could not be completed")))}),wo(h,Ao.EventType.MESSAGE,_=>{var b;if(!m){const k=_.data[0];ce(!!k,16349);const S=k,E=(S==null?void 0:S.error)||((b=S[0])==null?void 0:b.error);if(E){H(at,`RPC '${e}' stream ${s} received error:`,E);const N=E.status;let j=function(T){const v=Le[T];if(v!==void 0)return FE(v)}(N),F=E.message;j===void 0&&(j=M.INTERNAL,F="Unknown error status: "+N+" with message "+E.message),m=!0,x.o_(new q(j,F)),h.close()}else H(at,`RPC '${e}' stream ${s} received:`,k),x.__(k)}}),mi.u_(),setTimeout(()=>{x.s_()},0),x}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return sE()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h2(t){return new mi(t)}function eh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){return new gC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mi.c_=!1;class nT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ov="PersistentStream";class rT{constructor(e,n,r,s,i,o,l,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new nT(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new q(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(ov,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(ov,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class f2 extends rT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=_C(this.serializer,e),r=function(i){if(!("targetChange"in i))return Z.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?Nn(o.readTime):Z.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=wf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=mf(c)?{documents:EC(i,c)}:{query:KE(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=$E(i,o.resumeToken);const d=yf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Z.min())>0){l.readTime=Uu(i,o.snapshotVersion.toTimestamp());const d=yf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=bC(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=wf(this.serializer),n.removeTarget=e,this.K_(n)}}class p2 extends rT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return ce(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){ce(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=xC(e.writeResults,e.commitTime),r=Nn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=wf(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>wC(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{}class g2 extends m2{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,vf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(M.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,vf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(M.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function y2(t,e,n,r){return new g2(t,e,n,r)}class v2{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Gn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As="RemoteStore";class _2{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{Us(this)&&(H(As,"Restarting streams for network reachability change."),await async function(c){const d=X(c);d.Ea.add(4),await Ma(d),d.Va.set("Unknown"),d.Ea.delete(4),await Nc(d)}(this))})}),this.Va=new v2(r,s)}}async function Nc(t){if(Us(t))for(const e of t.Ra)await e(!0)}async function Ma(t){for(const e of t.Ra)await e(!1)}function sT(t,e){const n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),om(n)?im(n):Ki(n).O_()&&sm(n,e))}function rm(t,e){const n=X(t),r=Ki(n);n.Ia.delete(e),r.O_()&&iT(n,e),n.Ia.size===0&&(r.O_()?r.L_():Us(n)&&n.Va.set("Unknown"))}function sm(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ki(t).Z_(e)}function iT(t,e){t.da.$e(e),Ki(t).X_(e)}function im(t){t.da=new hC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ki(t).start(),t.Va.ua()}function om(t){return Us(t)&&!Ki(t).x_()&&t.Ia.size>0}function Us(t){return X(t).Ea.size===0}function oT(t){t.da=void 0}async function w2(t){t.Va.set("Online")}async function x2(t){t.Ia.forEach((e,n)=>{sm(t,e)})}async function E2(t,e){oT(t),om(t)?(t.Va.ha(e),im(t)):t.Va.set("Unknown")}async function T2(t,e,n){if(t.Va.set("Online"),e instanceof zE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(r){H(As,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bu(t,r)}else if(e instanceof Xl?t.da.Xe(e):e instanceof BE?t.da.st(e):t.da.tt(e),!n.isEqual(Z.min()))try{const r=await tT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.da.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(nt.EMPTY_BYTE_STRING,h.snapshotVersion)),iT(i,c);const p=new Er(h.target,c,d,h.sequenceNumber);sm(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(As,"Failed to raise snapshot:",r),await Bu(t,r)}}async function Bu(t,e,n){if(!Hi(e))throw e;t.Ea.add(1),await Ma(t),t.Va.set("Offline"),n||(n=()=>tT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(As,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Nc(t)})}function aT(t,e){return e().catch(n=>Bu(t,n,e))}async function Ac(t){const e=X(t),n=zr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:zp;for(;S2(e);)try{const s=await s2(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,b2(e,s)}catch(s){await Bu(e,s)}lT(e)&&uT(e)}function S2(t){return Us(t)&&t.Ta.length<10}function b2(t,e){t.Ta.push(e);const n=zr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function lT(t){return Us(t)&&!zr(t).x_()&&t.Ta.length>0}function uT(t){zr(t).start()}async function I2(t){zr(t).ra()}async function k2(t){const e=zr(t);for(const n of t.Ta)e.ea(n.mutations)}async function N2(t,e,n){const r=t.Ta.shift(),s=Jp.from(r,e,n);await aT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ac(t)}async function A2(t,e){e&&zr(t).Y_&&await async function(r,s){if(function(o){return uC(o)&&o!==M.ABORTED}(s.code)){const i=r.Ta.shift();zr(r).B_(),await aT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ac(r)}}(t,e),lT(t)&&uT(t)}async function av(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),H(As,"RemoteStore received new credentials");const r=Us(n);n.Ea.add(3),await Ma(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nc(n)}async function R2(t,e){const n=X(t);e?(n.Ea.delete(2),await Nc(n)):e||(n.Ea.add(2),await Ma(n),n.Va.set("Unknown"))}function Ki(t){return t.ma||(t.ma=function(n,r,s){const i=X(n);return i.sa(),new f2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:w2.bind(null,t),Yo:x2.bind(null,t),t_:E2.bind(null,t),J_:T2.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),om(t)?im(t):t.Va.set("Unknown")):(await t.ma.stop(),oT(t))})),t.ma}function zr(t){return t.fa||(t.fa=function(n,r,s){const i=X(n);return i.sa(),new p2(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:I2.bind(null,t),t_:A2.bind(null,t),ta:k2.bind(null,t),na:N2.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Ac(t)):(await t.fa.stop(),t.Ta.length>0&&(H(As,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new In,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new am(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lm(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),Hi(t))return new q(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gi{static emptySet(e){return new gi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Ro(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof gi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new gi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(){this.ga=new ke(K.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):J(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class ji{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new ji(e,n,gi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ec(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C2{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class P2{constructor(){this.queries=uv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=uv(),i.forEach((o,l)=>{for(const c of l.ba)c.onError(r)})})(this,new q(M.ABORTED,"Firestore shutting down"))}}function uv(){return new Ms(t=>kE(t),Ec)}async function cT(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new C2,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=lm(o,`Initialization of query '${Gs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&um(n)}async function dT(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function j2(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.ba)l.Fa(s)&&(r=!0);o.wa=s}}r&&um(n)}function D2(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function um(t){t.Ca.forEach(e=>{e.next()})}var Tf,cv;(cv=Tf||(Tf={})).Ma="default",cv.Cache="cache";class hT{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new ji(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ji.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Tf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e){this.key=e}}class pT{constructor(e){this.key=e}}class O2{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=oe(),this.mutatedKeys=oe(),this.eu=NE(e),this.tu=new gi(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new lv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,p)=>{const m=s.get(h),x=Tc(this.query,p)?p:null,_=!!m&&this.mutatedKeys.has(m.key),b=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let k=!1;m&&x?m.data.isEqual(x.data)?_!==b&&(r.track({type:3,doc:x}),k=!0):this.su(m,x)||(r.track({type:2,doc:x}),k=!0,(c&&this.eu(x,c)>0||d&&this.eu(x,d)<0)&&(l=!0)):!m&&x?(r.track({type:0,doc:x}),k=!0):m&&!x&&(r.track({type:1,doc:m}),k=!0,(c||d)&&(l=!0)),k&&(x?(o=o.add(x),i=b?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,p)=>function(x,_){const b=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J(20277,{Vt:k})}};return b(x)-b(_)}(h.type,p.type)||this.eu(h.doc,p.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,d=c!==this.Xa;return this.Xa=c,o.length!==0||d?{snapshot:new ji(this.query,e.tu,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=oe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new pT(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new fT(r))}),n}cu(e){this.Za=e.ks,this.Ya=oe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ji.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const cm="SyncEngine";class L2{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class V2{constructor(e){this.key=e,this.hu=!1}}class M2{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Ms(l=>kE(l),Ec),this.Iu=new Map,this.Eu=new Set,this.Ru=new ke(K.comparator),this.Au=new Map,this.Vu=new Zp,this.du={},this.mu=new Map,this.fu=Pi.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function U2(t,e,n=!0){const r=wT(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await mT(r,e,n,!0),s}async function F2(t,e){const n=wT(t);await mT(n,e,!0,!1)}async function mT(t,e,n,r){const s=await i2(t.localStore,kn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await B2(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&sT(t.remoteStore,s),l}async function B2(t,e,n,r,s){t.pu=(p,m,x)=>async function(b,k,S,E){let N=k.view.ru(S);N.Ss&&(N=await nv(b.localStore,k.query,!1).then(({documents:T})=>k.view.ru(T,N)));const j=E&&E.targetChanges.get(k.targetId),F=E&&E.targetMismatches.get(k.targetId)!=null,V=k.view.applyChanges(N,b.isPrimaryClient,j,F);return hv(b,k.targetId,V.au),V.snapshot}(t,p,m,x);const i=await nv(t.localStore,e,!0),o=new O2(e,i.ks),l=o.ru(i.documents),c=Va.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);hv(t,n,d.au);const h=new L2(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function z2(t,e,n){const r=X(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Ec(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await xf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&rm(r.remoteStore,s.targetId),Sf(r,s.targetId)}).catch(qi)):(Sf(r,s.targetId),await xf(r.localStore,s.targetId,!0))}async function $2(t,e){const n=X(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),rm(n.remoteStore,r.targetId))}async function q2(t,e,n){const r=Y2(t);try{const s=await function(o,l){const c=X(o),d=_e.now(),h=l.reduce((x,_)=>x.add(_.key),oe());let p,m;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let _=Qn(),b=oe();return c.xs.getEntries(x,h).next(k=>{_=k,_.forEach((S,E)=>{E.isValidDocument()||(b=b.add(S))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,_)).next(k=>{p=k;const S=[];for(const E of l){const N=rC(E,p.get(E.key).overlayedDocument);N!=null&&S.push(new Yr(E.key,N,vE(N.value.mapValue),Gt.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,S,l)}).next(k=>{m=k;const S=k.applyToLocalDocumentSet(p,b);return c.documentOverlayCache.saveOverlays(x,k.batchId,S)})}).then(()=>({batchId:m.batchId,changes:RE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.du[o.currentUser.toKey()];d||(d=new ke(ie)),d=d.insert(l,c),o.du[o.currentUser.toKey()]=d}(r,s.batchId,n),await Ua(r,s.changes),await Ac(r.remoteStore)}catch(s){const i=lm(s,"Failed to persist write");n.reject(i)}}async function gT(t,e){const n=X(t);try{const r=await n2(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?ce(o.hu,14607):s.removedDocuments.size>0&&(ce(o.hu,42227),o.hu=!1))}),await Ua(n,r,e)}catch(r){await qi(r)}}function dv(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=X(o);c.onlineState=l;let d=!1;c.queries.forEach((h,p)=>{for(const m of p.ba)m.va(l)&&(d=!0)}),d&&um(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function H2(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new ke(K.comparator);o=o.insert(i,ct.newNoDocument(i,Z.min()));const l=oe().add(i),c=new Ic(Z.min(),new Map,new ke(ie),o,l);await gT(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),dm(r)}else await xf(r.localStore,e,!1).then(()=>Sf(r,e,n)).catch(qi)}async function W2(t,e){const n=X(t),r=e.batch.batchId;try{const s=await t2(n.localStore,e);vT(n,r,null),yT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ua(n,s)}catch(s){await qi(s)}}async function K2(t,e,n){const r=X(t);try{const s=await function(o,l){const c=X(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(p=>(ce(p!==null,37113),h=p.keys(),c.mutationQueue.removeMutationBatch(d,p))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);vT(r,e,n),yT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ua(r,s)}catch(s){await qi(s)}}function yT(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function vT(t,e,n){const r=X(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function Sf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||_T(t,r)})}function _T(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(rm(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),dm(t))}function hv(t,e,n){for(const r of n)r instanceof fT?(t.Vu.addReference(r.key,e),G2(t,r)):r instanceof pT?(H(cm,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||_T(t,r.key)):J(19791,{wu:r})}function G2(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(cm,"New document in limbo: "+n),t.Eu.add(r),dm(t))}function dm(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new K(pe.fromString(e)),r=t.fu.next();t.Au.set(r,new V2(n)),t.Ru=t.Ru.insert(n,r),sT(t.remoteStore,new Er(kn(Kp(n.path)),r,"TargetPurposeLimboResolution",_c.ce))}}async function Ua(t,e,n){const r=X(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(d){s.push(d);const p=tm.Es(c.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(c,d){const h=X(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(d,m=>U.forEach(m.Ts,x=>h.persistence.referenceDelegate.addReference(p,m.targetId,x)).next(()=>U.forEach(m.Is,x=>h.persistence.referenceDelegate.removeReference(p,m.targetId,x)))))}catch(p){if(!Hi(p))throw p;H(nm,"Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const x=h.vs.get(m),_=x.snapshotVersion,b=x.withLastLimboFreeSnapshotVersion(_);h.vs=h.vs.insert(m,b)}}}(r.localStore,i))}async function Q2(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){H(cm,"User change. New user:",e.toKey());const r=await eT(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new q(M.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ua(n,r.Ns)}}function J2(t,e){const n=X(t),r=n.Au.get(e);if(r&&r.hu)return oe().add(r.key);{let s=oe();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function wT(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=gT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=H2.bind(null,e),e.Pu.J_=j2.bind(null,e.eventManager),e.Pu.yu=D2.bind(null,e.eventManager),e}function Y2(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=W2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=K2.bind(null,e),e}class zu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=kc(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return e2(this.persistence,new YC,e.initialUser,this.serializer)}Cu(e){return new ZE(em.Vi,this.serializer)}Du(e){return new a2}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zu.provider={build:()=>new zu};class X2 extends zu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){ce(this.persistence.referenceDelegate instanceof Fu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new LC(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Et.withCacheSize(this.cacheSizeBytes):Et.DEFAULT;return new ZE(r=>Fu.Vi(r,n),this.serializer)}}class bf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>dv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Q2.bind(null,this.syncEngine),await R2(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new P2}()}createDatastore(e){const n=kc(e.databaseInfo.databaseId),r=h2(e.databaseInfo);return y2(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new _2(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>dv(this.syncEngine,n,0),function(){return iv.v()?new iv:new l2}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,h){const p=new M2(s,i,o,l,c,d);return h&&(p.gu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);H(As,"RemoteStore shutting down."),i.Ea.add(5),await Ma(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}bf.provider={build:()=>new bf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r="FirestoreClient";class Z2{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=lt.UNAUTHENTICATED,this.clientId=Bp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H($r,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H($r,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new In;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=lm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function th(t,e){t.asyncQueue.verifyOperationInProgress(),H($r,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await eT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function fv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await eP(t);H($r,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>av(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>av(e.remoteStore,s)),t._onlineComponents=e}async function eP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H($r,"Using user provided OfflineComponentProvider");try{await th(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ni("Error using user provided cache. Falling back to memory cache: "+n),await th(t,new zu)}}else H($r,"Using default OfflineComponentProvider"),await th(t,new X2(void 0));return t._offlineComponents}async function hm(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H($r,"Using user provided OnlineComponentProvider"),await fv(t,t._uninitializedComponentsProvider._online)):(H($r,"Using default OnlineComponentProvider"),await fv(t,new bf))),t._onlineComponents}function tP(t){return hm(t).then(e=>e.syncEngine)}function nP(t){return hm(t).then(e=>e.datastore)}async function ET(t){const e=await hm(t),n=e.eventManager;return n.onListen=U2.bind(null,e.syncEngine),n.onUnlisten=z2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=F2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=$2.bind(null,e.syncEngine),n}function rP(t,e,n={}){const r=new In;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const h=new xT({next:m=>{h.Nu(),o.enqueueAndForget(()=>dT(i,p));const x=m.docs.has(l);!x&&m.fromCache?d.reject(new q(M.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&m.fromCache&&c&&c.source==="server"?d.reject(new q(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new hT(Kp(l.path),h,{includeMetadataChanges:!0,Ka:!0});return cT(i,p)}(await ET(t),t.asyncQueue,e,n,r)),r.promise}function sP(t,e,n={}){const r=new In;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const h=new xT({next:m=>{h.Nu(),o.enqueueAndForget(()=>dT(i,p)),m.fromCache&&c.source==="server"?d.reject(new q(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new hT(l,h,{includeMetadataChanges:!0,Ka:!0});return cT(i,p)}(await ET(t),t.asyncQueue,e,n,r)),r.promise}function iP(t,e,n){const r=new In;return t.asyncQueue.enqueueAndForget(async()=>{try{const s=await nP(t);r.resolve(async function(o,l,c){var b;const d=X(o),{request:h,gt:p,parent:m}=TC(d.serializer,zR(l),c);d.connection.Ko||delete h.parent;const x=(await d.jo("RunAggregationQuery",d.serializer.databaseId,m,h,1)).filter(k=>!!k.result);ce(x.length===1,64727);const _=(b=x[0].result)==null?void 0:b.aggregateFields;return Object.keys(_).reduce((k,S)=>(k[p[S]]=_[S],k),{})}(s,e,n))}catch(s){r.reject(s)}}),r.promise}function oP(t,e){const n=new In;return t.asyncQueue.enqueueAndForget(async()=>q2(await tP(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP="ComponentProvider",pv=new Map;function lP(t,e,n,r,s){return new bR(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,TT(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firestore.googleapis.com",mv=!0;class gv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new q(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ST,this.ssl=mv}else this.host=e.host,this.ssl=e.ssl??mv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=XE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<DC)throw new q(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}fR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=TT(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new q(M.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Rc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new gv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new gv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new rR;switch(r.type){case"firstParty":return new aR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=pv.get(n);r&&(H(aP,"Removing Datastore"),pv.delete(n),r.terminate())}(this),Promise.resolve()}}function uP(t,e,n,r={}){var d;t=Yt(t,Rc);const s=Qr(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(Op(`https://${l}`),Lp("Firestore",!0)),i.host!==ST&&i.host!==l&&Ni("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!Is(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,p;if(typeof r.mockUserToken=="string")h=r.mockUserToken,p=lt.MOCK_USER;else{h=Kx(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new q(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new lt(m)}t._authCredentials=new sR(new oE(h,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Xr(this.firestore,e,this._query)}}class De{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Dr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new De(this.firestore,e,this._key)}toJSON(){return{type:De._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Oa(n,De._jsonSchema))return new De(e,r||null,new K(pe.fromString(n.referencePath)))}}De._jsonSchemaVersion="firestore/documentReference/1.0",De._jsonSchema={type:Ue("string",De._jsonSchemaVersion),referencePath:Ue("string")};class Dr extends Xr{constructor(e,n,r){super(e,n,Kp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new De(this.firestore,null,new K(e))}withConverter(e){return new Dr(this.firestore,e,this._path)}}function Mt(t,e,...n){if(t=Ie(t),aE("collection","path",e),t instanceof Rc){const r=pe.fromString(e,...n);return A0(r),new Dr(t,null,r)}{if(!(t instanceof De||t instanceof Dr))throw new q(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return A0(r),new Dr(t.firestore,null,r)}}function Xt(t,e,...n){if(t=Ie(t),arguments.length===1&&(e=Bp.newId()),aE("doc","path",e),t instanceof Rc){const r=pe.fromString(e,...n);return N0(r),new De(t,null,new K(r))}{if(!(t instanceof De||t instanceof Dr))throw new q(M.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return N0(r),new De(t.firestore,t instanceof Dr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv="AsyncQueue";class vv{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new nT(this,"async_queue_retry"),this._c=()=>{const r=eh();r&&H(yv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=eh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=eh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new In;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!Hi(e))throw e;H(yv,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Gn("INTERNAL UNHANDLED ERROR: ",_v(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=am.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&J(47125,{Pc:_v(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function _v(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Zr extends Rc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new vv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new vv(e),this._firestoreClient=void 0,await e}}}function cP(t,e){const n=typeof t=="object"?t:Up(),r=typeof t=="string"?t:Du,s=yc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=qx("firestore");i&&uP(s,...i)}return s}function Cc(t){if(t._terminated)throw new q(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||dP(t),t._firestoreClient}function dP(t){var r,s,i,o;const e=t._freezeSettings(),n=lP(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Z2(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ht(nt.fromBase64String(e))}catch(n){throw new q(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ht(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Ht._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Oa(e,Ht._jsonSchema))return Ht.fromBase64String(e.bytes)}}Ht._jsonSchemaVersion="firestore/bytes/1.0",Ht._jsonSchema={type:Ue("string",Ht._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class An{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ie(this._lat,e._lat)||ie(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:An._jsonSchemaVersion}}static fromJSON(e){if(Oa(e,An._jsonSchema))return new An(e.latitude,e.longitude)}}An._jsonSchemaVersion="firestore/geoPoint/1.0",An._jsonSchema={type:Ue("string",An._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:un._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Oa(e,un._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new un(e.vectorValues);throw new q(M.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}un._jsonSchemaVersion="firestore/vectorValue/1.0",un._jsonSchema={type:Ue("string",un._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hP=/^__.*__$/;class fP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new La(e,this.data,n,this.fieldTransforms)}}class bT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function IT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J(40011,{dataSource:t})}}class pm{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new pm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return $u(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(IT(this.dataSource)&&hP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class pP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||kc(e)}createContext(e,n,r,s=!1){return new pm({dataSource:e,methodName:n,targetDoc:r,path:Ze.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function jc(t){const e=t._freezeSettings(),n=kc(t._databaseId);return new pP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kT(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);gm("Data must be an object, but it was:",o,r);const l=NT(r,o);let c,d;if(i.merge)c=new Ot(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const p of i.mergeFields){const m=Rs(e,p,n);if(!o.contains(m))throw new q(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);CT(h,m)||h.push(m)}c=new Ot(h),d=o.fieldTransforms.filter(p=>c.covers(p.field))}else c=null,d=o.fieldTransforms;return new fP(new vt(l),c,d)}class Dc extends Pc{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Dc}}class mm extends Pc{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Ta(e.serializer,jE(e.serializer,this.Vc));return new ZR(e.path,n)}isEqual(e){return e instanceof mm&&this.Vc===e.Vc}}function mP(t,e,n,r){const s=t.createContext(1,e,n);gm("Data must be an object, but it was:",s,r);const i=[],o=vt.empty();Jr(r,(c,d)=>{const h=RT(e,c,n);d=Ie(d);const p=s.childContextForFieldPath(h);if(d instanceof Dc)i.push(h);else{const m=Fa(d,p);m!=null&&(i.push(h),o.set(h,m))}});const l=new Ot(i);return new bT(o,l,s.fieldTransforms)}function gP(t,e,n,r,s,i){const o=t.createContext(1,e,n),l=[Rs(e,r,n)],c=[s];if(i.length%2!=0)throw new q(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Rs(e,i[m])),c.push(i[m+1]);const d=[],h=vt.empty();for(let m=l.length-1;m>=0;--m)if(!CT(d,l[m])){const x=l[m];let _=c[m];_=Ie(_);const b=o.childContextForFieldPath(x);if(_ instanceof Dc)d.push(x);else{const k=Fa(_,b);k!=null&&(d.push(x),h.set(x,k))}}const p=new Ot(d);return new bT(h,p,o.fieldTransforms)}function yP(t,e,n,r=!1){return Fa(n,t.createContext(r?4:3,e))}function Fa(t,e){if(AT(t=Ie(t)))return gm("Unsupported field value:",e,t),NT(t,e);if(t instanceof Pc)return function(r,s){if(!IT(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Fa(l,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ie(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return jE(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=_e.fromDate(r);return{timestampValue:Uu(s.serializer,i)}}if(r instanceof _e){const i=new _e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Uu(s.serializer,i)}}if(r instanceof An)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ht)return{bytesValue:$E(s.serializer,r._byteString)};if(r instanceof De){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Xp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof un)return function(o,l){const c=o instanceof un?o.toArray():o;return{mapValue:{fields:{[gE]:{stringValue:yE},[Ou]:{arrayValue:{values:c.map(h=>{if(typeof h!="number")throw l.createError("VectorValues must only contain numeric values.");return Gp(l.serializer,h)})}}}}}}(r,s);if(YE(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${vc(r)}`)}(t,e)}function NT(t,e){const n={};return cE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(r,s)=>{const i=Fa(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function AT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof _e||t instanceof An||t instanceof Ht||t instanceof De||t instanceof Pc||t instanceof un||YE(t))}function gm(t,e,n){if(!AT(n)||!lE(n)){const r=vc(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Rs(t,e,n){if((e=Ie(e))instanceof fm)return e._internalPath;if(typeof e=="string")return RT(t,e);throw $u("Field path arguments must be of type string or ",t,!1,void 0,n)}const vP=new RegExp("[~\\*/\\[\\]]");function RT(t,e,n){if(e.search(vP)>=0)throw $u(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new fm(...e.split("."))._internalPath}catch{throw $u(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function $u(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new q(M.INVALID_ARGUMENT,l+t+c)}function CT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{convertValue(e,n="none"){switch(Br(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Pe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Fr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jr(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Ou].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Pe(o.doubleValue));return new un(n)}convertGeoPoint(e){return new An(Pe(e.latitude),Pe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=xc(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ya(e));default:return null}}convertTimestamp(e){const n=Ur(e);return new _e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);ce(JE(r),9688,{name:e});const s=new va(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym extends _P{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ht(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new De(this.firestore,null,n)}}function If(t){return new mm("increment",t)}const wv="@firebase/firestore",xv="4.10.0";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e="count",n){this._internalFieldPath=n,this.type="AggregateField",this.aggregateType=e}}class xP{constructor(e,n,r){this._userDataWriter=n,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new vt({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new De(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new EP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Rs("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class EP extends PT{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new q(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class vm{}class _m extends vm{}function Rn(t,e,...n){let r=[];e instanceof vm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof wm).length,l=i.filter(c=>c instanceof Oc).length;if(o>1||o>0&&l>0)throw new q(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Oc extends _m{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Oc(e,n,r)}_apply(e){const n=this._parse(e);return DT(e._query,n),new Xr(e.firestore,e.converter,gf(e._query,n))}_parse(e){const n=jc(e.firestore);return function(i,o,l,c,d,h,p){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Tv(p,h);const _=[];for(const b of p)_.push(Ev(c,i,b));m={arrayValue:{values:_}}}else m=Ev(c,i,p)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Tv(p,h),m=yP(l,o,p,h==="in"||h==="not-in");return Me.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function fs(t,e,n){const r=e,s=Rs("where",t);return Oc._create(s,r,n)}class wm extends vm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new wm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:dn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)DT(o,c),o=gf(o,c)}(e._query,n),new Xr(e.firestore,e.converter,gf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class xm extends _m{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new xm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new q(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new q(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wa(i,o)}(e._query,this._field,this._direction);return new Xr(e.firestore,e.converter,$R(e._query,n))}}function Ba(t,e="asc"){const n=e,r=Rs("orderBy",t);return xm._create(r,n)}class Em extends _m{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Em(e,n,r)}_apply(e){return new Xr(e.firestore,e.converter,Vu(e._query,this._limit,this._limitType))}}function jT(t){return Em._create("limit",t,"F")}function Ev(t,e,n){if(typeof(n=Ie(n))=="string"){if(n==="")throw new q(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!bE(e)&&n.indexOf("/")!==-1)throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!K.isDocumentKey(r))throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return V0(t,new K(r))}if(n instanceof De)return V0(t,n._key);throw new q(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${vc(n)}.`)}function Tv(t,e){if(!Array.isArray(t)||t.length===0)throw new q(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function DT(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function OT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}function SP(){return new wP("count")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cl(t){return bP(t,{count:SP()})}function bP(t,e){const n=Yt(t.firestore,Zr),r=Cc(n),s=TR(e,(i,o)=>new aC(o,i.aggregateType,i._internalFieldPath));return iP(r,t._query,s).then(i=>function(l,c,d){const h=new ym(l);return new xP(c,h,d)}(n,t,i))}class Po{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vs extends PT{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Zl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Rs("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new q(M.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vs._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vs._jsonSchemaVersion="firestore/documentSnapshot/1.0",vs._jsonSchema={type:Ue("string",vs._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Zl extends vs{data(e={}){return super.data(e)}}class yi{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Po(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Zl(this._firestore,this._userDataWriter,r.key,r,new Po(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new q(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new Zl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Po(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new Zl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Po(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:IP(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new q(M.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=yi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Bp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function IP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */yi._jsonSchemaVersion="firestore/querySnapshot/1.0",yi._jsonSchema={type:Ue("string",yi._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tm(t){t=Yt(t,De);const e=Yt(t.firestore,Zr),n=Cc(e);return rP(n,t._key).then(r=>kP(e,t,r))}function Fs(t){t=Yt(t,Xr);const e=Yt(t.firestore,Zr),n=Cc(e),r=new ym(e);return TP(t._query),sP(n,t._query).then(s=>new yi(e,r,t,s))}function Lc(t,e,n){t=Yt(t,De);const r=Yt(t.firestore,Zr),s=OT(t.converter,e,n),i=jc(r);return Vc(r,[kT(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Gt.none())])}function qu(t,e,n,...r){t=Yt(t,De);const s=Yt(t.firestore,Zr),i=jc(s);let o;return o=typeof(e=Ie(e))=="string"||e instanceof fm?gP(i,"updateDoc",t._key,e,n,r):mP(i,"updateDoc",t._key,e),Vc(s,[o.toMutation(t._key,Gt.exists(!0))])}function Sm(t){return Vc(Yt(t.firestore,Zr),[new Qp(t._key,Gt.none())])}function bm(t,e){const n=Yt(t.firestore,Zr),r=Xt(t),s=OT(t.converter,e),i=jc(t.firestore);return Vc(n,[kT(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Gt.exists(!1))]).then(()=>r)}function Vc(t,e){const n=Cc(t);return oP(n,e)}function kP(t,e,n){const r=n.docs.get(e._key),s=new ym(t);return new vs(t,s,e._key,r,new Po(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){nR(Vs),ks(new Vr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Zr(new iR(r.getProvider("auth-internal")),new lR(o,r.getProvider("app-check-internal")),IR(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),bn(wv,xv,e),bn(wv,xv,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firebasestorage.googleapis.com",VT="storageBucket",NP=2*60*1e3,AP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce extends Dn{constructor(e,n,r=0){super(nh(e),`Firebase Storage: ${n} (${nh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ce.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return nh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Re;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Re||(Re={}));function nh(t){return"storage/"+t}function Im(){const t="An unknown error occurred, please check the error payload for server response.";return new Ce(Re.UNKNOWN,t)}function RP(t){return new Ce(Re.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function CP(t){return new Ce(Re.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function PP(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ce(Re.UNAUTHENTICATED,t)}function jP(){return new Ce(Re.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function DP(t){return new Ce(Re.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function OP(){return new Ce(Re.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function LP(){return new Ce(Re.CANCELED,"User canceled the upload/download.")}function VP(t){return new Ce(Re.INVALID_URL,"Invalid URL '"+t+"'.")}function MP(t){return new Ce(Re.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function UP(){return new Ce(Re.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+VT+"' property when initializing the app?")}function FP(){return new Ce(Re.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function BP(){return new Ce(Re.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function zP(t){return new Ce(Re.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function kf(t){return new Ce(Re.INVALID_ARGUMENT,t)}function MT(){return new Ce(Re.APP_DELETED,"The Firebase app was deleted.")}function $P(t){return new Ce(Re.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ko(t,e){return new Ce(Re.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function xo(t){throw new Ce(Re.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Lt.makeFromUrl(e,n)}catch{return new Lt(e,"")}if(r.path==="")return r;throw MP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(j){j.path.charAt(j.path.length-1)==="/"&&(j.path_=j.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(j){j.path_=decodeURIComponent(j.path)}const h="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",x=new RegExp(`^https?://${p}/${h}/b/${s}/o${m}`,"i"),_={bucket:1,path:3},b=n===LT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,k="([^?#]*)",S=new RegExp(`^https?://${b}/${s}/${k}`,"i"),N=[{regex:l,indices:c,postModify:i},{regex:x,indices:_,postModify:d},{regex:S,indices:{bucket:1,path:2},postModify:d}];for(let j=0;j<N.length;j++){const F=N[j],V=F.regex.exec(e);if(V){const T=V[F.indices.bucket];let v=V[F.indices.path];v||(v=""),r=new Lt(T,v),F.postModify(r);break}}if(r==null)throw VP(e);return r}}class qP{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HP(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let d=!1;function h(...k){d||(d=!0,e.apply(null,k))}function p(k){s=setTimeout(()=>{s=null,t(x,c())},k)}function m(){i&&clearTimeout(i)}function x(k,...S){if(d){m();return}if(k){m(),h.call(null,k,...S);return}if(c()||o){m(),h.call(null,k,...S);return}r<64&&(r*=2);let N;l===1?(l=2,N=0):N=(r+Math.random())*1e3,p(N)}let _=!1;function b(k){_||(_=!0,m(),!d&&(s!==null?(k||(l=2),clearTimeout(s),p(0)):k||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,b(!0)},n),b}function WP(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){return t!==void 0}function GP(t){return typeof t=="object"&&!Array.isArray(t)}function km(t){return typeof t=="string"||t instanceof String}function Sv(t){return Nm()&&t instanceof Blob}function Nm(){return typeof Blob<"u"}function bv(t,e,n,r){if(r<e)throw kf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw kf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Am(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function UT(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var _s;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(_s||(_s={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QP(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e,n,r,s,i,o,l,c,d,h,p,m=!0,x=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=h,this.connectionFactory_=p,this.retry=m,this.isUsingEmulator=x,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,b)=>{this.resolve_=_,this.reject_=b,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Pl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===_s.NO_ERROR,c=i.getStatus();if(!l||QP(c,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===_s.ABORT;r(!1,new Pl(!1,null,h));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new Pl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());KP(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=Im();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?MT():LP();o(c)}else{const c=OP();o(c)}};this.canceled_?n(!1,new Pl(!1,null,!0)):this.backoffId_=HP(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&WP(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function YP(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function XP(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function ZP(t,e){e&&(t["X-Firebase-GMPID"]=e)}function ej(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function tj(t,e,n,r,s,i,o=!0,l=!1){const c=UT(t.urlParams),d=t.url+c,h=Object.assign({},t.headers);return ZP(h,e),YP(h,n),XP(h,i),ej(h,r),new JP(d,t.method,h,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,l)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function rj(...t){const e=nj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Nm())return new Blob(t);throw new Ce(Re.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ij(t){if(typeof atob>"u")throw zP("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class rh{constructor(e,n){this.data=e,this.contentType=n||null}}function oj(t,e){switch(t){case En.RAW:return new rh(FT(e));case En.BASE64:case En.BASE64URL:return new rh(BT(t,e));case En.DATA_URL:return new rh(lj(e),uj(e))}throw Im()}function FT(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function aj(t){let e;try{e=decodeURIComponent(t)}catch{throw Ko(En.DATA_URL,"Malformed data URL.")}return FT(e)}function BT(t,e){switch(t){case En.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ko(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case En.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ko(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=ij(e)}catch(s){throw s.message.includes("polyfill")?s:Ko(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class zT{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ko(En.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=cj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function lj(t){const e=new zT(t);return e.base64?BT(En.BASE64,e.rest):aj(e.rest)}function uj(t){return new zT(t).contentType}function cj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e,n){let r=0,s="";Sv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Sv(this.data_)){const r=this.data_,s=sj(r,e,n);return s===null?null:new pr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new pr(r,!0)}}static getBlob(...e){if(Nm()){const n=e.map(r=>r instanceof pr?r.data_:r);return new pr(rj.apply(null,n))}else{const n=e.map(o=>km(o)?oj(En.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new pr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t){let e;try{e=JSON.parse(t)}catch{return null}return GP(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function hj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function qT(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fj(t,e){return e}class gt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||fj}}let jl=null;function pj(t){return!km(t)||t.length<2?t:qT(t)}function HT(){if(jl)return jl;const t=[];t.push(new gt("bucket")),t.push(new gt("generation")),t.push(new gt("metageneration")),t.push(new gt("name","fullPath",!0));function e(i,o){return pj(o)}const n=new gt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new gt("size");return s.xform=r,t.push(s),t.push(new gt("timeCreated")),t.push(new gt("updated")),t.push(new gt("md5Hash",null,!0)),t.push(new gt("cacheControl",null,!0)),t.push(new gt("contentDisposition",null,!0)),t.push(new gt("contentEncoding",null,!0)),t.push(new gt("contentLanguage",null,!0)),t.push(new gt("contentType",null,!0)),t.push(new gt("metadata","customMetadata",!0)),jl=t,jl}function mj(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Lt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function gj(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return mj(r,t),r}function WT(t,e,n){const r=$T(e);return r===null?null:gj(t,r,n)}function yj(t,e,n,r){const s=$T(e);if(s===null||!km(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const h=t.bucket,p=t.fullPath,m="/b/"+o(h)+"/o/"+o(p),x=Am(m,n,r),_=UT({alt:"media",token:d});return x+_})[0]}function vj(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class KT{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GT(t){if(!t)throw Im()}function _j(t,e){function n(r,s){const i=WT(t,s,e);return GT(i!==null),i}return n}function wj(t,e){function n(r,s){const i=WT(t,s,e);return GT(i!==null),yj(i,s,t.host,t._protocol)}return n}function QT(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=jP():s=PP():n.getStatus()===402?s=CP(t.bucket):n.getStatus()===403?s=DP(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function xj(t){const e=QT(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=RP(t.path)),i.serverResponse=s.serverResponse,i}return n}function Ej(t,e,n){const r=e.fullServerUrl(),s=Am(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new KT(s,i,wj(t,n),o);return l.errorHandler=xj(e),l}function Tj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Sj(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Tj(null,e)),r}function bj(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let N="";for(let j=0;j<2;j++)N=N+Math.random().toString().slice(2);return N}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const d=Sj(e,r,s),h=vj(d,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+h+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",x=pr.getBlob(p,r,m);if(x===null)throw FP();const _={name:d.fullPath},b=Am(i,t.host,t._protocol),k="POST",S=t.maxUploadRetryTime,E=new KT(b,k,_j(t,n),S);return E.urlParams=_,E.headers=o,E.body=x.uploadData(),E.errorHandler=QT(e),E}class Ij{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=_s.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=_s.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=_s.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw xo("cannot .send() more than once");if(Qr(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw xo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw xo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw xo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw xo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class kj extends Ij{initXhr(){this.xhr_.responseType="text"}}function JT(){return new kj}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e,n){this._service=e,n instanceof Lt?this._location=n:this._location=Lt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Cs(e,n)}get root(){const e=new Lt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return qT(this._location.path)}get storage(){return this._service}get parent(){const e=dj(this._location.path);if(e===null)return null;const n=new Lt(this._location.bucket,e);return new Cs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw $P(e)}}function Nj(t,e,n){t._throwIfRoot("uploadBytes");const r=bj(t.storage,t._location,HT(),new pr(e,!0),n);return t.storage.makeRequestWithTokens(r,JT).then(s=>({metadata:s,ref:t}))}function Aj(t){t._throwIfRoot("getDownloadURL");const e=Ej(t.storage,t._location,HT());return t.storage.makeRequestWithTokens(e,JT).then(n=>{if(n===null)throw BP();return n})}function Rj(t,e){const n=hj(t._location.path,e),r=new Lt(t._location.bucket,n);return new Cs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cj(t){return/^[A-Za-z]+:\/\//.test(t)}function Pj(t,e){return new Cs(t,e)}function YT(t,e){if(t instanceof Rm){const n=t;if(n._bucket==null)throw UP();const r=new Cs(n,n._bucket);return e!=null?YT(r,e):r}else return e!==void 0?Rj(t,e):t}function jj(t,e){if(e&&Cj(e)){if(t instanceof Rm)return Pj(t,e);throw kf("To use ref(service, url), the first argument must be a Storage instance.")}else return YT(t,e)}function Iv(t,e){const n=e==null?void 0:e[VT];return n==null?null:Lt.makeFromBucketSpec(n,t)}function Dj(t,e,n,r={}){t.host=`${e}:${n}`;const s=Qr(e);s&&(Op(`https://${t.host}/b`),Lp("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:Kx(i,t.app.options.projectId))}class Rm{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=LT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=NP,this._maxUploadRetryTime=AP,this._requests=new Set,s!=null?this._bucket=Lt.makeFromBucketSpec(s,this._host):this._bucket=Iv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Lt.makeFromBucketSpec(this._url,e):this._bucket=Iv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){bv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){bv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Cs(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new qP(MT());{const o=tj(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const kv="@firebase/storage",Nv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="storage";function Oj(t,e,n){return t=Ie(t),Nj(t,e,n)}function Lj(t){return t=Ie(t),Aj(t)}function Vj(t,e){return t=Ie(t),jj(t,e)}function Mj(t=Up(),e){t=Ie(t);const r=yc(t,XT).getImmediate({identifier:e}),s=qx("storage");return s&&Uj(r,...s),r}function Uj(t,e,n,r={}){Dj(t,e,n,r)}function Fj(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Rm(n,r,s,e,Vs)}function Bj(){ks(new Vr(XT,Fj,"PUBLIC").setMultipleInstances(!0)),bn(kv,Nv,""),bn(kv,Nv,"esm2020")}Bj();function ZT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const zj=ZT,e1=new ja("auth","Firebase",ZT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hu=new Vp("@firebase/auth");function $j(t,...e){Hu.logLevel<=se.WARN&&Hu.warn(`Auth (${Vs}): ${t}`,...e)}function eu(t,...e){Hu.logLevel<=se.ERROR&&Hu.error(`Auth (${Vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(t,...e){throw Cm(t,...e)}function Cn(t,...e){return Cm(t,...e)}function t1(t,e,n){const r={...zj(),[e]:n};return new ja("auth","Firebase",r).create(e,{appName:t.name})}function zn(t){return t1(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return e1.create(t,...e)}function Q(t,e,...n){if(!t)throw Cm(e,...n)}function Un(t){const e="INTERNAL ASSERTION FAILED: "+t;throw eu(e),new Error(e)}function Jn(t,e){t||Un(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function qj(){return Av()==="http:"||Av()==="https:"}function Av(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hj(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(qj()||jN()||"connection"in navigator)?navigator.onLine:!0}function Wj(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za{constructor(e,n){this.shortDelay=e,this.longDelay=n,Jn(n>e,"Short delay should be less than long delay!"),this.isMobile=RN()||DN()}get(){return Hj()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t,e){Jn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Un("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Un("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Un("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gj=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Qj=new za(3e4,6e4);function es(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Xn(t,e,n,r,s={}){return r1(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Da({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return PN()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Qr(t.emulatorConfig.host)&&(d.credentials="include"),n1.fetch()(await s1(t,t.config.apiHost,n,l),d)})}async function r1(t,e,n){t._canInitEmulator=!1;const r={...Kj,...e};try{const s=new Yj(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Dl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Dl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Dl(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw t1(t,h,d);hn(t,h)}}catch(s){if(s instanceof Dn)throw s;hn(t,"network-request-failed",{message:String(s)})}}async function $a(t,e,n,r,s={}){const i=await Xn(t,e,n,r,s);return"mfaPendingCredential"in i&&hn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function s1(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?Pm(t.config,s):`${t.config.apiScheme}://${s}`;return Gj.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}function Jj(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yj{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Cn(this.auth,"network-request-failed")),Qj.get())})}}function Dl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Cn(t,e,r);return s.customData._tokenResponse=n,s}function Rv(t){return t!==void 0&&t.enterprise!==void 0}class Xj{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return Jj(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Zj(t,e){return Xn(t,"GET","/v2/recaptchaConfig",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eD(t,e){return Xn(t,"POST","/v1/accounts:delete",e)}async function Wu(t,e){return Xn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Go(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function tD(t,e=!1){const n=Ie(t),r=await n.getIdToken(e),s=jm(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Go(sh(s.auth_time)),issuedAtTime:Go(sh(s.iat)),expirationTime:Go(sh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function sh(t){return Number(t)*1e3}function jm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return eu("JWT malformed, contained fewer than 3 sections"),null;try{const s=zx(n);return s?JSON.parse(s):(eu("Failed to decode base64 JWT payload"),null)}catch(s){return eu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Cv(t){const e=jm(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Di(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Dn&&nD(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function nD({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Go(this.lastLoginAt),this.creationTime=Go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ku(t){var p;const e=t.auth,n=await t.getIdToken(),r=await Di(t,Wu(e,{idToken:n}));Q(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(p=s.providerUserInfo)!=null&&p.length?i1(s.providerUserInfo):[],o=iD(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Af(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function sD(t){const e=Ie(t);await Ku(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iD(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function i1(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oD(t,e){const n=await r1(t,{},async()=>{const r=Da({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await s1(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Qr(t.emulatorConfig.host)&&(c.credentials="include"),n1.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function aD(t,e){return Xn(t,"POST","/v2/accounts:revokeToken",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Cv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=Cv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await oD(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new vi;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new vi,this.toJSON())}_performRefresh(){return Un("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class on{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new rD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Af(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Di(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return tD(this,e)}reload(){return sD(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new on({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ku(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(jt(this.auth.app))return Promise.reject(zn(this.auth));const e=await this.getIdToken();return await Di(this,eD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:p,emailVerified:m,isAnonymous:x,providerData:_,stsTokenManager:b}=n;Q(p&&b,e,"internal-error");const k=vi.fromJSON(this.name,b);Q(typeof p=="string",e,"internal-error"),lr(r,e.name),lr(s,e.name),Q(typeof m=="boolean",e,"internal-error"),Q(typeof x=="boolean",e,"internal-error"),lr(i,e.name),lr(o,e.name),lr(l,e.name),lr(c,e.name),lr(d,e.name),lr(h,e.name);const S=new on({uid:p,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:x,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:k,createdAt:d,lastLoginAt:h});return _&&Array.isArray(_)&&(S.providerData=_.map(E=>({...E}))),c&&(S._redirectEventId=c),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new vi;s.updateFromServerResponse(n);const i=new on({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ku(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?i1(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new vi;l.updateFromIdToken(r);const c=new on({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Af(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pv=new Map;function Fn(t){Jn(t instanceof Function,"Expected a class definition");let e=Pv.get(t);return e?(Jn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Pv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}o1.type="NONE";const jv=o1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(t,e,n){return`firebase:${t}:${e}:${n}`}class _i{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=tu(this.userKey,s.apiKey,i),this.fullPersistenceKey=tu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Wu(this.auth,{idToken:e}).catch(()=>{});return n?on._fromGetAccountInfoResponse(this.auth,n,e):null}return on._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new _i(Fn(jv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Fn(jv);const o=tu(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let p;if(typeof h=="string"){const m=await Wu(e,{idToken:h}).catch(()=>{});if(!m)break;p=await on._fromGetAccountInfoResponse(e,m,h)}else p=on._fromJSON(e,h);d!==i&&(l=p),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new _i(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new _i(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(c1(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(a1(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(h1(e))return"Blackberry";if(f1(e))return"Webos";if(l1(e))return"Safari";if((e.includes("chrome/")||u1(e))&&!e.includes("edge/"))return"Chrome";if(d1(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function a1(t=ft()){return/firefox\//i.test(t)}function l1(t=ft()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function u1(t=ft()){return/crios\//i.test(t)}function c1(t=ft()){return/iemobile/i.test(t)}function d1(t=ft()){return/android/i.test(t)}function h1(t=ft()){return/blackberry/i.test(t)}function f1(t=ft()){return/webos/i.test(t)}function Dm(t=ft()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function lD(t=ft()){var e;return Dm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function uD(){return ON()&&document.documentMode===10}function p1(t=ft()){return Dm(t)||d1(t)||f1(t)||h1(t)||/windows phone/i.test(t)||c1(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m1(t,e=[]){let n;switch(t){case"Browser":n=Dv(ft());break;case"Worker":n=`${Dv(ft())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dD(t,e={}){return Xn(t,"GET","/v2/passwordPolicy",es(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD=6;class fD{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hD,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ov(this),this.idTokenSubscription=new Ov(this),this.beforeStateQueue=new cD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=e1,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fn(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await _i.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wu(this,{idToken:e}),r=await on._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(jt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ku(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Wj()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(jt(this.app))return Promise.reject(zn(this));const n=e?Ie(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return jt(this.app)?Promise.reject(zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return jt(this.app)?Promise.reject(zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await dD(this),n=new fD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new ja("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await aD(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await _i.create(this,[Fn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=m1(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(jt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&$j(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Bs(t){return Ie(t)}class Ov{constructor(e){this.auth=e,this.observer=null,this.addObserver=$N(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function mD(t){Mc=t}function g1(t){return Mc.loadJS(t)}function gD(){return Mc.recaptchaEnterpriseScript}function yD(){return Mc.gapiScript}function vD(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class _D{constructor(){this.enterprise=new wD}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class wD{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const xD="recaptcha-enterprise",y1="NO_RECAPTCHA";class ED{constructor(e){this.type=xD,this.auth=Bs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{Zj(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new Xj(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;Rv(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(y1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new _D().execute("siteKey",{action:"verify"}):new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Rv(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=gD();c.length!==0&&(c+=l),g1(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Lv(t,e,n,r=!1,s=!1){const i=new ED(t);let o;if(s)o=y1;else try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const c=l.phoneEnrollmentInfo.phoneNumber,d=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:c,recaptchaToken:d,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const c=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Rf(t,e,n,r,s){var i;if((i=t._getRecaptchaConfig())!=null&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Lv(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const l=await Lv(t,e,n,n==="getOobCode");return r(t,l)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t,e){const n=yc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Is(i,e??{}))return s;hn(s,"already-initialized")}return n.initialize({options:e})}function SD(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Fn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function bD(t,e,n){const r=Bs(t);Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=v1(e),{host:o,port:l}=ID(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Q(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Q(Is(d,r.config.emulator)&&Is(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Qr(o)?(Op(`${i}//${o}${c}`),Lp("Auth",!0)):kD()}function v1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ID(t){const e=v1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Vv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Vv(o)}}}function Vv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kD(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Un("not implemented")}_getIdTokenResponse(e){return Un("not implemented")}_linkToIdToken(e,n){return Un("not implemented")}_getReauthenticationResolver(e){return Un("not implemented")}}async function ND(t,e){return Xn(t,"POST","/v1/accounts:update",e)}async function AD(t,e){return Xn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t,e){return $a(t,"POST","/v1/accounts:signInWithPassword",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CD(t,e){return $a(t,"POST","/v1/accounts:signInWithEmailLink",es(t,e))}async function PD(t,e){return $a(t,"POST","/v1/accounts:signInWithEmailLink",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends Om{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Sa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rf(e,n,"signInWithPassword",RD);case"emailLink":return CD(e,{email:this._email,oobCode:this._password});default:hn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rf(e,r,"signUpPassword",AD);case"emailLink":return PD(e,{idToken:n,email:this._email,oobCode:this._password});default:hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wi(t,e){return $a(t,"POST","/v1/accounts:signInWithIdp",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="http://localhost";class Ps extends Om{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ps(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):hn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Ps(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return wi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wi(e,n)}buildRequest(){const e={requestUri:jD,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Da(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function OD(t){const e=ko(No(t)).link,n=e?ko(No(e)).deep_link_id:null,r=ko(No(t)).deep_link_id;return(r?ko(No(r)).link:null)||r||n||e||t}class Lm{constructor(e){const n=ko(No(e)),r=n.apiKey??null,s=n.oobCode??null,i=DD(n.mode??null);Q(r&&s&&i,"argument-error"),this.apiKey=r,this.operation=i,this.code=s,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=OD(e);try{return new Lm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(){this.providerId=zs.PROVIDER_ID}static credential(e,n){return Sa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Lm.parseLink(n);return Q(r,"argument-error"),Sa._fromEmailAndCode(e,r.code,r.tenantId)}}zs.PROVIDER_ID="password";zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends _1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr extends qa{constructor(){super("facebook.com")}static credential(e){return Ps._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return mr.credential(e.oauthAccessToken)}catch{return null}}}mr.FACEBOOK_SIGN_IN_METHOD="facebook.com";mr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ps._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return gr.credential(n,r)}catch{return null}}}gr.GOOGLE_SIGN_IN_METHOD="google.com";gr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr extends qa{constructor(){super("github.com")}static credential(e){return Ps._fromParams({providerId:yr.PROVIDER_ID,signInMethod:yr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yr.credentialFromTaggedObject(e)}static credentialFromError(e){return yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return yr.credential(e.oauthAccessToken)}catch{return null}}}yr.GITHUB_SIGN_IN_METHOD="github.com";yr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr extends qa{constructor(){super("twitter.com")}static credential(e,n){return Ps._fromParams({providerId:vr.PROVIDER_ID,signInMethod:vr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return vr.credentialFromTaggedObject(e)}static credentialFromError(e){return vr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return vr.credential(n,r)}catch{return null}}}vr.TWITTER_SIGN_IN_METHOD="twitter.com";vr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(t,e){return $a(t,"POST","/v1/accounts:signUp",es(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await on._fromIdTokenResponse(e,r,s),o=Mv(r);return new js({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Mv(r);return new js({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Mv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gu extends Dn{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Gu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Gu(e,n,r,s)}}function w1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Gu._fromErrorAndOperation(t,i,e,r):i})}async function VD(t,e,n=!1){const r=await Di(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return js._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(t,e,n=!1){const{auth:r}=t;if(jt(r.app))return Promise.reject(zn(r));const s="reauthenticate";try{const i=await Di(t,w1(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=jm(i.idToken);Q(o,r,"internal-error");const{sub:l}=o;return Q(t.uid===l,r,"user-mismatch"),js._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&hn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t,e,n=!1){if(jt(t.app))return Promise.reject(zn(t));const r="signIn",s=await w1(t,r,e),i=await js._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function MD(t,e){return E1(Bs(t),e)}async function UD(t,e){return x1(Ie(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(t){const e=Bs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function FD(t,e,n){if(jt(t.app))return Promise.reject(zn(t));const r=Bs(t),o=await Rf(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",LD).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&T1(t),c}),l=await js._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function BD(t,e,n){return jt(t.app)?Promise.reject(zn(t)):MD(Ie(t),zs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&T1(t),r})}function zD(t,e){return $D(Ie(t),null,e)}async function $D(t,e,n){const{auth:r}=t,i={idToken:await t.getIdToken(),returnSecureToken:!0};n&&(i.password=n);const o=await Di(t,ND(r,i));await t._updateTokensIfNecessary(o,!0)}function qD(t,e,n,r){return Ie(t).onIdTokenChanged(e,n,r)}function HD(t,e,n){return Ie(t).beforeAuthStateChanged(e,n)}function WD(t){return Ie(t).signOut()}const Qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Qu,"1"),this.storage.removeItem(Qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KD=1e3,GD=10;class b1 extends S1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=p1(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);uD()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,GD):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},KD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}b1.type="LOCAL";const QD=b1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1 extends S1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}I1.type="SESSION";const k1=I1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JD(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Uc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await JD(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Uc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=Vm("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function XD(t){Pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N1(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function ZD(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function e4(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function t4(){return N1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="firebaseLocalStorageDb",n4=1,Ju="firebaseLocalStorage",R1="fbase_key";class Ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fc(t,e){return t.transaction([Ju],e?"readwrite":"readonly").objectStore(Ju)}function r4(){const t=indexedDB.deleteDatabase(A1);return new Ha(t).toPromise()}function Cf(){const t=indexedDB.open(A1,n4);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Ju,{keyPath:R1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Ju)?e(r):(r.close(),await r4(),e(await Cf()))})})}async function Uv(t,e,n){const r=Fc(t,!0).put({[R1]:e,value:n});return new Ha(r).toPromise()}async function s4(t,e){const n=Fc(t,!1).get(e),r=await new Ha(n).toPromise();return r===void 0?null:r.value}function Fv(t,e){const n=Fc(t,!0).delete(e);return new Ha(n).toPromise()}const i4=800,o4=3;class C1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>o4)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return N1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Uc._getInstance(t4()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await ZD(),!this.activeServiceWorker)return;this.sender=new YD(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||e4()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cf();return await Uv(e,Qu,"1"),await Fv(e,Qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Uv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>s4(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Fc(s,!1).getAll();return new Ha(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),i4)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}C1.type="LOCAL";const a4=C1;new za(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l4(t,e){return e?Fn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm extends Om{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function u4(t){return E1(t.auth,new Mm(t),t.bypassAuthState)}function c4(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),x1(n,new Mm(t),t.bypassAuthState)}async function d4(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),VD(n,new Mm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return u4;case"linkViaPopup":case"linkViaRedirect":return d4;case"reauthViaPopup":case"reauthViaRedirect":return c4;default:hn(this.auth,"internal-error")}}resolve(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Jn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4=new za(2e3,1e4);class li extends P1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,li.currentPopupAction&&li.currentPopupAction.cancel(),li.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){Jn(this.filter.length===1,"Popup operations only handle one event");const e=Vm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,li.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,h4.get())};e()}}li.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f4="pendingRedirect",nu=new Map;class p4 extends P1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=nu.get(this.auth._key());if(!e){try{const r=await m4(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}nu.set(this.auth._key(),e)}return this.bypassAuthState||nu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function m4(t,e){const n=v4(e),r=y4(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function g4(t,e){nu.set(t._key(),e)}function y4(t){return Fn(t._redirectPersistence)}function v4(t){return tu(f4,t.config.apiKey,t.name)}async function _4(t,e,n=!1){if(jt(t.app))return Promise.reject(zn(t));const r=Bs(t),s=l4(r,e),o=await new p4(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w4=10*60*1e3;class x4{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!E4(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!j1(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=w4&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bv(e))}saveEventToCache(e){this.cachedEventUids.add(Bv(e)),this.lastProcessedEventTime=Date.now()}}function Bv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function j1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function E4(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T4(t,e={}){return Xn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S4=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,b4=/^https?/;async function I4(t){if(t.config.emulator)return;const{authorizedDomains:e}=await T4(t);for(const n of e)try{if(k4(n))return}catch{}hn(t,"unauthorized-domain")}function k4(t){const e=Nf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!b4.test(n))return!1;if(S4.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N4=new za(3e4,6e4);function zv(){const t=Pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function A4(t){return new Promise((e,n)=>{var s,i,o;function r(){zv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zv(),n(Cn(t,"network-request-failed"))},timeout:N4.get()})}if((i=(s=Pn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Pn().gapi)!=null&&o.load)r();else{const l=vD("iframefcb");return Pn()[l]=()=>{gapi.load?r():n(Cn(t,"network-request-failed"))},g1(`${yD()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw ru=null,e})}let ru=null;function R4(t){return ru=ru||A4(t),ru}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C4=new za(5e3,15e3),P4="__/auth/iframe",j4="emulator/auth/iframe",D4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},O4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function L4(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Pm(e,j4):`https://${t.config.authDomain}/${P4}`,r={apiKey:e.apiKey,appName:t.name,v:Vs},s=O4.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Da(r).slice(1)}`}async function V4(t){const e=await R4(t),n=Pn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:L4(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:D4,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Cn(t,"network-request-failed"),l=Pn().setTimeout(()=>{i(o)},C4.get());function c(){Pn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U4=500,F4=600,B4="_blank",z4="http://localhost";class $v{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $4(t,e,n,r=U4,s=F4){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...M4,width:r.toString(),height:s.toString(),top:i,left:o},d=ft().toLowerCase();n&&(l=u1(d)?B4:n),a1(d)&&(e=e||z4,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[x,_])=>`${m}${x}=${_},`,"");if(lD(d)&&l!=="_self")return q4(e||"",l),new $v(null);const p=window.open(e||"",l,h);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new $v(p)}function q4(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H4="__/auth/handler",W4="emulator/auth/handler",K4=encodeURIComponent("fac");async function qv(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vs,eventId:s};if(e instanceof _1){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",zN(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,p]of Object.entries({}))o[h]=p}if(e instanceof qa){const h=e.getScopes().filter(p=>p!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${K4}=${encodeURIComponent(c)}`:"";return`${G4(t)}?${Da(l).slice(1)}${d}`}function G4({config:t}){return t.emulator?Pm(t,W4):`https://${t.authDomain}/${H4}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="webStorageSupport";class Q4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=k1,this._completeRedirectFn=_4,this._overrideRedirectResult=g4}async _openPopup(e,n,r,s){var o;Jn((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await qv(e,n,r,Nf(),s);return $4(e,i,Vm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await qv(e,n,r,Nf(),s);return XD(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Jn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await V4(e),r=new x4(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ih,{type:ih},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[ih];i!==void 0&&n(!!i),hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=I4(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return p1()||l1()||Dm()}}const J4=Q4;var Hv="@firebase/auth",Wv="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Z4(t){ks(new Vr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:m1(t)},d=new pD(r,s,i,c);return SD(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ks(new Vr("auth-internal",e=>{const n=Bs(e.getProvider("auth").getImmediate());return(r=>new Y4(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),bn(Hv,Wv,X4(t)),bn(Hv,Wv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eO=5*60,tO=Wx("authIdTokenMaxAge")||eO;let Kv=null;const nO=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>tO)return;const s=n==null?void 0:n.token;Kv!==s&&(Kv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function rO(t=Up()){const e=yc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=TD(t,{popupRedirectResolver:J4,persistence:[a4,QD,k1]}),r=Wx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=nO(i.toString());HD(n,o,()=>o(n.currentUser)),qD(n,l=>o(l))}}const s=$x("auth");return s&&bD(n,`http://${s}`),n}function sO(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}mD({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",sO().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Z4("Browser");const iO={apiKey:"AIzaSyBvmr1cu8-WnGNiD5M_cla6lxr88QEYu28",authDomain:"eperpus-sekolah.firebaseapp.com",projectId:"eperpus-sekolah",storageBucket:"eperpus-sekolah.firebasestorage.app",messagingSenderId:"303647816343",appId:"1:303647816343:web:78ad36d2d1be25930547d2"},Um=Jx(iO),Ee=cP(Um),oO=Mj(Um),Bc=rO(Um),Fm="books",aO=async(t,e)=>{if(!t)return null;const n=Vj(oO,e);return await Oj(n,t),await Lj(n)},D1=async()=>{try{const t=Rn(Mt(Ee,Fm),Ba("createdAt","desc"));return(await Fs(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting books:",t),t}},lO=async(t,e)=>{try{let n=null;if(e){const i=`books/${Date.now()}_${e.name}`;n=await aO(e,i)}const r={...t,fileUrl:n,available:!0,rating:0,borrowed:0,createdAt:new Date().toISOString()};return{id:(await bm(Mt(Ee,Fm),r)).id,...r}}catch(n){throw console.error("Error adding book:",n),n}},uO=async(t,e)=>{try{await Sm(Xt(Ee,Fm,t)),e&&e.includes("firebasestorage")}catch(n){throw console.error("Error deleting book:",n),n}};var cO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ne=(t,e)=>{const n=L.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},d)=>L.createElement("svg",{ref:d,...cO,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:`lucide lucide-${dO(t)}`,...c},[...e.map(([h,p])=>L.createElement(h,p)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${t}`,n},hO=ne("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),fO=ne("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Gv=ne("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Yu=ne("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Bm=ne("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),Nt=ne("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),ba=ne("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),pO=ne("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),zm=ne("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),O1=ne("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),mO=ne("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),zc=ne("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),L1=ne("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),gO=ne("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),yO=ne("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),V1=ne("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),vO=ne("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),_O=ne("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]),M1=ne("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Pf=ne("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),wO=ne("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),xO=ne("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),EO=ne("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]),TO=ne("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),$m=ne("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),SO=ne("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),$c=ne("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),Qv=ne("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Oi=ne("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Jv=ne("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),U1=ne("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),qc=ne("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),bO=ne("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Hc=ne("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),qm=ne("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Qo=ne("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),IO=ne("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Hm=ne("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Li=ne("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),kO=ne("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),jf=({book:t,onClick:e})=>u.jsxs("div",{onClick:e,className:"bg-white rounded-xl shadow-md hover:shadow-xl transition-all cursor-pointer overflow-hidden group",children:[u.jsxs("div",{className:"aspect-[3/4] bg-gradient-to-br from-blue-400 to-indigo-600 flex items-center justify-center text-6xl relative overflow-hidden",children:[t.cover?u.jsx("span",{className:"text-6xl",children:t.cover}):u.jsx("span",{className:"text-6xl",children:""}),!t.available&&u.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:u.jsx("span",{className:"bg-red-500 text-white px-3 py-1 rounded-full text-sm font-bold",children:"Dipinjam"})})]}),u.jsxs("div",{className:"p-3",children:[u.jsx("h3",{className:"font-bold text-gray-800 text-sm line-clamp-1 group-hover:text-blue-600 transition",children:t.title}),u.jsx("p",{className:"text-xs text-gray-600 line-clamp-1",children:t.author}),u.jsxs("div",{className:"flex items-center justify-between mt-2",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Hc,{className:"w-3 h-3 text-yellow-500 fill-yellow-500"}),u.jsx("span",{className:"text-xs font-semibold",children:t.rating||"4.5"})]}),u.jsxs("span",{className:"text-xs text-gray-500",children:[t.borrowed||0," peminjam"]})]})]})]}),NO=({book:t,onClick:e})=>u.jsxs("div",{onClick:e,className:"bg-white rounded-lg shadow-md hover:shadow-lg transition-all cursor-pointer p-4 flex gap-4",children:[u.jsx("div",{className:"w-20 h-28 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-lg flex items-center justify-center text-4xl flex-shrink-0",children:t.cover?u.jsx("span",{className:"text-4xl",children:t.cover}):u.jsx("span",{className:"text-4xl",children:""})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-bold text-gray-800 mb-1",children:t.title}),u.jsx("p",{className:"text-sm text-gray-600 mb-2",children:t.author}),u.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Hc,{className:"w-4 h-4 text-yellow-500 fill-yellow-500"}),t.rating||"4.5"]}),u.jsxs("span",{className:"text-gray-500",children:[t.borrowed||0," peminjam"]}),u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.available?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:t.available?"Tersedia":"Dipinjam"})]})]}),u.jsx(mO,{className:"w-6 h-6 text-gray-400 self-center"})]}),Df=[{name:"FIKSI & SASTRA",subcategories:[{name:"Novel",subcategories:[{name:"Novel Remaja (Teenlit)"},{name:"Novel Petualangan"},{name:"Novel Fantasi & Sci-Fi"},{name:"Novel Inspiratif"},{name:"Novel Misteri"}]},{name:"Cerita Pendek (Cerpen)",subcategories:[{name:"Kumpulan Cerpen Indonesia"},{name:"Cerpen Terjemahan"},{name:"Cerpen Karya Siswa "}]},{name:"Komik & Novel Grafis"},{name:"Sastra Klasik"},{name:"Puisi & Prosa"}]},{name:"BUKU PELAJARAN & AKADEMIK",subcategories:[{name:"Matematika",subcategories:[{name:"Kelas 7"},{name:"Kelas 8"},{name:"Kelas 9"},{name:"Olimpiade Matematika"}]},{name:"Ilmu Pengetahuan Alam (IPA)",subcategories:[{name:"Fisika"},{name:"Biologi"},{name:"Kimia Dasar"},{name:"Sains Terpadu"}]},{name:"Ilmu Pengetahuan Sosial (IPS)",subcategories:[{name:"Sejarah"},{name:"Geografi"},{name:"Ekonomi"}]},{name:"Bahasa & Budaya",subcategories:[{name:"Bahasa Indonesia"},{name:"Bahasa Inggris"},{name:"Bahasa Daerah"},{name:"Sastra Inggris"}]},{name:"Pendidikan Pancasila & Kewarganegaraan (PPKn)"},{name:"Informatika & TIK"},{name:"Pendidikan Agama & Budi Pekerti"}]},{name:"NON-FIKSI & PENGETAHUAN UMUM",subcategories:[{name:"Biografi Tokoh & Pahlawan"},{name:"Ensiklopedia & Kamus"},{name:"Sains & Teknologi Populer"},{name:"Sejarah Dunia & Nasional"},{name:"Lingkungan & Alam Semesta"}]},{name:"PENGEMBANGAN DIRI & KONSELING",subcategories:[{name:"Motivasi & Cara Belajar"},{name:"Psikologi Remaja & Kesehatan Mental"},{name:"Kepemimpinan & Organisasi (OSIS)"},{name:"Etika & Pendidikan Karakter"}]},{name:"MINAT, BAKAT & KETERAMPILAN",subcategories:[{name:"Pramuka & Pecinta Alam"},{name:"PMR & Kesehatan Remaja"},{name:"Seni Musik, Tari & Rupa"},{name:"Olahraga & Kesehatan Fisik"},{name:"Coding & Desain Grafis"},{name:"Kewirausahaan Remaja"}]},{name:"MAJALAH & BULETIN SEKOLAH"},{name:"Lainnya"}];function AO(){const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,i]=L.useState("grid"),[o,l]=L.useState("Semua"),c=Gr(),d=["Semua",...Df.map(m=>m.name)];L.useEffect(()=>{h()},[o]);const h=async()=>{try{r(!0);const m=await D1();let x=m;o&&o!=="Semua"&&(x=m.filter(b=>b.category?b.category.startsWith(o):!1));const _=x.map(b=>({...b,available:b.stock>0,rating:b.rating||4.5,borrowed:b.borrowed||0}));e(_)}catch(m){console.error(m)}finally{r(!1)}},p=m=>{c(`/book/${m.id}`,{state:{book:m}})};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Katalog Buku"}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>i("grid"),className:`p-2 rounded-lg ${s==="grid"?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:u.jsx(_O,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>i("list"),className:`p-2 rounded-lg ${s==="list"?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:u.jsx(EO,{className:"w-5 h-5"})})]})]}),u.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:d.map(m=>u.jsx("button",{onClick:()=>l(m),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition ${o===m?"bg-blue-600 text-white":"bg-gray-100 hover:bg-blue-100 text-gray-700"}`,children:m},m))}),n?u.jsx("div",{className:"text-center py-12",children:"Loading..."}):u.jsx("div",{className:s==="grid"?"grid grid-cols-2 md:grid-cols-3 gap-4":"space-y-3",children:t.length>0?t.map(m=>s==="grid"?u.jsx(jf,{book:m,onClick:()=>p(m)},m.id):u.jsx(NO,{book:m,onClick:()=>p(m)},m.id)):u.jsx("div",{className:"col-span-full text-center py-10 text-gray-500",children:"Tidak ada buku ditemukan."})})]})}const F1=t=>`${t}@sekolah.app`,RO=async(t,e)=>{try{const n=F1(t),s=(await BD(Bc,n,e)).user,i=Xt(Ee,"users",s.uid),o=await Tm(i);let l={role:"student",name:t};if(o.exists())l=o.data();else{const d=t==="admin"?"admin":"student";await Lc(i,{username:t,role:d,createdAt:new Date().toISOString()}),l={role:d}}const c={uid:s.uid,username:t,role:l.role,name:l.name||t};return localStorage.setItem("user_session",JSON.stringify(c)),c}catch(n){throw console.error("Login Error:",n),n}},CO=async(t,e,n)=>{try{const r=F1(e),i=(await FD(Bc,r,n)).user;return await Lc(Xt(Ee,"users",i.uid),{username:e,name:t,role:e==="admin"?"admin":"student",createdAt:new Date().toISOString()}),i}catch(r){throw console.error("Register Error:",r),r}},B1=async()=>{try{await WD(Bc),localStorage.removeItem("user_session"),window.location.href="/login"}catch(t){console.error("Logout Error:",t)}},Wc=()=>{const t=localStorage.getItem("user_session");return t?JSON.parse(t):null};function PO(){const[t,e]=L.useState(null),[n,r]=L.useState(!0),[s,i]=L.useState(!1),[o,l]=L.useState({name:"",username:"",password:""}),[c,d]=L.useState(!1),h=Gr(),p=async m=>{m.preventDefault(),d(!0);try{n?(await RO(o.username,o.password),alert("Login berhasil!"),h(t==="admin"?"/admin":"/"),window.location.reload()):(await CO(o.name,o.username,o.password),alert("Registrasi berhasil! Silakan login."),r(!0))}catch(x){console.error(x);let _="Terjadi kesalahan";x.code==="auth/email-already-in-use"?_="Username ini sudah terdaftar. Silakan login atau gunakan username lain.":x.code==="auth/wrong-password"?_="Password salah.":x.code==="auth/user-not-found"?_="Username tidak ditemukan.":x.message&&(_=x.message),alert(_)}finally{d(!1)}};return t?u.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-lg w-full max-w-md relative",children:[u.jsx("button",{onClick:()=>e(null),className:"absolute top-4 left-4 p-2 text-gray-400 hover:text-gray-600 transition",children:u.jsx(fO,{className:"w-6 h-6"})}),u.jsx("h2",{className:"text-2xl font-bold text-center mb-6 text-gray-800",children:n?`Masuk sebagai ${t==="admin"?"Admin":"Siswa"}`:"Daftar Anggota Baru"}),u.jsxs("form",{onSubmit:p,className:"space-y-4",children:[!n&&u.jsx(u.Fragment,{children:u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap"}),u.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:o.name,onChange:m=>l({...o,name:m.target.value})})]})}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),u.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:o.username,onChange:m=>l({...o,username:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),u.jsxs("div",{className:"relative",children:[u.jsx("input",{type:s?"text":"password",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none pr-10",value:o.password,onChange:m=>l({...o,password:m.target.value})}),u.jsx("button",{type:"button",onClick:()=>i(!s),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-500 hover:text-gray-700",children:s?u.jsx(yO,{className:"w-5 h-5"}):u.jsx(V1,{className:"w-5 h-5"})})]})]}),u.jsx("button",{type:"submit",disabled:c,className:`w-full text-white py-2 rounded-lg transition font-semibold ${t==="admin"?"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700":"bg-blue-600 hover:bg-blue-700"} ${c?"opacity-70 cursor-not-allowed":""}`,children:c?"Memproses...":n?"Masuk":"Daftar"})]}),u.jsx("div",{className:"mt-4 text-center",children:u.jsx("button",{onClick:()=>r(!n),className:"text-blue-600 hover:underline text-sm",children:n?"Belum punya akun? Daftar":"Sudah punya akun? Masuk"})})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-600 via-indigo-700 to-purple-800 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md animate-in fade-in zoom-in duration-300",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-4",children:u.jsx(ba,{className:"w-10 h-10 text-blue-600"})}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Lentera Digital"}),u.jsx("p",{className:"text-gray-600",children:"E-Perpustakaan Sekolah"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("button",{onClick:()=>e("student"),className:"w-full py-4 bg-blue-600 hover:bg-blue-700 text-white rounded-xl font-semibold transition flex items-center justify-center gap-2 shadow-lg",children:[u.jsx(Hm,{className:"w-5 h-5"}),"Masuk sebagai Siswa"]}),u.jsxs("button",{onClick:()=>e("admin"),className:"w-full py-4 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white rounded-xl font-semibold transition flex items-center justify-center gap-2 shadow-lg",children:[u.jsx(qc,{className:"w-5 h-5"}),"Masuk sebagai Admin"]})]}),u.jsx("div",{className:"mt-6 text-center text-sm text-gray-500",children:"Pilih tipe akun untuk melanjutkan"})]})})}const Wm="borrows",z1="books",jO=async(t,e,n)=>{try{const r=Xt(Ee,z1,e),s=await Tm(r);if(!s.exists())throw new Error("Buku tidak ditemukan");const i=s.data();if(i.stock<=0)throw new Error("Stok buku habis");const o={userId:t,userName:n||"Siswa",bookId:e,bookTitle:i.title,bookAuthor:i.author||"Unknown",borrowDate:new Date().toISOString(),dueDate:new Date(Date.now()+7*24*60*60*1e3).toISOString(),status:"active",returnedDate:null};return await bm(Mt(Ee,Wm),o),await qu(r,{stock:If(-1),borrowed:If(1)}),!0}catch(r){throw console.error("Error borrowing book:",r),r}},DO=async t=>{try{const e=Rn(Mt(Ee,Wm),fs("userId","==",t),Ba("borrowDate","desc"));return(await Fs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(e){throw console.error("Error getting my borrows:",e),e}},$1=async(t,e)=>{try{const n=Xt(Ee,Wm,t);await qu(n,{status:"returned",returnedDate:new Date().toISOString()});const r=Xt(Ee,z1,e);return await qu(r,{stock:If(1)}),!0}catch(n){throw console.error("Error returning book:",n),n}};function OO(){const[t,e]=L.useState([]),[n,r]=L.useState([]),[s,i]=L.useState(!0);L.useEffect(()=>{o()},[]);const o=async()=>{try{const d=Wc();if(!d)return;const h=await DO(d.uid),p=h.filter(x=>x.status==="active").map(l),m=h.filter(x=>x.status==="returned").map(l);e(p),r(m)}catch(d){console.error(d)}finally{i(!1)}},l=d=>{const h=new Date(d.dueDate),m=h-new Date,x=Math.ceil(m/(1e3*60*60*24));return{...d,daysLeft:x>0?x:0,formattedDueDate:h.toISOString().split("T")[0]}},c=async(d,h)=>{if(confirm("Apakah Anda yakin ingin mengembalikan buku ini?"))try{await $1(d,h),alert("Buku berhasil dikembalikan"),o()}catch(p){alert(p.message||"Gagal mengembalikan buku")}};return s?u.jsx("div",{className:"text-center py-12",children:"Loading..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Buku Saya"}),u.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg",children:u.jsxs("p",{className:"text-sm text-blue-800",children:[u.jsx("strong",{children:"Catatan:"})," Anda dapat meminjam maksimal 3 buku dengan durasi 7 hari"]})}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:["Sedang Dipinjam (",t.length,")"]}),u.jsx("div",{className:"space-y-3",children:t.length>0?t.map(d=>{var h,p,m;return u.jsx("div",{className:"bg-white rounded-lg shadow-md p-4 border-l-4 border-blue-500",children:u.jsxs("div",{className:"flex gap-4",children:[u.jsx("div",{className:"text-5xl flex items-center justify-center bg-gray-100 rounded w-16 h-20",children:(h=d.Book)!=null&&h.cover?u.jsx("span",{className:"text-2xl",children:d.Book.cover}):u.jsx("span",{className:"text-3xl",children:""})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-bold text-gray-800",children:(p=d.Book)==null?void 0:p.title}),u.jsx("p",{className:"text-sm text-gray-600",children:(m=d.Book)==null?void 0:m.author}),u.jsxs("div",{className:"flex items-center gap-4 mt-2 text-sm",children:[u.jsxs("span",{className:"flex items-center gap-1 text-orange-600",children:[u.jsx(zc,{className:"w-4 h-4"}),d.daysLeft," hari lagi"]}),u.jsxs("span",{className:"text-gray-500",children:["Jatuh tempo: ",d.formattedDueDate]})]}),u.jsxs("div",{className:"flex gap-2 mt-3",children:[u.jsxs("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition flex items-center gap-1",children:[u.jsx(Nt,{className:"w-4 h-4"}),"Baca"]}),u.jsx("button",{onClick:()=>c(d.id,d.bookId),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition",children:"Kembalikan"})]})]})]})},d.id)}):u.jsx("p",{className:"text-gray-500 text-sm",children:"Tidak ada buku yang sedang dipinjam."})})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold text-gray-700 mb-3",children:"Riwayat Peminjaman"}),u.jsx("div",{className:"bg-white rounded-lg shadow-md p-4",children:u.jsx("div",{className:"space-y-3",children:n.length>0?n.map(d=>u.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-800 text-sm",children:d.bookTitle}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Dikembalikan: ",d.returnedDate?new Date(d.returnedDate).toISOString().split("T")[0]:"-"]})]})]}),u.jsx("button",{className:"text-blue-600 text-sm hover:underline",children:"Pinjam Lagi"})]},d.id)):u.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"Belum ada riwayat peminjaman."})})})]})]})}const LO=()=>{const t=Gr(),e=[{id:1,title:"Laskar Pelangi",author:"Andrea Hirata",category:"Fiksi",cover:"",rating:4.8,borrowed:45,available:!0,description:"Kisah inspiratif tentang sepuluh anak Melayu Belitung yang bersekolah di SD Muhammadiyah.",pages:529,year:2005},{id:2,title:"Bumi Manusia",author:"Pramoedya Ananta Toer",category:"Sejarah",cover:"",rating:4.9,borrowed:38,available:!0,description:"Novel tentang perjalanan seorang tokoh bernama Minke dalam mencari jati diri.",pages:535,year:1980},{id:3,title:"Matematika Kelas XII",author:"Tim Penulis",category:"Pelajaran",cover:"",rating:4.5,borrowed:120,available:!1,description:"Buku pelajaran matematika untuk siswa kelas XII SMA.",pages:384,year:2023},{id:4,title:"Fisika Modern",author:"Dr. Yohanes Surya",category:"Sains",cover:"",rating:4.7,borrowed:56,available:!0,description:"Penjelasan lengkap tentang fisika modern dan aplikasinya.",pages:456,year:2022},{id:5,title:"Sejarah Indonesia",author:"Prof. Anhar Gonggong",category:"Sejarah",cover:"",rating:4.6,borrowed:67,available:!0,description:"Perjalanan sejarah Indonesia dari masa ke masa.",pages:612,year:2021},{id:6,title:"Biologi Sel",author:"Dr. Bambang S.",category:"Sains",cover:"",rating:4.4,borrowed:43,available:!0,description:"Memahami struktur dan fungsi sel dalam organisme.",pages:328,year:2023}],n=r=>{t(`/book/${r.id}`,{state:{book:r}})};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl p-8 text-white",children:[u.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Selamat Datang di"}),u.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Lentera Digital "}),u.jsx("p",{className:"text-blue-100 mb-6",children:"E-Perpustakaan Sekolah - Akses ribuan buku kapan saja, dimana saja"}),u.jsxs("div",{className:"flex gap-4",children:[u.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3",children:[u.jsx("div",{className:"text-2xl font-bold",children:e.length}),u.jsx("div",{className:"text-sm text-blue-100",children:"Koleksi Buku"})]}),u.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-6 py-3",children:[u.jsx("div",{className:"text-2xl font-bold",children:"2"}),u.jsx("div",{className:"text-sm text-blue-100",children:"Sedang Dipinjam"})]})]})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[u.jsx(Hc,{className:"w-5 h-5 text-yellow-500"}),"Buku Populer"]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e.slice(0,3).map(r=>u.jsx(jf,{book:r,onClick:()=>n(r)},r.id))})]}),u.jsxs("div",{children:[u.jsxs("h3",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[u.jsx(Nt,{className:"w-5 h-5 text-green-500"}),"Baru Ditambahkan"]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:e.slice(3,6).map(r=>u.jsx(jf,{book:r,onClick:()=>n(r)},r.id))})]})]})},VO=()=>{const{state:t}=zi(),e=Gr(),n=t==null?void 0:t.book,r=Wc();if(!n)return u.jsx("div",{className:"p-6 text-center",children:"Buku tidak ditemukan"});const s=async()=>{if(!r){alert("Silakan login untuk meminjam buku"),e("/login");return}try{await jO(r.uid,n.id,r.name||r.username),alert("Buku berhasil dipinjam!"),e("/my-books")}catch(i){alert(i.message||"Gagal meminjam buku")}};return u.jsxs("div",{className:"space-y-6",children:[u.jsx("button",{onClick:()=>e(-1),className:"flex items-center gap-1 text-blue-600 hover:text-blue-700 font-medium",children:" Kembali"}),u.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:u.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[u.jsxs("div",{className:"flex-shrink-0",children:[u.jsx("div",{className:"w-48 h-64 bg-gradient-to-br from-blue-400 to-indigo-600 rounded-xl flex items-center justify-center text-8xl shadow-xl",children:n.cover?u.jsx("span",{className:"text-8xl",children:n.cover}):u.jsx("span",{className:"text-8xl",children:""})}),u.jsxs("div",{className:"mt-4 space-y-2",children:[u.jsxs("button",{onClick:s,disabled:!n.available&&n.stock<=0,className:`w-full py-3 rounded-lg font-semibold transition flex items-center justify-center gap-2 ${n.available||n.stock>0?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:[u.jsx(L1,{className:"w-5 h-5"}),n.available||n.stock>0?"Pinjam Buku":"Stok Habis"]}),n.fileUrl?u.jsxs("button",{onClick:()=>window.open(n.fileUrl,"_blank"),className:"w-full py-3 bg-green-600 text-white rounded-lg font-semibold hover:bg-green-700 transition flex items-center justify-center gap-2",children:[u.jsx(Nt,{className:"w-5 h-5"}),"Baca Sekarang"]}):u.jsxs("button",{className:"w-full py-3 bg-gray-100 text-gray-700 rounded-lg font-semibold hover:bg-gray-200 transition flex items-center justify-center gap-2",children:[u.jsx(V1,{className:"w-5 h-5"}),"Preview"]})]})]}),u.jsxs("div",{className:"flex-1 space-y-4",children:[u.jsxs("div",{children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:n.title}),u.jsx("p",{className:"text-lg text-gray-600",children:n.author})]}),u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Hc,{className:"w-5 h-5 text-yellow-500 fill-yellow-500"}),u.jsx("span",{className:"font-semibold",children:n.rating||"4.5"})]}),u.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium",children:n.category||"Umum"}),u.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${n.available||n.stock>0?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:n.available||n.stock>0?"Tersedia":"Dipinjam"})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-4 py-4",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.pages||"-"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Halaman"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.borrowed||0}),u.jsx("p",{className:"text-sm text-gray-600",children:"Dipinjam"})]}),u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-2xl font-bold text-gray-800",children:n.year||"-"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Tahun Terbit"})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-bold text-gray-800 mb-2",children:"Deskripsi"}),u.jsx("p",{className:"text-gray-600 leading-relaxed",children:n.description||"Tidak ada deskripsi."})]}),u.jsxs("div",{className:"flex gap-3 pt-4",children:[u.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:[u.jsx(M1,{className:"w-5 h-5"}),"Favorit"]}),u.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition",children:[u.jsx(Nt,{className:"w-5 h-5"}),"Baca Nanti"]})]})]})]})})]})};function q1(t,e){return function(){return t.apply(e,arguments)}}const{toString:MO}=Object.prototype,{getPrototypeOf:Km}=Object,{iterator:Kc,toStringTag:H1}=Symbol,Gc=(t=>e=>{const n=MO.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),fn=t=>(t=t.toLowerCase(),e=>Gc(e)===t),Qc=t=>e=>typeof e===t,{isArray:Gi}=Array,Vi=Qc("undefined");function Wa(t){return t!==null&&!Vi(t)&&t.constructor!==null&&!Vi(t.constructor)&&At(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const W1=fn("ArrayBuffer");function UO(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&W1(t.buffer),e}const FO=Qc("string"),At=Qc("function"),K1=Qc("number"),Ka=t=>t!==null&&typeof t=="object",BO=t=>t===!0||t===!1,su=t=>{if(Gc(t)!=="object")return!1;const e=Km(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(H1 in t)&&!(Kc in t)},zO=t=>{if(!Ka(t)||Wa(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},$O=fn("Date"),qO=fn("File"),HO=fn("Blob"),WO=fn("FileList"),KO=t=>Ka(t)&&At(t.pipe),GO=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||At(t.append)&&((e=Gc(t))==="formdata"||e==="object"&&At(t.toString)&&t.toString()==="[object FormData]"))},QO=fn("URLSearchParams"),[JO,YO,XO,ZO]=["ReadableStream","Request","Response","Headers"].map(fn),eL=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ga(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,s;if(typeof t!="object"&&(t=[t]),Gi(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{if(Wa(t))return;const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(r=0;r<o;r++)l=i[r],e.call(null,t[l],l,t)}}function G1(t,e){if(Wa(t))return null;e=e.toLowerCase();const n=Object.keys(t);let r=n.length,s;for(;r-- >0;)if(s=n[r],e===s.toLowerCase())return s;return null}const ps=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Q1=t=>!Vi(t)&&t!==ps;function Of(){const{caseless:t,skipUndefined:e}=Q1(this)&&this||{},n={},r=(s,i)=>{const o=t&&G1(n,i)||i;su(n[o])&&su(s)?n[o]=Of(n[o],s):su(s)?n[o]=Of({},s):Gi(s)?n[o]=s.slice():(!e||!Vi(s))&&(n[o]=s)};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Ga(arguments[s],r);return n}const tL=(t,e,n,{allOwnKeys:r}={})=>(Ga(e,(s,i)=>{n&&At(s)?Object.defineProperty(t,i,{value:q1(s,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,i,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:r}),t),nL=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),rL=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},sL=(t,e,n,r)=>{let s,i,o;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),i=s.length;i-- >0;)o=s[i],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&Km(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},iL=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},oL=t=>{if(!t)return null;if(Gi(t))return t;let e=t.length;if(!K1(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},aL=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Km(Uint8Array)),lL=(t,e)=>{const r=(t&&t[Kc]).call(t);let s;for(;(s=r.next())&&!s.done;){const i=s.value;e.call(t,i[0],i[1])}},uL=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},cL=fn("HTMLFormElement"),dL=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,s){return r.toUpperCase()+s}),Yv=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),hL=fn("RegExp"),J1=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ga(n,(s,i)=>{let o;(o=e(s,i,t))!==!1&&(r[i]=o||s)}),Object.defineProperties(t,r)},fL=t=>{J1(t,(e,n)=>{if(At(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(At(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},pL=(t,e)=>{const n={},r=s=>{s.forEach(i=>{n[i]=!0})};return Gi(t)?r(t):r(String(t).split(e)),n},mL=()=>{},gL=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function yL(t){return!!(t&&At(t.append)&&t[H1]==="FormData"&&t[Kc])}const vL=t=>{const e=new Array(10),n=(r,s)=>{if(Ka(r)){if(e.indexOf(r)>=0)return;if(Wa(r))return r;if(!("toJSON"in r)){e[s]=r;const i=Gi(r)?[]:{};return Ga(r,(o,l)=>{const c=n(o,s+1);!Vi(c)&&(i[l]=c)}),e[s]=void 0,i}}return r};return n(t,0)},_L=fn("AsyncFunction"),wL=t=>t&&(Ka(t)||At(t))&&At(t.then)&&At(t.catch),Y1=((t,e)=>t?setImmediate:e?((n,r)=>(ps.addEventListener("message",({source:s,data:i})=>{s===ps&&i===n&&r.length&&r.shift()()},!1),s=>{r.push(s),ps.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",At(ps.postMessage)),xL=typeof queueMicrotask<"u"?queueMicrotask.bind(ps):typeof process<"u"&&process.nextTick||Y1,EL=t=>t!=null&&At(t[Kc]),O={isArray:Gi,isArrayBuffer:W1,isBuffer:Wa,isFormData:GO,isArrayBufferView:UO,isString:FO,isNumber:K1,isBoolean:BO,isObject:Ka,isPlainObject:su,isEmptyObject:zO,isReadableStream:JO,isRequest:YO,isResponse:XO,isHeaders:ZO,isUndefined:Vi,isDate:$O,isFile:qO,isBlob:HO,isRegExp:hL,isFunction:At,isStream:KO,isURLSearchParams:QO,isTypedArray:aL,isFileList:WO,forEach:Ga,merge:Of,extend:tL,trim:eL,stripBOM:nL,inherits:rL,toFlatObject:sL,kindOf:Gc,kindOfTest:fn,endsWith:iL,toArray:oL,forEachEntry:lL,matchAll:uL,isHTMLForm:cL,hasOwnProperty:Yv,hasOwnProp:Yv,reduceDescriptors:J1,freezeMethods:fL,toObjectSet:pL,toCamelCase:dL,noop:mL,toFiniteNumber:gL,findKey:G1,global:ps,isContextDefined:Q1,isSpecCompliantForm:yL,toJSONObject:vL,isAsyncFn:_L,isThenable:wL,setImmediate:Y1,asap:xL,isIterable:EL};let Y=class X1 extends Error{static from(e,n,r,s,i,o){const l=new X1(e.message,n||e.code,r,s,i);return l.cause=e,l.name=e.name,o&&Object.assign(l,o),l}constructor(e,n,r,s,i){super(e),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),r&&(this.config=r),s&&(this.request=s),i&&(this.response=i,this.status=i.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:O.toJSONObject(this.config),code:this.code,status:this.status}}};Y.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Y.ERR_BAD_OPTION="ERR_BAD_OPTION";Y.ECONNABORTED="ECONNABORTED";Y.ETIMEDOUT="ETIMEDOUT";Y.ERR_NETWORK="ERR_NETWORK";Y.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Y.ERR_DEPRECATED="ERR_DEPRECATED";Y.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Y.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Y.ERR_CANCELED="ERR_CANCELED";Y.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Y.ERR_INVALID_URL="ERR_INVALID_URL";const TL=null;function Lf(t){return O.isPlainObject(t)||O.isArray(t)}function Z1(t){return O.endsWith(t,"[]")?t.slice(0,-2):t}function Xv(t,e,n){return t?t.concat(e).map(function(s,i){return s=Z1(s),!n&&i?"["+s+"]":s}).join(n?".":""):e}function SL(t){return O.isArray(t)&&!t.some(Lf)}const bL=O.toFlatObject(O,{},null,function(e){return/^is[A-Z]/.test(e)});function Jc(t,e,n){if(!O.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=O.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(b,k){return!O.isUndefined(k[b])});const r=n.metaTokens,s=n.visitor||h,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&O.isSpecCompliantForm(e);if(!O.isFunction(s))throw new TypeError("visitor must be a function");function d(_){if(_===null)return"";if(O.isDate(_))return _.toISOString();if(O.isBoolean(_))return _.toString();if(!c&&O.isBlob(_))throw new Y("Blob is not supported. Use a Buffer instead.");return O.isArrayBuffer(_)||O.isTypedArray(_)?c&&typeof Blob=="function"?new Blob([_]):Buffer.from(_):_}function h(_,b,k){let S=_;if(_&&!k&&typeof _=="object"){if(O.endsWith(b,"{}"))b=r?b:b.slice(0,-2),_=JSON.stringify(_);else if(O.isArray(_)&&SL(_)||(O.isFileList(_)||O.endsWith(b,"[]"))&&(S=O.toArray(_)))return b=Z1(b),S.forEach(function(N,j){!(O.isUndefined(N)||N===null)&&e.append(o===!0?Xv([b],j,i):o===null?b:b+"[]",d(N))}),!1}return Lf(_)?!0:(e.append(Xv(k,b,i),d(_)),!1)}const p=[],m=Object.assign(bL,{defaultVisitor:h,convertValue:d,isVisitable:Lf});function x(_,b){if(!O.isUndefined(_)){if(p.indexOf(_)!==-1)throw Error("Circular reference detected in "+b.join("."));p.push(_),O.forEach(_,function(S,E){(!(O.isUndefined(S)||S===null)&&s.call(e,S,O.isString(E)?E.trim():E,b,m))===!0&&x(S,b?b.concat(E):[E])}),p.pop()}}if(!O.isObject(t))throw new TypeError("data must be an object");return x(t),e}function Zv(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function Gm(t,e){this._pairs=[],t&&Jc(t,this,e)}const eS=Gm.prototype;eS.append=function(e,n){this._pairs.push([e,n])};eS.toString=function(e){const n=e?function(r){return e.call(this,r,Zv)}:Zv;return this._pairs.map(function(s){return n(s[0])+"="+n(s[1])},"").join("&")};function IL(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function tS(t,e,n){if(!e)return t;const r=n&&n.encode||IL,s=O.isFunction(n)?{serialize:n}:n,i=s&&s.serialize;let o;if(i?o=i(e,s):o=O.isURLSearchParams(e)?e.toString():new Gm(e,s).toString(r),o){const l=t.indexOf("#");l!==-1&&(t=t.slice(0,l)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class e_{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){O.forEach(this.handlers,function(r){r!==null&&e(r)})}}const nS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},kL=typeof URLSearchParams<"u"?URLSearchParams:Gm,NL=typeof FormData<"u"?FormData:null,AL=typeof Blob<"u"?Blob:null,RL={isBrowser:!0,classes:{URLSearchParams:kL,FormData:NL,Blob:AL},protocols:["http","https","file","blob","url","data"]},Qm=typeof window<"u"&&typeof document<"u",Vf=typeof navigator=="object"&&navigator||void 0,CL=Qm&&(!Vf||["ReactNative","NativeScript","NS"].indexOf(Vf.product)<0),PL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",jL=Qm&&window.location.href||"http://localhost",DL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Qm,hasStandardBrowserEnv:CL,hasStandardBrowserWebWorkerEnv:PL,navigator:Vf,origin:jL},Symbol.toStringTag,{value:"Module"})),dt={...DL,...RL};function OL(t,e){return Jc(t,new dt.classes.URLSearchParams,{visitor:function(n,r,s,i){return dt.isNode&&O.isBuffer(n)?(this.append(r,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...e})}function LL(t){return O.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function VL(t){const e={},n=Object.keys(t);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],e[i]=t[i];return e}function rS(t){function e(n,r,s,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&O.isArray(s)?s.length:o,c?(O.hasOwnProp(s,o)?s[o]=[s[o],r]:s[o]=r,!l):((!s[o]||!O.isObject(s[o]))&&(s[o]=[]),e(n,r,s[o],i)&&O.isArray(s[o])&&(s[o]=VL(s[o])),!l)}if(O.isFormData(t)&&O.isFunction(t.entries)){const n={};return O.forEachEntry(t,(r,s)=>{e(LL(r),s,n,0)}),n}return null}function ML(t,e,n){if(O.isString(t))try{return(e||JSON.parse)(t),O.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const Qa={transitional:nS,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const r=n.getContentType()||"",s=r.indexOf("application/json")>-1,i=O.isObject(e);if(i&&O.isHTMLForm(e)&&(e=new FormData(e)),O.isFormData(e))return s?JSON.stringify(rS(e)):e;if(O.isArrayBuffer(e)||O.isBuffer(e)||O.isStream(e)||O.isFile(e)||O.isBlob(e)||O.isReadableStream(e))return e;if(O.isArrayBufferView(e))return e.buffer;if(O.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(r.indexOf("application/x-www-form-urlencoded")>-1)return OL(e,this.formSerializer).toString();if((l=O.isFileList(e))||r.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Jc(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||s?(n.setContentType("application/json",!1),ML(e)):e}],transformResponse:[function(e){const n=this.transitional||Qa.transitional,r=n&&n.forcedJSONParsing,s=this.responseType==="json";if(O.isResponse(e)||O.isReadableStream(e))return e;if(e&&O.isString(e)&&(r&&!this.responseType||s)){const o=!(n&&n.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?Y.from(l,Y.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:dt.classes.FormData,Blob:dt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};O.forEach(["delete","get","head","post","put","patch"],t=>{Qa.headers[t]={}});const UL=O.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),FL=t=>{const e={};let n,r,s;return t&&t.split(`
`).forEach(function(o){s=o.indexOf(":"),n=o.substring(0,s).trim().toLowerCase(),r=o.substring(s+1).trim(),!(!n||e[n]&&UL[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},t_=Symbol("internals");function Eo(t){return t&&String(t).trim().toLowerCase()}function iu(t){return t===!1||t==null?t:O.isArray(t)?t.map(iu):String(t)}function BL(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const zL=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function oh(t,e,n,r,s){if(O.isFunction(r))return r.call(this,e,n);if(s&&(e=n),!!O.isString(e)){if(O.isString(r))return e.indexOf(r)!==-1;if(O.isRegExp(r))return r.test(e)}}function $L(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function qL(t,e){const n=O.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(s,i,o){return this[r].call(this,e,s,i,o)},configurable:!0})})}let Rt=class{constructor(e){e&&this.set(e)}set(e,n,r){const s=this;function i(l,c,d){const h=Eo(c);if(!h)throw new Error("header name must be a non-empty string");const p=O.findKey(s,h);(!p||s[p]===void 0||d===!0||d===void 0&&s[p]!==!1)&&(s[p||c]=iu(l))}const o=(l,c)=>O.forEach(l,(d,h)=>i(d,h,c));if(O.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(O.isString(e)&&(e=e.trim())&&!zL(e))o(FL(e),n);else if(O.isObject(e)&&O.isIterable(e)){let l={},c,d;for(const h of e){if(!O.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[d=h[0]]=(c=l[d])?O.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,n)}else e!=null&&i(n,e,r);return this}get(e,n){if(e=Eo(e),e){const r=O.findKey(this,e);if(r){const s=this[r];if(!n)return s;if(n===!0)return BL(s);if(O.isFunction(n))return n.call(this,s,r);if(O.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Eo(e),e){const r=O.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||oh(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let s=!1;function i(o){if(o=Eo(o),o){const l=O.findKey(r,o);l&&(!n||oh(r,r[l],l,n))&&(delete r[l],s=!0)}}return O.isArray(e)?e.forEach(i):i(e),s}clear(e){const n=Object.keys(this);let r=n.length,s=!1;for(;r--;){const i=n[r];(!e||oh(this,this[i],i,e,!0))&&(delete this[i],s=!0)}return s}normalize(e){const n=this,r={};return O.forEach(this,(s,i)=>{const o=O.findKey(r,i);if(o){n[o]=iu(s),delete n[i];return}const l=e?$L(i):String(i).trim();l!==i&&delete n[i],n[l]=iu(s),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return O.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=e&&O.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(s=>r.set(s)),r}static accessor(e){const r=(this[t_]=this[t_]={accessors:{}}).accessors,s=this.prototype;function i(o){const l=Eo(o);r[l]||(qL(s,o),r[l]=!0)}return O.isArray(e)?e.forEach(i):i(e),this}};Rt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);O.reduceDescriptors(Rt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(r){this[n]=r}}});O.freezeMethods(Rt);function ah(t,e){const n=this||Qa,r=e||n,s=Rt.from(r.headers);let i=r.data;return O.forEach(t,function(l){i=l.call(n,i,s.normalize(),e?e.status:void 0)}),s.normalize(),i}function sS(t){return!!(t&&t.__CANCEL__)}let Ja=class extends Y{constructor(e,n,r){super(e??"canceled",Y.ERR_CANCELED,n,r),this.name="CanceledError",this.__CANCEL__=!0}};function iS(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Y("Request failed with status code "+n.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function HL(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function WL(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const d=Date.now(),h=r[i];o||(o=d),n[s]=c,r[s]=d;let p=i,m=0;for(;p!==s;)m+=n[p++],p=p%t;if(s=(s+1)%t,s===i&&(i=(i+1)%t),d-o<e)return;const x=h&&d-h;return x?Math.round(m*1e3/x):void 0}}function KL(t,e){let n=0,r=1e3/e,s,i;const o=(d,h=Date.now())=>{n=h,s=null,i&&(clearTimeout(i),i=null),t(...d)};return[(...d)=>{const h=Date.now(),p=h-n;p>=r?o(d,h):(s=d,i||(i=setTimeout(()=>{i=null,o(s)},r-p)))},()=>s&&o(s)]}const Xu=(t,e,n=3)=>{let r=0;const s=WL(50,250);return KL(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-r,d=s(c),h=o<=l;r=o;const p={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&h?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(p)},n)},n_=(t,e)=>{const n=t!=null;return[r=>e[0]({lengthComputable:n,total:t,loaded:r}),e[1]]},r_=t=>(...e)=>O.asap(()=>t(...e)),GL=dt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,dt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(dt.origin),dt.navigator&&/(msie|trident)/i.test(dt.navigator.userAgent)):()=>!0,QL=dt.hasStandardBrowserEnv?{write(t,e,n,r,s,i,o){if(typeof document>"u")return;const l=[`${t}=${encodeURIComponent(e)}`];O.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),O.isString(r)&&l.push(`path=${r}`),O.isString(s)&&l.push(`domain=${s}`),i===!0&&l.push("secure"),O.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function JL(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function YL(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function oS(t,e,n){let r=!JL(e);return t&&(r||n==!1)?YL(t,e):e}const s_=t=>t instanceof Rt?{...t}:t;function Ds(t,e){e=e||{};const n={};function r(d,h,p,m){return O.isPlainObject(d)&&O.isPlainObject(h)?O.merge.call({caseless:m},d,h):O.isPlainObject(h)?O.merge({},h):O.isArray(h)?h.slice():h}function s(d,h,p,m){if(O.isUndefined(h)){if(!O.isUndefined(d))return r(void 0,d,p,m)}else return r(d,h,p,m)}function i(d,h){if(!O.isUndefined(h))return r(void 0,h)}function o(d,h){if(O.isUndefined(h)){if(!O.isUndefined(d))return r(void 0,d)}else return r(void 0,h)}function l(d,h,p){if(p in e)return r(d,h);if(p in t)return r(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,h,p)=>s(s_(d),s_(h),p,!0)};return O.forEach(Object.keys({...t,...e}),function(h){const p=c[h]||s,m=p(t[h],e[h],h);O.isUndefined(m)&&p!==l||(n[h]=m)}),n}const aS=t=>{const e=Ds({},t);let{data:n,withXSRFToken:r,xsrfHeaderName:s,xsrfCookieName:i,headers:o,auth:l}=e;if(e.headers=o=Rt.from(o),e.url=tS(oS(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),O.isFormData(n)){if(dt.hasStandardBrowserEnv||dt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(O.isFunction(n.getHeaders)){const c=n.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([h,p])=>{d.includes(h.toLowerCase())&&o.set(h,p)})}}if(dt.hasStandardBrowserEnv&&(r&&O.isFunction(r)&&(r=r(e)),r||r!==!1&&GL(e.url))){const c=s&&i&&QL.read(i);c&&o.set(s,c)}return e},XL=typeof XMLHttpRequest<"u",ZL=XL&&function(t){return new Promise(function(n,r){const s=aS(t);let i=s.data;const o=Rt.from(s.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=s,h,p,m,x,_;function b(){x&&x(),_&&_(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let k=new XMLHttpRequest;k.open(s.method.toUpperCase(),s.url,!0),k.timeout=s.timeout;function S(){if(!k)return;const N=Rt.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),F={data:!l||l==="text"||l==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:N,config:t,request:k};iS(function(T){n(T),b()},function(T){r(T),b()},F),k=null}"onloadend"in k?k.onloadend=S:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(S)},k.onabort=function(){k&&(r(new Y("Request aborted",Y.ECONNABORTED,t,k)),k=null)},k.onerror=function(j){const F=j&&j.message?j.message:"Network Error",V=new Y(F,Y.ERR_NETWORK,t,k);V.event=j||null,r(V),k=null},k.ontimeout=function(){let j=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const F=s.transitional||nS;s.timeoutErrorMessage&&(j=s.timeoutErrorMessage),r(new Y(j,F.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,t,k)),k=null},i===void 0&&o.setContentType(null),"setRequestHeader"in k&&O.forEach(o.toJSON(),function(j,F){k.setRequestHeader(F,j)}),O.isUndefined(s.withCredentials)||(k.withCredentials=!!s.withCredentials),l&&l!=="json"&&(k.responseType=s.responseType),d&&([m,_]=Xu(d,!0),k.addEventListener("progress",m)),c&&k.upload&&([p,x]=Xu(c),k.upload.addEventListener("progress",p),k.upload.addEventListener("loadend",x)),(s.cancelToken||s.signal)&&(h=N=>{k&&(r(!N||N.type?new Ja(null,t,k):N),k.abort(),k=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const E=HL(s.url);if(E&&dt.protocols.indexOf(E)===-1){r(new Y("Unsupported protocol "+E+":",Y.ERR_BAD_REQUEST,t));return}k.send(i||null)})},e6=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let r=new AbortController,s;const i=function(d){if(!s){s=!0,l();const h=d instanceof Error?d:this.reason;r.abort(h instanceof Y?h:new Ja(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new Y(`timeout of ${e}ms exceeded`,Y.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),t=null)};t.forEach(d=>d.addEventListener("abort",i));const{signal:c}=r;return c.unsubscribe=()=>O.asap(l),c}},t6=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let r=0,s;for(;r<n;)s=r+e,yield t.slice(r,s),r=s},n6=async function*(t,e){for await(const n of r6(t))yield*t6(n,e)},r6=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:r}=await e.read();if(n)break;yield r}}finally{await e.cancel()}},i_=(t,e,n,r)=>{const s=n6(t,e);let i=0,o,l=c=>{o||(o=!0,r&&r(c))};return new ReadableStream({async pull(c){try{const{done:d,value:h}=await s.next();if(d){l(),c.close();return}let p=h.byteLength;if(n){let m=i+=p;n(m)}c.enqueue(new Uint8Array(h))}catch(d){throw l(d),d}},cancel(c){return l(c),s.return()}},{highWaterMark:2})},o_=64*1024,{isFunction:Ol}=O,s6=(({Request:t,Response:e})=>({Request:t,Response:e}))(O.global),{ReadableStream:a_,TextEncoder:l_}=O.global,u_=(t,...e)=>{try{return!!t(...e)}catch{return!1}},i6=t=>{t=O.merge.call({skipUndefined:!0},s6,t);const{fetch:e,Request:n,Response:r}=t,s=e?Ol(e):typeof fetch=="function",i=Ol(n),o=Ol(r);if(!s)return!1;const l=s&&Ol(a_),c=s&&(typeof l_=="function"?(_=>b=>_.encode(b))(new l_):async _=>new Uint8Array(await new n(_).arrayBuffer())),d=i&&l&&u_(()=>{let _=!1;const b=new n(dt.origin,{body:new a_,method:"POST",get duplex(){return _=!0,"half"}}).headers.has("Content-Type");return _&&!b}),h=o&&l&&u_(()=>O.isReadableStream(new r("").body)),p={stream:h&&(_=>_.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(_=>{!p[_]&&(p[_]=(b,k)=>{let S=b&&b[_];if(S)return S.call(b);throw new Y(`Response type '${_}' is not supported`,Y.ERR_NOT_SUPPORT,k)})});const m=async _=>{if(_==null)return 0;if(O.isBlob(_))return _.size;if(O.isSpecCompliantForm(_))return(await new n(dt.origin,{method:"POST",body:_}).arrayBuffer()).byteLength;if(O.isArrayBufferView(_)||O.isArrayBuffer(_))return _.byteLength;if(O.isURLSearchParams(_)&&(_=_+""),O.isString(_))return(await c(_)).byteLength},x=async(_,b)=>{const k=O.toFiniteNumber(_.getContentLength());return k??m(b)};return async _=>{let{url:b,method:k,data:S,signal:E,cancelToken:N,timeout:j,onDownloadProgress:F,onUploadProgress:V,responseType:T,headers:v,withCredentials:w="same-origin",fetchOptions:I}=aS(_),R=e||fetch;T=T?(T+"").toLowerCase():"text";let C=e6([E,N&&N.toAbortSignal()],j),A=null;const ge=C&&C.unsubscribe&&(()=>{C.unsubscribe()});let zt;try{if(V&&d&&k!=="get"&&k!=="head"&&(zt=await x(v,S))!==0){let le=new n(b,{method:"POST",body:S,duplex:"half"}),he;if(O.isFormData(S)&&(he=le.headers.get("content-type"))&&v.setContentType(he),le.body){const[Zt,Je]=n_(zt,Xu(r_(V)));S=i_(le.body,o_,Zt,Je)}}O.isString(w)||(w=w?"include":"omit");const rt=i&&"credentials"in n.prototype,Zn={...I,signal:C,method:k.toUpperCase(),headers:v.normalize().toJSON(),body:S,duplex:"half",credentials:rt?w:void 0};A=i&&new n(b,Zn);let $=await(i?R(A,I):R(b,Zn));const G=h&&(T==="stream"||T==="response");if(h&&(F||G&&ge)){const le={};["status","statusText","headers"].forEach(pn=>{le[pn]=$[pn]});const he=O.toFiniteNumber($.headers.get("content-length")),[Zt,Je]=F&&n_(he,Xu(r_(F),!0))||[];$=new r(i_($.body,o_,Zt,()=>{Je&&Je(),ge&&ge()}),le)}T=T||"text";let ee=await p[O.findKey(p,T)||"text"]($,_);return!G&&ge&&ge(),await new Promise((le,he)=>{iS(le,he,{data:ee,headers:Rt.from($.headers),status:$.status,statusText:$.statusText,config:_,request:A})})}catch(rt){throw ge&&ge(),rt&&rt.name==="TypeError"&&/Load failed|fetch/i.test(rt.message)?Object.assign(new Y("Network Error",Y.ERR_NETWORK,_,A),{cause:rt.cause||rt}):Y.from(rt,rt&&rt.code,_,A)}}},o6=new Map,lS=t=>{let e=t&&t.env||{};const{fetch:n,Request:r,Response:s}=e,i=[r,s,n];let o=i.length,l=o,c,d,h=o6;for(;l--;)c=i[l],d=h.get(c),d===void 0&&h.set(c,d=l?new Map:i6(e)),h=d;return d};lS();const Jm={http:TL,xhr:ZL,fetch:{get:lS}};O.forEach(Jm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const c_=t=>`- ${t}`,a6=t=>O.isFunction(t)||t===null||t===!1;function l6(t,e){t=O.isArray(t)?t:[t];const{length:n}=t;let r,s;const i={};for(let o=0;o<n;o++){r=t[o];let l;if(s=r,!a6(r)&&(s=Jm[(l=String(r)).toLowerCase()],s===void 0))throw new Y(`Unknown adapter '${l}'`);if(s&&(O.isFunction(s)||(s=s.get(e))))break;i[l||"#"+o]=s}if(!s){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=n?o.length>1?`since :
`+o.map(c_).join(`
`):" "+c_(o[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return s}const uS={getAdapter:l6,adapters:Jm};function lh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Ja(null,t)}function d_(t){return lh(t),t.headers=Rt.from(t.headers),t.data=ah.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),uS.getAdapter(t.adapter||Qa.adapter,t)(t).then(function(r){return lh(t),r.data=ah.call(t,t.transformResponse,r),r.headers=Rt.from(r.headers),r},function(r){return sS(r)||(lh(t),r&&r.response&&(r.response.data=ah.call(t,t.transformResponse,r.response),r.response.headers=Rt.from(r.response.headers))),Promise.reject(r)})}const cS="1.13.3",Yc={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Yc[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const h_={};Yc.transitional=function(e,n,r){function s(i,o){return"[Axios v"+cS+"] Transitional option '"+i+"'"+o+(r?". "+r:"")}return(i,o,l)=>{if(e===!1)throw new Y(s(o," has been removed"+(n?" in "+n:"")),Y.ERR_DEPRECATED);return n&&!h_[o]&&(h_[o]=!0,console.warn(s(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,l):!0}};Yc.spelling=function(e){return(n,r)=>(console.warn(`${r} is likely a misspelling of ${e}`),!0)};function u6(t,e,n){if(typeof t!="object")throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const i=r[s],o=e[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new Y("option "+i+" must be "+c,Y.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Y("Unknown option "+i,Y.ERR_BAD_OPTION)}}const ou={assertOptions:u6,validators:Yc},vn=ou.validators;let ws=class{constructor(e){this.defaults=e||{},this.interceptors={request:new e_,response:new e_}}async request(e,n){try{return await this._request(e,n)}catch(r){if(r instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const i=s.stack?s.stack.replace(/^.+\n/,""):"";try{r.stack?i&&!String(r.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+i):r.stack=i}catch{}}throw r}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ds(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:i}=n;r!==void 0&&ou.assertOptions(r,{silentJSONParsing:vn.transitional(vn.boolean),forcedJSONParsing:vn.transitional(vn.boolean),clarifyTimeoutError:vn.transitional(vn.boolean)},!1),s!=null&&(O.isFunction(s)?n.paramsSerializer={serialize:s}:ou.assertOptions(s,{encode:vn.function,serialize:vn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),ou.assertOptions(n,{baseUrl:vn.spelling("baseURL"),withXsrfToken:vn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&O.merge(i.common,i[n.method]);i&&O.forEach(["delete","get","head","post","put","patch","common"],_=>{delete i[_]}),n.headers=Rt.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(b){typeof b.runWhen=="function"&&b.runWhen(n)===!1||(c=c&&b.synchronous,l.unshift(b.fulfilled,b.rejected))});const d=[];this.interceptors.response.forEach(function(b){d.push(b.fulfilled,b.rejected)});let h,p=0,m;if(!c){const _=[d_.bind(this),void 0];_.unshift(...l),_.push(...d),m=_.length,h=Promise.resolve(n);let b=n;for(;p<m;)h=h.then(_[p++]).then(k=>{b=k!==void 0?k:b}).catch(_[p++]).then(()=>b);return h}m=l.length;let x=n;for(;p<m;){const _=l[p++],b=l[p++];try{x=_(x)}catch(k){b.call(this,k);break}}try{h=d_.call(this,x)}catch(_){return Promise.reject(_)}for(p=0,m=d.length;p<m;)h=h.then(d[p++]).catch(d[p++]);return h}getUri(e){e=Ds(this.defaults,e);const n=oS(e.baseURL,e.url,e.allowAbsoluteUrls);return tS(n,e.params,e.paramsSerializer)}};O.forEach(["delete","get","head","options"],function(e){ws.prototype[e]=function(n,r){return this.request(Ds(r||{},{method:e,url:n,data:(r||{}).data}))}});O.forEach(["post","put","patch"],function(e){function n(r){return function(i,o,l){return this.request(Ds(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}ws.prototype[e]=n(),ws.prototype[e+"Form"]=n(!0)});let c6=class dS{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const r=this;this.promise.then(s=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](s);r._listeners=null}),this.promise.then=s=>{let i;const o=new Promise(l=>{r.subscribe(l),i=l}).then(s);return o.cancel=function(){r.unsubscribe(i)},o},e(function(i,o,l){r.reason||(r.reason=new Ja(i,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=r=>{e.abort(r)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new dS(function(s){e=s}),cancel:e}}};function d6(t){return function(n){return t.apply(null,n)}}function h6(t){return O.isObject(t)&&t.isAxiosError===!0}const Mf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Mf).forEach(([t,e])=>{Mf[e]=t});function hS(t){const e=new ws(t),n=q1(ws.prototype.request,e);return O.extend(n,ws.prototype,e,{allOwnKeys:!0}),O.extend(n,e,null,{allOwnKeys:!0}),n.create=function(s){return hS(Ds(t,s))},n}const Oe=hS(Qa);Oe.Axios=ws;Oe.CanceledError=Ja;Oe.CancelToken=c6;Oe.isCancel=sS;Oe.VERSION=cS;Oe.toFormData=Jc;Oe.AxiosError=Y;Oe.Cancel=Oe.CanceledError;Oe.all=function(e){return Promise.all(e)};Oe.spread=d6;Oe.isAxiosError=h6;Oe.mergeConfig=Ds;Oe.AxiosHeaders=Rt;Oe.formToJSON=t=>rS(O.isHTMLForm(t)?new FormData(t):t);Oe.getAdapter=uS.getAdapter;Oe.HttpStatusCode=Mf;Oe.default=Oe;const{Axios:W6,AxiosError:K6,CanceledError:G6,isCancel:Q6,CancelToken:J6,VERSION:Y6,all:X6,Cancel:Z6,isAxiosError:eV,spread:tV,toFormData:nV,AxiosHeaders:rV,HttpStatusCode:sV,formToJSON:iV,getAdapter:oV,mergeConfig:aV}=Oe,Ym="literacy_tasks",f6="https://sc-app-bk-2025.web.app/api/integration/literacy",p6=async t=>{try{const e={source:"e-perpustakaan",type:"new_literacy_task",data:t,timestamp:new Date().toISOString()};await Oe.post(f6,e,{timeout:5e3}),console.log("Successfully sent task to external dashboard")}catch(e){console.warn("Failed to send task to external dashboard:",e.message)}},fS=async()=>{try{const t=Rn(Mt(Ee,Ym),Ba("date","desc"));return(await Fs(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting literacy tasks:",t),t}},m6=async t=>{try{const e={...t,createdAt:new Date().toISOString(),status:"active",submissions:0},n=await bm(Mt(Ee,Ym),e);return p6({id:n.id,...e}),{id:n.id,...e}}catch(e){throw console.error("Error adding literacy task:",e),e}},g6=async t=>{try{return await Sm(Xt(Ee,Ym,t)),!0}catch(e){throw console.error("Error deleting literacy task:",e),e}},y6=()=>{const[t,e]=L.useState("challenge"),[n,r]=L.useState(null),[s,i]=L.useState(!0),[o,l]=L.useState({bookTitle:"",author:"",summary:"",duration:""});L.useEffect(()=>{c()},[]);const c=async()=>{try{const p=(await fS()).find(m=>m.status==="active");r(p)}catch(h){console.error("Failed to fetch literacy tasks:",h)}finally{i(!1)}},d=h=>{h.preventDefault(),alert("Laporan literasi berhasil dikirim! Poin +"+((n==null?void 0:n.points)||50)),l({bookTitle:"",author:"",summary:"",duration:""})};return u.jsxs("div",{className:"space-y-6 pb-20",children:[u.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-2xl p-6 text-white shadow-xl relative overflow-hidden",children:[u.jsxs("div",{className:"relative z-10",children:[u.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Program Literasi"}),u.jsx("p",{className:"text-blue-100 opacity-90",children:'"Buku adalah jendela dunia. Mari membaca!"'}),u.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[u.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-lg p-3 flex items-center gap-3",children:[u.jsx(Gv,{className:"w-8 h-8 text-yellow-300"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-blue-100",children:"Total Poin"}),u.jsx("p",{className:"font-bold text-xl",children:"1,250"})]})]}),u.jsxs("div",{className:"bg-white/20 backdrop-blur-md rounded-lg p-3 flex items-center gap-3",children:[u.jsx(Nt,{className:"w-8 h-8 text-blue-200"}),u.jsxs("div",{children:[u.jsx("p",{className:"text-xs text-blue-100",children:"Buku Dibaca"}),u.jsx("p",{className:"font-bold text-xl",children:"12"})]})]})]})]}),u.jsx("div",{className:"absolute top-0 right-0 -mt-4 -mr-4 w-32 h-32 bg-white opacity-10 rounded-full blur-2xl"}),u.jsx("div",{className:"absolute bottom-0 right-1/2 w-24 h-24 bg-blue-400 opacity-20 rounded-full blur-xl"})]}),u.jsxs("div",{className:"flex bg-white p-1 rounded-xl shadow-sm border",children:[u.jsx("button",{onClick:()=>e("challenge"),className:`flex-1 py-2 text-sm font-medium rounded-lg transition ${t==="challenge"?"bg-blue-50 text-blue-600 shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Tantangan Minggu Ini"}),u.jsx("button",{onClick:()=>e("history"),className:`flex-1 py-2 text-sm font-medium rounded-lg transition ${t==="history"?"bg-blue-50 text-blue-600 shadow-sm":"text-gray-500 hover:bg-gray-50"}`,children:"Riwayat Bacaan"})]}),t==="challenge"?u.jsx("div",{className:"space-y-6",children:s?u.jsx("div",{className:"text-center py-10 text-gray-500",children:"Memuat tantangan..."}):n?u.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-md border-l-4 border-blue-500",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1",children:[u.jsx(zm,{className:"w-3 h-3"})," ",n.date]}),u.jsx("span",{className:"text-xs font-semibold text-orange-500 bg-orange-50 px-2 py-1 rounded",children:"Pending"})]}),u.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:n.title}),u.jsx("p",{className:"text-gray-600 text-sm mb-4 leading-relaxed whitespace-pre-line",children:n.description}),u.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(zc,{className:"w-4 h-4"})," Batas Waktu: ",n.date]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Gv,{className:"w-4 h-4 text-yellow-500"})," ",n.points||50," Poin"]})]}),u.jsx("hr",{className:"border-gray-100 my-4"}),u.jsxs("h4",{className:"font-semibold text-gray-800 mb-4 flex items-center gap-2",children:[u.jsx($c,{className:"w-4 h-4 text-blue-600"}),"Laporan Literasi"]}),u.jsxs("form",{onSubmit:d,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Judul Buku / Cerpen"}),u.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",placeholder:"Contoh: Laskar Pelangi",value:o.bookTitle,onChange:h=>l({...o,bookTitle:h.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Penulis"}),u.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",placeholder:"Nama Penulis",value:o.author,onChange:h=>l({...o,author:h.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durasi Baca"}),u.jsxs("select",{className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",value:o.duration,onChange:h=>l({...o,duration:h.target.value}),children:[u.jsx("option",{value:"",children:"Pilih..."}),u.jsx("option",{value:"15",children:"15 Menit"}),u.jsx("option",{value:"30",children:"30 Menit"}),u.jsx("option",{value:"45",children:"45 Menit"}),u.jsx("option",{value:"60",children:"> 1 Jam"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ringkasan / Hikmah"}),u.jsx("textarea",{required:!0,rows:"4",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm resize-none",placeholder:"Ceritakan sedikit apa yang kamu baca...",value:o.summary,onChange:h=>l({...o,summary:h.target.value})})]}),u.jsx("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-xl shadow-lg shadow-blue-200 transition active:scale-95",children:"Kirim Laporan"})]})]}):u.jsxs("div",{className:"text-center py-10 bg-white rounded-2xl border border-dashed border-gray-300",children:[u.jsx(Nt,{className:"w-12 h-12 text-gray-300 mx-auto mb-3"}),u.jsx("p",{className:"text-gray-500",children:"Belum ada tugas literasi aktif minggu ini."})]})}):u.jsxs("div",{className:"space-y-4",children:[[1,2,3].map(h=>u.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex items-center gap-4",children:[u.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center flex-shrink-0",children:u.jsx(O1,{className:"w-6 h-6 text-green-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h4",{className:"font-bold text-gray-800 text-sm",children:"Bumi Manusia"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Pramoedya Ananta Toer  20 Jan 2026"})]}),u.jsxs("div",{className:"text-right",children:[u.jsx("span",{className:"block font-bold text-green-600",children:"+50"}),u.jsx("span",{className:"text-[10px] text-gray-400",children:"Poin"})]})]},h)),u.jsx("button",{className:"w-full py-3 text-sm text-gray-500 font-medium hover:bg-gray-50 rounded-lg transition",children:"Lihat Semua Riwayat"})]})]})},v6=()=>{const t=Wc(),e=()=>{window.confirm("Apakah Anda yakin ingin keluar?")&&B1()};return u.jsxs("div",{className:"space-y-6 pb-20",children:[u.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 flex items-center gap-4",children:[u.jsx("div",{className:"w-20 h-20 bg-blue-600 rounded-full flex items-center justify-center text-white text-3xl font-bold shadow-lg shadow-blue-200",children:(t==null?void 0:t.role)==="admin"?"A":"S"}),u.jsxs("div",{children:[u.jsx("h1",{className:"text-xl font-bold text-gray-800",children:(t==null?void 0:t.role)==="admin"?"Administrator":"Siswa Sekolah"}),u.jsx("p",{className:"text-gray-500 text-sm capitalize",children:(t==null?void 0:t.role)||"Pengguna"})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[u.jsx("div",{className:"p-4 border-b border-gray-50",children:u.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:"Akun Saya"})}),u.jsxs("div",{className:"divide-y divide-gray-50",children:[u.jsxs("button",{className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition text-left",children:[u.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-50 flex items-center justify-center text-blue-600",children:u.jsx(Hm,{className:"w-4 h-4"})}),u.jsx("span",{className:"font-medium",children:"Edit Profil"})]}),u.jsx("span",{className:"text-xs text-gray-400",children:"Segera Hadir"})]}),u.jsxs("button",{className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition text-left",children:[u.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-50 flex items-center justify-center text-purple-600",children:u.jsx(Bm,{className:"w-4 h-4"})}),u.jsx("span",{className:"font-medium",children:"Notifikasi"})]}),u.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500"})]}),u.jsxs("button",{className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition text-left",children:[u.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-pink-50 flex items-center justify-center text-pink-600",children:u.jsx(M1,{className:"w-4 h-4"})}),u.jsx("span",{className:"font-medium",children:"Buku Favorit"})]}),u.jsx("span",{className:"text-gray-400 text-sm",children:"12"})]})]})]}),u.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[u.jsx("div",{className:"p-4 border-b border-gray-50",children:u.jsx("h2",{className:"text-sm font-semibold text-gray-400 uppercase tracking-wider",children:"Lainnya"})}),u.jsxs("div",{className:"divide-y divide-gray-50",children:[u.jsx("button",{className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition text-left",children:u.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-gray-600",children:u.jsx(bO,{className:"w-4 h-4"})}),u.jsx("span",{className:"font-medium",children:"Keamanan & Privasi"})]})}),u.jsx("button",{className:"w-full flex items-center justify-between p-4 hover:bg-gray-50 transition text-left",children:u.jsxs("div",{className:"flex items-center gap-3 text-gray-700",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-gray-100 flex items-center justify-center text-gray-600",children:u.jsx(qc,{className:"w-4 h-4"})}),u.jsx("span",{className:"font-medium",children:"Pengaturan Aplikasi"})]})}),u.jsx("button",{onClick:e,className:"w-full flex items-center justify-between p-4 hover:bg-red-50 transition text-left group",children:u.jsxs("div",{className:"flex items-center gap-3 text-red-600",children:[u.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center group-hover:bg-red-200 transition",children:u.jsx($m,{className:"w-4 h-4"})}),u.jsx("span",{className:"font-medium",children:"Keluar"})]})})]})]}),u.jsx("div",{className:"text-center text-gray-400 text-xs py-4",children:"Versi Aplikasi 1.0.0"})]})},_6=()=>{const t=Gr(),e=zi(),n=s=>e.pathname===s,r=()=>{window.confirm("Apakah Anda yakin ingin keluar?")&&B1()};return u.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[u.jsx("div",{className:"bg-white shadow-md sticky top-0 z-10",children:u.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-4",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(ba,{className:"w-8 h-8 text-blue-600"}),u.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Lentera Digital"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("button",{onClick:r,className:"p-2 hover:bg-red-50 text-gray-600 hover:text-red-600 rounded-full transition",title:"Keluar Aplikasi",children:u.jsx($m,{className:"w-6 h-6"})}),u.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center text-white font-bold",children:"S"})]})]}),u.jsxs("div",{className:"relative",children:[u.jsx(U1,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),u.jsx("input",{type:"text",placeholder:"Cari judul buku, penulis, atau kategori...",className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-xl focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})}),u.jsx("div",{className:"max-w-6xl mx-auto px-4 py-6",children:u.jsx(Ux,{})}),u.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white shadow-lg border-t z-50",children:u.jsx("div",{className:"max-w-6xl mx-auto px-4",children:u.jsxs("div",{className:"flex justify-around py-3",children:[u.jsxs("button",{onClick:()=>t("/"),className:`flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition ${n("/")?"text-blue-600 bg-blue-50":"text-gray-600"}`,children:[u.jsx(Pf,{className:"w-6 h-6"}),u.jsx("span",{className:"text-xs font-medium",children:"Beranda"})]}),u.jsxs("button",{onClick:()=>t("/catalog"),className:`flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition ${n("/catalog")?"text-blue-600 bg-blue-50":"text-gray-600"}`,children:[u.jsx(xO,{className:"w-6 h-6"}),u.jsx("span",{className:"text-xs font-medium",children:"Katalog"})]}),u.jsxs("button",{onClick:()=>t("/literacy"),className:`flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition ${n("/literacy")?"text-blue-600 bg-blue-50":"text-gray-600"}`,children:[u.jsx($c,{className:"w-6 h-6"}),u.jsx("span",{className:"text-xs font-medium",children:"Literasi"})]}),u.jsxs("button",{onClick:()=>t("/my-books"),className:`flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition ${n("/my-books")?"text-blue-600 bg-blue-50":"text-gray-600"}`,children:[u.jsx(Nt,{className:"w-6 h-6"}),u.jsx("span",{className:"text-xs font-medium",children:"Buku Saya"})]}),u.jsxs("button",{onClick:()=>t("/profile"),className:`flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition ${n("/profile")?"text-blue-600 bg-blue-50":"text-gray-600"}`,children:[u.jsx(Hm,{className:"w-6 h-6"}),u.jsx("span",{className:"text-xs font-medium",children:"Profil"})]})]})})})]})},w6=()=>{const t=Gr(),e=zi(),[n,r]=L.useState(!1),s=c=>e.pathname===c,i=({icon:c,label:d,path:h,onClick:p})=>u.jsxs("button",{onClick:()=>{p?p():t(h)},className:`flex items-center gap-3 w-full px-4 py-3 rounded-xl transition font-medium mb-1 ${s(h)?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[u.jsx(c,{className:`w-5 h-5 ${s(h)?"fill-blue-600/20":""}`}),d]}),o=({icon:c,label:d,path:h})=>u.jsxs("button",{onClick:()=>t(h),className:`flex flex-col items-center gap-1 p-2 rounded-xl transition ${s(h)?"text-blue-600":"text-gray-400 hover:text-gray-600"}`,children:[u.jsx(c,{className:`w-6 h-6 ${s(h)?"fill-blue-600/20":""}`}),u.jsx("span",{className:"text-[10px] font-medium",children:d})]}),l=()=>{t("/login")};return u.jsxs("div",{className:"flex min-h-screen bg-gray-50 font-sans",children:[u.jsxs("aside",{className:"hidden md:flex w-64 bg-white border-r border-gray-200 flex-col sticky top-0 h-screen",children:[u.jsx("div",{className:"p-6 border-b border-gray-100",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-xl flex items-center justify-center text-white",children:u.jsx(Nt,{className:"w-6 h-6"})}),u.jsxs("div",{children:[u.jsx("h1",{className:"font-bold text-xl text-gray-800",children:"Lentera"}),u.jsx("p",{className:"text-xs text-gray-500",children:"Admin Panel"})]})]})}),u.jsxs("nav",{className:"flex-1 p-4 overflow-y-auto",children:[u.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4 px-4",children:"Menu Utama"}),u.jsx(i,{icon:Pf,label:"Dashboard",path:"/admin"}),u.jsx(i,{icon:ba,label:"Kelola Buku",path:"/admin/books"}),u.jsx(i,{icon:Nt,label:"Peminjaman",path:"/admin/borrows"}),u.jsx(i,{icon:$c,label:"Kelola Literasi",path:"/admin/literacy"}),u.jsx(i,{icon:Li,label:"Data Siswa",path:"/admin/students"}),u.jsx(i,{icon:Yu,label:"Statistik Siswa",path:"/admin/statistics"}),u.jsx(i,{icon:Yu,label:"Laporan",path:"/admin/reports"}),u.jsx("p",{className:"text-xs font-semibold text-gray-400 uppercase tracking-wider mt-6 mb-4 px-4",children:"Lainnya"}),u.jsx(i,{icon:qc,label:"Pengaturan",path:"/admin/settings"})]}),u.jsx("div",{className:"p-4 border-t border-gray-100",children:u.jsxs("button",{onClick:l,className:"flex items-center gap-3 w-full px-4 py-3 rounded-xl text-red-600 hover:bg-red-50 transition font-medium",children:[u.jsx($m,{className:"w-5 h-5"}),"Keluar"]})})]}),u.jsx("main",{className:"flex-1 pb-20 md:pb-0 overflow-x-hidden",children:u.jsx("div",{className:"p-4 md:p-8 max-w-7xl mx-auto",children:u.jsx(Ux,{})})}),u.jsxs("div",{className:"md:hidden fixed bottom-0 inset-x-0 bg-white border-t border-gray-200 px-6 py-2 flex justify-between items-center z-50",children:[u.jsx(o,{icon:Pf,label:"Home",path:"/admin"}),u.jsx(o,{icon:ba,label:"Buku",path:"/admin/books"}),u.jsx("div",{className:"relative -top-6",children:u.jsx("button",{onClick:()=>t("/admin/books/add"),className:"w-14 h-14 bg-blue-600 rounded-full flex items-center justify-center text-white shadow-lg shadow-blue-200",children:u.jsx(Oi,{className:"w-6 h-6"})})}),u.jsx(o,{icon:Nt,label:"Pinjam",path:"/admin/borrows"}),u.jsx(o,{icon:Li,label:"Siswa",path:"/admin/students"})]})]})},x6=async()=>{try{const t=Mt(Ee,"books"),n=(await Cl(t)).data().count,r=Mt(Ee,"users"),s=Rn(r,fs("role","==","student")),o=(await Cl(s)).data().count,l=Mt(Ee,"borrows"),c=Rn(l,fs("status","==","active")),h=(await Cl(c)).data().count,p=new Date().toISOString(),m=Rn(l,fs("status","==","active"),fs("dueDate","<",p)),_=(await Cl(m)).data().count;return{totalBooks:n,totalStudents:o,totalActiveBorrows:h,totalOverdue:_}}catch(t){return console.error("Error fetching dashboard stats:",t),{totalBooks:0,totalStudents:0,totalActiveBorrows:0,totalOverdue:0}}},pS=async()=>{try{const t=Rn(Mt(Ee,"borrows"),Ba("borrowDate","desc"));return(await Fs(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error fetching all borrows:",t),[]}},E6=async()=>{try{const t=Rn(Mt(Ee,"borrows"),Ba("borrowDate","desc"),jT(5));return(await Fs(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){return console.error("Error fetching recent activity:",t),[]}},T6=async()=>{try{const t=Mt(Ee,"books"),e=Rn(t,fs("stock","<",5),jT(5));return(await Fs(e)).docs.map(r=>({id:r.id,...r.data()}))}catch(t){return console.error("Error fetching low stock books:",t),[]}},S6=async()=>{try{const t=await pS(),e=t.length,n=t.filter(p=>p.status==="returned"&&p.returnedDate<=p.dueDate).length,r=new Date().toISOString(),s=t.filter(p=>p.status==="active"&&p.dueDate<r||p.status==="returned"&&p.returnedDate>p.dueDate).length,i=`Rp ${s*2e3}`,o=t.reduce((p,m)=>{const x=m.bookTitle||"Unknown Book";return p[x]=(p[x]||0)+1,p},{}),l=t.reduce((p,m)=>(m.bookTitle&&(p[m.bookTitle]=m.bookAuthor||"Unknown"),p),{}),c=Object.entries(o).map(([p,m])=>({title:p,author:l[p],count:m})).sort((p,m)=>m.count-p.count).slice(0,5),d=t.reduce((p,m)=>{const x=m.userName||"Unknown Student";return p[x]=(p[x]||0)+1,p},{}),h=Object.entries(d).map(([p,m])=>({name:p,class:"-",borrows:m})).sort((p,m)=>m.borrows-p.borrows).slice(0,5);return{summaryStats:{totalBorrows:e,returnedOnTime:n,overdue:s,fineTotal:i},topBooks:c,topStudents:h}}catch(t){throw console.error("Error getting reports data:",t),t}},b6=()=>{const t=Gr(),[e,n]=L.useState({totalBooks:0,totalStudents:0,totalActiveBorrows:0,totalOverdue:0}),[r,s]=L.useState([]),[i,o]=L.useState([]),[l,c]=L.useState(!0);return L.useEffect(()=>{(async()=>{try{const h=await x6(),p=await E6(),m=await T6();n(h),s(p),o(m)}catch(h){console.error(h)}finally{c(!1)}})()},[]),l?u.jsx("div",{className:"p-6",children:"Loading..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:"Dashboard Admin"}),u.jsx("p",{className:"text-gray-600",children:"Selamat datang kembali, Admin "})]}),u.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[u.jsx(Bm,{className:"w-5 h-5"}),u.jsx("span",{className:"hidden md:inline",children:"3 Notifikasi"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx(ba,{className:"w-8 h-8 opacity-80"}),u.jsx(Qo,{className:"w-5 h-5"})]}),u.jsx("div",{className:"text-3xl font-bold mb-1",children:e.totalBooks}),u.jsx("div",{className:"text-blue-100 text-sm",children:"Total Buku"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx(Nt,{className:"w-8 h-8 opacity-80"}),u.jsx(Qo,{className:"w-5 h-5"})]}),u.jsx("div",{className:"text-3xl font-bold mb-1",children:e.totalActiveBorrows}),u.jsx("div",{className:"text-green-100 text-sm",children:"Sedang Dipinjam"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white shadow-lg",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx(Li,{className:"w-8 h-8 opacity-80"}),u.jsx(Qo,{className:"w-5 h-5"})]}),u.jsx("div",{className:"text-3xl font-bold mb-1",children:e.totalStudents}),u.jsx("div",{className:"text-purple-100 text-sm",children:"Siswa Aktif"})]}),u.jsxs("div",{className:"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-lg",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx(zc,{className:"w-8 h-8 opacity-80"}),u.jsx("span",{className:"text-xs bg-white/20 px-2 py-1 rounded",children:"!"})]}),u.jsx("div",{className:"text-3xl font-bold mb-1",children:e.totalOverdue}),u.jsx("div",{className:"text-orange-100 text-sm",children:"Terlambat"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Quick Actions"}),u.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[u.jsxs("button",{onClick:()=>t("/admin/books"),className:"flex flex-col items-center gap-2 p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition",children:[u.jsx(Oi,{className:"w-6 h-6 text-blue-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Tambah Buku"})]}),u.jsxs("button",{onClick:()=>t("/admin/borrows"),className:"flex flex-col items-center gap-2 p-4 bg-green-50 hover:bg-green-100 rounded-lg transition",children:[u.jsx(Nt,{className:"w-6 h-6 text-green-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Kelola Peminjaman"})]}),u.jsxs("button",{onClick:()=>t("/admin/students"),className:"flex flex-col items-center gap-2 p-4 bg-purple-50 hover:bg-purple-100 rounded-lg transition",children:[u.jsx(Li,{className:"w-6 h-6 text-purple-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Data Siswa"})]}),u.jsxs("button",{onClick:()=>t("/admin/reports"),className:"flex flex-col items-center gap-2 p-4 bg-orange-50 hover:bg-orange-100 rounded-lg transition",children:[u.jsx(Yu,{className:"w-6 h-6 text-orange-600"}),u.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Laporan"})]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Peminjaman Terbaru"}),u.jsx("div",{className:"space-y-3",children:r.length>0?r.map(d=>u.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-800 text-sm",children:d.userName}),u.jsx("p",{className:"text-xs text-gray-500",children:d.bookTitle})]}),u.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${d.status==="active"?"bg-blue-100 text-blue-700":d.status==="returned"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:d.status})]},d.id)):u.jsx("p",{className:"text-gray-500 text-center",children:"Belum ada data"})})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"Stok Menipis"}),u.jsx("div",{className:"space-y-3",children:i.length>0?i.map(d=>u.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{className:"text-2xl",children:""}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-800 text-sm",children:d.title}),u.jsxs("p",{className:"text-xs text-gray-500",children:["Sisa ",d.stock]})]})]}),u.jsx("button",{onClick:()=>t("/admin/books"),className:"text-blue-600 text-sm hover:underline",children:"Tambah"})]},d.id)):u.jsx("p",{className:"text-gray-500 text-center",children:"Tidak ada buku stok menipis"})})]})]})]})},I6=()=>{var T,v;const[t,e]=L.useState(!1),[n,r]=L.useState([]),[s,i]=L.useState(!0),[o,l]=L.useState(null),[c,d]=L.useState({title:"",author:"",category:"",year:"",pages:"",stock:"",description:"",file:null}),[h,p]=L.useState(""),[m,x]=L.useState(""),[_,b]=L.useState("");L.useEffect(()=>{k()},[]),L.useEffect(()=>{let w=h;m&&(w+=` > ${m}`,_&&(w+=` > ${_}`)),d(I=>({...I,category:w}))},[h,m,_]);const k=async()=>{try{i(!0);const w=await D1();r(w)}catch(w){console.error("Failed to fetch books:",w)}finally{i(!1)}},S=w=>{const{name:I,value:R}=w.target;d(C=>({...C,[I]:R}))},E=w=>{const I=w.target.files[0];if(I){if(I.size>20*1024*1024){alert("Ukuran file terlalu besar! Maksimal 20MB."),w.target.value="";return}d(R=>({...R,file:I}))}},N=async(w,I)=>{if(window.confirm("Apakah Anda yakin ingin menghapus buku ini?"))try{await uO(w,I),k()}catch(R){alert("Gagal menghapus buku: "+R.message)}},j=async w=>{w.preventDefault();const I={title:c.title,author:c.author,category:c.category,year:c.year,pages:c.pages,stock:c.stock,description:c.description};try{await lO(I,c.file),e(!1),k(),d({title:"",author:"",category:"",year:"",pages:"",stock:"",description:"",file:null}),p(""),x(""),b(""),alert("Buku berhasil ditambahkan!")}catch(R){console.error("Failed to add book:",R),alert("Gagal menambahkan buku: "+R.message)}},F=()=>Df.find(w=>w.name===h),V=()=>{var I;const w=F();return(I=w==null?void 0:w.subcategories)==null?void 0:I.find(R=>R.name===m)};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Kelola Buku"}),u.jsxs("button",{onClick:()=>e(!0),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:[u.jsx(Oi,{className:"w-5 h-5"}),"Tambah Buku"]})]}),t&&u.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 border-2 border-blue-200 animate-in slide-in-from-top-4 fade-in duration-200",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:o?"Edit Buku":"Tambah Buku Baru"}),u.jsx("button",{onClick:()=>{e(!1),l(null),d({title:"",author:"",category:"",year:"",pages:"",stock:"",description:"",file:null}),p(""),x(""),b("")},className:"text-gray-500 hover:text-gray-700",children:u.jsx(kO,{className:"w-6 h-6"})})]}),u.jsxs("form",{onSubmit:j,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsx("input",{name:"title",value:c.title,onChange:S,type:"text",placeholder:"Judul Buku",className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0}),u.jsx("input",{name:"author",value:c.author,onChange:S,type:"text",placeholder:"Penulis",className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0}),u.jsxs("div",{className:"space-y-2",children:[u.jsxs("select",{value:h,onChange:w=>{p(w.target.value),x(""),b("")},className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0,children:[u.jsx("option",{value:"",children:"Pilih Kategori Utama"}),Df.map(w=>u.jsx("option",{value:w.name,children:w.name},w.name))]}),((T=F())==null?void 0:T.subcategories)&&u.jsxs("select",{value:m,onChange:w=>{x(w.target.value),b("")},className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0,children:[u.jsx("option",{value:"",children:"Pilih Sub Kategori"}),F().subcategories.map(w=>u.jsx("option",{value:w.name,children:w.name},w.name))]}),((v=V())==null?void 0:v.subcategories)&&u.jsxs("select",{value:_,onChange:w=>b(w.target.value),className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0,children:[u.jsx("option",{value:"",children:"Pilih Detail Kategori"}),V().subcategories.map(w=>u.jsx("option",{value:w.name,children:w.name},w.name))]})]}),u.jsx("input",{name:"year",value:c.year,onChange:S,type:"number",placeholder:"Tahun Terbit",className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}),u.jsx("input",{name:"pages",value:c.pages,onChange:S,type:"number",placeholder:"Jumlah Halaman",className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none"}),u.jsx("input",{name:"stock",value:c.stock,onChange:S,type:"number",placeholder:"Jumlah Stok",className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",required:!0}),u.jsxs("div",{className:"md:col-span-2",children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Upload E-Book (PDF)"}),u.jsx("div",{className:"flex items-center gap-2",children:u.jsx("input",{type:"file",accept:".pdf",onChange:E,className:"block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100"})}),u.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Format PDF, maks 20MB."})]}),u.jsx("textarea",{name:"description",value:c.description,onChange:S,placeholder:"Deskripsi",className:"px-4 py-2 border rounded-lg md:col-span-2 focus:ring-2 focus:ring-blue-500 outline-none",rows:"3"}),u.jsx("div",{className:"md:col-span-2",children:u.jsx("button",{type:"submit",className:"w-full py-3 bg-blue-600 text-white rounded-lg font-semibold hover:bg-blue-700 transition",children:"Simpan Buku"})})]})]}),u.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Buku"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Kategori"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Stok"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"File"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Aksi"})]})}),u.jsxs("tbody",{className:"divide-y divide-gray-200",children:[n.map(w=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("span",{className:"text-3xl",children:w.cover||""}),u.jsxs("div",{children:[u.jsx("p",{className:"font-medium text-gray-800",children:w.title}),u.jsx("p",{className:"text-sm text-gray-500",children:w.author})]})]})}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:w.category}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:`font-semibold ${w.stock<=2?"text-red-600":"text-green-600"}`,children:w.stock})}),u.jsx("td",{className:"px-6 py-4",children:w.fileUrl?u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Digital"}):u.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Fisik"})}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",children:u.jsx(SO,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>N(w.id,w.fileUrl),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:u.jsx(qm,{className:"w-4 h-4"})})]})})]},w.id)),n.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"5",className:"px-6 py-4 text-center text-gray-500",children:s?"Memuat data...":"Belum ada data buku"})})]})]})})})]})},k6=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,i]=L.useState({active:0,returnedToday:0,overdue:0});L.useEffect(()=>{o()},[]);const o=async()=>{try{const d=await pS();e(d),l(d)}catch(d){console.error(d)}finally{r(!1)}},l=d=>{const h=new Date().toISOString().split("T")[0],p=d.filter(_=>_.status==="active").length,m=d.filter(_=>_.status==="returned"&&_.returnedDate&&_.returnedDate.startsWith(h)).length,x=d.filter(_=>_.status!=="active"?!1:new Date(_.dueDate)<new Date).length;i({active:p,returnedToday:m,overdue:x})},c=async(d,h)=>{if(confirm("Konfirmasi pengembalian buku?"))try{await $1(d,h),alert("Buku berhasil dikembalikan"),o()}catch(p){alert("Gagal mengembalikan buku: "+p.message)}};return n?u.jsx("div",{className:"p-6",children:"Loading..."}):u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Kelola Peminjaman"}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 border-l-4 border-blue-500",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Sedang Dipinjam"}),u.jsx("p",{className:"text-3xl font-bold text-blue-600",children:s.active})]}),u.jsxs("div",{className:"bg-green-50 rounded-lg p-4 border-l-4 border-green-500",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Dikembalikan Hari Ini"}),u.jsx("p",{className:"text-3xl font-bold text-green-600",children:s.returnedToday})]}),u.jsxs("div",{className:"bg-red-50 rounded-lg p-4 border-l-4 border-red-500",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Terlambat"}),u.jsx("p",{className:"text-3xl font-bold text-red-600",children:s.overdue})]})]}),u.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Siswa"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Buku"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Tgl Pinjam"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Jatuh Tempo"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Status"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-200",children:t.map(d=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-800",children:d.userName}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:d.bookTitle}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(d.borrowDate).toLocaleDateString()}),u.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:d.status==="returned"?`Ret: ${new Date(d.returnedDate).toLocaleDateString()}`:new Date(d.dueDate).toLocaleDateString()}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${d.status==="active"?"bg-blue-100 text-blue-700":d.status==="returned"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:d.status==="active"&&new Date(d.dueDate)<new Date?"Terlambat":d.status})}),u.jsx("td",{className:"px-6 py-4",children:d.status==="active"&&u.jsx("button",{onClick:()=>c(d.id,d.bookId),className:"px-4 py-2 bg-green-600 text-white text-sm rounded-lg hover:bg-green-700 transition",children:"Kembalikan"})})]},d.id))})]})})})]})},mS=async()=>{try{const t=Rn(Mt(Ee,"users"),fs("role","==","student"));return(await Fs(t)).docs.map(n=>({id:n.id,...n.data()}))}catch(t){throw console.error("Error getting students:",t),t}},N6=async t=>{throw new Error("Admin tidak dapat membuat akun siswa secara langsung di versi Serverless. Siswa harus mendaftar mandiri.")},A6=async(t,e)=>{try{const n=Xt(Ee,"users",t);return await qu(n,e),!0}catch(n){throw console.error("Error updating student:",n),n}},R6=async t=>{try{return await Sm(Xt(Ee,"users",t)),!0}catch(e){throw console.error("Error deleting student:",e),e}},C6=async()=>{try{const t=await mS(),e=t.length,n=t.reduce((s,i)=>{const o=i.class||"Tanpa Kelas";return s[o]=(s[o]||0)+1,s},{}),r=Object.entries(n).map(([s,i])=>({class:s,count:i})).sort((s,i)=>i.count-s.count);return{total:e,breakdown:r}}catch(t){throw console.error("Error getting student statistics:",t),t}},P6=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,i]=L.useState(""),[o,l]=L.useState(!1),[c,d]=L.useState(!1),[h,p]=L.useState("Semua");L.useRef(null);const[m,x]=L.useState({id:null,name:"",nis:"",username:"",class:""}),_=["7A","7B","7C","8A","8B","8C","9A","9B","9C"];L.useEffect(()=>{b()},[]);const b=async()=>{try{const V=await mS();e(V)}catch(V){console.error("Failed to fetch students:",V),alert("Gagal mengambil data siswa")}finally{r(!1)}},k=V=>{const{name:T,value:v}=V.target;x(w=>{const I={...w,[T]:v};return T==="name"&&!c&&(I.username=v),I})},S=async V=>{var T,v;V.preventDefault();try{c?(await A6(m.id,m),alert("Data siswa berhasil diperbarui")):(await N6(m),alert("Siswa berhasil ditambahkan. Password default: NISN")),l(!1),b(),j()}catch(w){alert(((v=(T=w.response)==null?void 0:T.data)==null?void 0:v.message)||"Terjadi kesalahan")}},E=async V=>{if(window.confirm("Apakah Anda yakin ingin menghapus siswa ini?"))try{await R6(V),b()}catch{alert("Gagal menghapus siswa")}},N=V=>{d(!0),x({id:V.id,name:V.name,nis:V.nis,username:V.username,class:V.class||""}),l(!0)},j=()=>{d(!1),x({id:null,name:"",nis:"",username:"",class:""})},F=t.filter(V=>{var w;const T=V.name.toLowerCase().includes(s.toLowerCase())||((w=V.nis)==null?void 0:w.includes(s))||V.username.toLowerCase().includes(s.toLowerCase()),v=h==="Semua"||V.class===h;return T&&v});return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[u.jsx(Li,{className:"w-8 h-8 text-blue-600"}),"Manajemen Siswa"]}),u.jsx("p",{className:"text-gray-500",children:"Kelola data akun siswa sekolah"})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:()=>{j(),l(!0)},className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition shadow-lg shadow-blue-200",children:[u.jsx(Oi,{className:"w-5 h-5"}),"Tambah Siswa"]}),u.jsxs("button",{onClick:()=>alert("Fitur Import belum tersedia di versi Serverless."),className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition shadow-lg shadow-green-200",children:[u.jsx(IO,{className:"w-5 h-5"}),"Import Excel"]})]})]}),u.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-col md:flex-row gap-4 justify-between items-center",children:[u.jsxs("div",{className:"flex flex-col md:flex-row gap-4 w-full md:w-auto flex-1",children:[u.jsxs("div",{className:"relative w-full md:w-80",children:[u.jsx(U1,{className:"w-5 h-5 text-gray-400 absolute left-3 top-1/2 transform -translate-y-1/2"}),u.jsx("input",{type:"text",placeholder:"Cari nama, NISN, atau username...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:s,onChange:V=>i(V.target.value)})]}),u.jsxs("div",{className:"relative w-full md:w-48",children:[u.jsx(vO,{className:"w-4 h-4 text-gray-500 absolute left-3 top-1/2 transform -translate-y-1/2"}),u.jsxs("select",{value:h,onChange:V=>p(V.target.value),className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none appearance-none bg-white",children:[u.jsx("option",{value:"Semua",children:"Semua Kelas"}),_.map(V=>u.jsxs("option",{value:V,children:["Kelas ",V]},V))]})]})]}),u.jsxs("div",{className:"text-sm text-gray-500 whitespace-nowrap",children:["Total Siswa: ",u.jsx("span",{className:"font-bold text-gray-800",children:F.length})]})]}),u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-gray-50 border-b border-gray-100",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm",children:"Nama Lengkap"}),u.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm",children:"NISN"}),u.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm",children:"Kelas"}),u.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm",children:"Username"}),u.jsx("th",{className:"px-6 py-4 font-semibold text-gray-600 text-sm text-right",children:"Aksi"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-50",children:n?u.jsx("tr",{children:u.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:"Memuat data..."})}):F.length===0?u.jsx("tr",{children:u.jsx("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-500",children:"Tidak ada data siswa ditemukan"})}):F.map(V=>u.jsxs("tr",{className:"hover:bg-gray-50 transition",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsx("div",{className:"font-medium text-gray-800",children:V.name})}),u.jsx("td",{className:"px-6 py-4 text-gray-600 font-mono text-sm",children:V.nis||"-"}),u.jsx("td",{className:"px-6 py-4",children:V.class?u.jsx("span",{className:"bg-purple-50 text-purple-700 px-2 py-1 rounded text-xs font-semibold",children:V.class}):u.jsx("span",{className:"text-gray-400 text-sm",children:"-"})}),u.jsx("td",{className:"px-6 py-4",children:u.jsx("span",{className:"bg-blue-50 text-blue-700 px-2 py-1 rounded text-xs font-semibold",children:V.username})}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx("button",{onClick:()=>N(V),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit",children:u.jsx(Qv,{className:"w-4 h-4"})}),u.jsx("button",{onClick:()=>E(V.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Hapus",children:u.jsx(qm,{className:"w-4 h-4"})})]})})]},V.id))})]})})}),o&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md p-6 animate-in zoom-in duration-200",children:[u.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[c?u.jsx(Qv,{className:"w-5 h-5 text-blue-600"}):u.jsx(Oi,{className:"w-5 h-5 text-blue-600"}),c?"Edit Data Siswa":"Tambah Siswa Baru"]}),u.jsxs("form",{onSubmit:S,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Lengkap"}),u.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Nama Siswa",value:m.name,onChange:k})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NISN"}),u.jsx("input",{type:"text",name:"nis",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none font-mono",placeholder:"Nomor Induk Siswa Nasional",value:m.nis,onChange:k}),!c&&u.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:[u.jsx(wO,{className:"w-3 h-3"}),"NISN akan digunakan sebagai password awal"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kelas"}),u.jsxs("select",{name:"class",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white",value:m.class,onChange:k,children:[u.jsx("option",{value:"",children:"Pilih Kelas"}),_.map(V=>u.jsx("option",{value:V,children:V},V))]})]}),u.jsxs("div",{className:"flex gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:"Batal"}),u.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition font-medium",children:c?"Simpan Perubahan":"Tambah Siswa"})]})]})]})})]})},j6=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(!0);L.useEffect(()=>{s()},[]);const s=async()=>{try{const i=await C6();e(i)}catch(i){console.error("Failed to fetch statistics:",i)}finally{r(!1)}};return n?u.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:u.jsx("div",{className:"text-gray-500",children:"Memuat statistik..."})}):t?u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex justify-between items-center",children:u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[u.jsx(Yu,{className:"w-8 h-8 text-purple-600"}),"Statistik Siswa"]}),u.jsx("p",{className:"text-gray-500",children:"Ringkasan data siswa per kelas"})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-purple-50 p-6 rounded-xl border border-purple-100",children:[u.jsx("h3",{className:"text-purple-900 font-semibold mb-2",children:"Total Siswa"}),u.jsx("p",{className:"text-4xl font-bold text-purple-700",children:t.total}),u.jsx("p",{className:"text-purple-600 text-sm mt-2",children:"Siswa terdaftar aktif"})]}),u.jsxs("div",{className:"bg-blue-50 p-6 rounded-xl border border-blue-100",children:[u.jsx("h3",{className:"text-blue-900 font-semibold mb-2",children:"Total Kelas"}),u.jsx("p",{className:"text-4xl font-bold text-blue-700",children:t.breakdown.length}),u.jsx("p",{className:"text-blue-600 text-sm mt-2",children:"Kelas dengan siswa"})]})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[u.jsx("div",{className:"p-6 border-b border-gray-100",children:u.jsx("h3",{className:"font-semibold text-gray-800",children:"Rincian per Kelas"})}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-gray-600",children:"Kelas"}),u.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-gray-600",children:"Jumlah Siswa"}),u.jsx("th",{className:"px-6 py-3 text-sm font-semibold text-gray-600",children:"Persentase"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:t.breakdown.map((i,o)=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 font-medium text-gray-800",children:i.class||"Tanpa Kelas"}),u.jsx("td",{className:"px-6 py-4 text-gray-600",children:i.count}),u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("div",{className:"w-32 h-2 bg-gray-100 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-purple-500 rounded-full",style:{width:`${i.count/t.total*100}%`}})}),u.jsxs("span",{className:"text-xs text-gray-500 w-12",children:[Math.round(i.count/t.total*100),"%"]})]})})]},o))})]})})]})]}):u.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:u.jsx("div",{className:"text-red-500",children:"Gagal memuat data statistik"})})},D6=()=>{const[t,e]=L.useState("Bulan Ini"),[n,r]=L.useState(!0),[s,i]=L.useState({totalBorrows:0,returnedOnTime:0,overdue:0,fineTotal:"Rp 0"}),[o,l]=L.useState([]),[c,d]=L.useState([]);return L.useEffect(()=>{(async()=>{try{r(!0);const p=await S6();i(p.summaryStats),l(p.topBooks),d(p.topStudents)}catch(p){console.error("Failed to fetch reports data:",p)}finally{r(!1)}})()},[]),n?u.jsx("div",{className:"flex items-center justify-center h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[u.jsx(Qo,{className:"w-8 h-8 text-blue-600"}),"Laporan Perpustakaan"]}),u.jsx("p",{className:"text-gray-500",children:"Ringkasan aktivitas dan kinerja perpustakaan"})]}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsxs("div",{className:"relative",children:[u.jsxs("select",{className:"appearance-none bg-white border border-gray-300 text-gray-700 py-2 px-4 pr-8 rounded-lg leading-tight focus:outline-none focus:bg-white focus:border-blue-500",value:t,onChange:h=>e(h.target.value),children:[u.jsx("option",{children:"Hari Ini"}),u.jsx("option",{children:"Minggu Ini"}),u.jsx("option",{children:"Bulan Ini"}),u.jsx("option",{children:"Tahun Ini"})]}),u.jsx("div",{className:"pointer-events-none absolute inset-y-0 right-0 flex items-center px-2 text-gray-700",children:u.jsx(zm,{className:"w-4 h-4"})})]}),u.jsxs("button",{className:"bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg flex items-center gap-2 transition-colors",children:[u.jsx(L1,{className:"w-4 h-4"}),"Export Excel"]})]})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("div",{className:"p-2 bg-blue-50 rounded-lg",children:u.jsx(Nt,{className:"w-6 h-6 text-blue-600"})}),u.jsx("span",{className:"text-sm font-medium text-green-600 bg-green-50 px-2 py-1 rounded-full",children:"+12%"})]}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Total Peminjaman"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:s.totalBorrows})]}),u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("div",{className:"p-2 bg-green-50 rounded-lg",children:u.jsx(Li,{className:"w-6 h-6 text-green-600"})}),u.jsx("span",{className:"text-sm font-medium text-green-600 bg-green-50 px-2 py-1 rounded-full",children:"+5%"})]}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Dikembalikan Tepat Waktu"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:s.returnedOnTime})]}),u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("div",{className:"p-2 bg-red-50 rounded-lg",children:u.jsx(hO,{className:"w-6 h-6 text-red-600"})}),u.jsx("span",{className:"text-sm font-medium text-red-600 bg-red-50 px-2 py-1 rounded-full",children:"+2%"})]}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Terlambat Pengembalian"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:s.overdue})]}),u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[u.jsxs("div",{className:"flex items-center justify-between mb-4",children:[u.jsx("div",{className:"p-2 bg-yellow-50 rounded-lg",children:u.jsx(Qo,{className:"w-6 h-6 text-yellow-600"})}),u.jsx("span",{className:"text-sm font-medium text-gray-500",children:"Total"})]}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Estimasi Denda"}),u.jsx("h3",{className:"text-2xl font-bold text-gray-800",children:s.fineTotal})]})]}),u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[u.jsx("h3",{className:"font-bold text-gray-800",children:"Buku Terpopuler"}),u.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Lihat Semua"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-600 uppercase",children:"Judul Buku"}),u.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-600 uppercase",children:"Penulis"}),u.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-600 uppercase text-center",children:"Dipinjam"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:o.map((h,p)=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 font-medium text-gray-800",children:h.title}),u.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:h.author}),u.jsx("td",{className:"px-6 py-4 text-center",children:u.jsxs("span",{className:"inline-flex items-center justify-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[h.count,"x"]})})]},p))})]})})]}),u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[u.jsxs("div",{className:"p-6 border-b border-gray-100 flex justify-between items-center",children:[u.jsx("h3",{className:"font-bold text-gray-800",children:"Siswa Teraktif"}),u.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Lihat Semua"})]}),u.jsx("div",{className:"overflow-x-auto",children:u.jsxs("table",{className:"w-full text-left",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-600 uppercase",children:"Nama Siswa"}),u.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-600 uppercase",children:"Kelas"}),u.jsx("th",{className:"px-6 py-3 text-xs font-semibold text-gray-600 uppercase text-center",children:"Aktivitas"})]})}),u.jsx("tbody",{className:"divide-y divide-gray-100",children:c.map((h,p)=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4 font-medium text-gray-800",children:h.name}),u.jsx("td",{className:"px-6 py-4 text-gray-600 text-sm",children:h.class}),u.jsx("td",{className:"px-6 py-4 text-center",children:u.jsxs("span",{className:"inline-flex items-center justify-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[h.borrows," buku"]})})]},p))})]})})]})]})]})},O6=()=>{const[t,e]=L.useState([]),[n,r]=L.useState(!0),[s,i]=L.useState(!1),[o,l]=L.useState({title:"",description:"",date:"",points:50,duration:60});L.useEffect(()=>{c()},[]);const c=async()=>{try{r(!0);const m=await fS();e(m)}catch(m){console.error("Failed to fetch literacy tasks:",m)}finally{r(!1)}};async function d(m){const x="https://smpn3pacet-app-default-rtdb.asia-southeast1.firebasedatabase.app",_="/literacy_tasks.json",b={title:m.title||m.judul||"Judul Tugas",description:m.description||m.deskripsi||"Deskripsi Tugas",points:parseInt(m.points||m.poin)||75,durationMinutes:parseInt(m.duration||m.durationMinutes||m.durasi)||60,createdAt:Date.now(),isActive:!0};console.log("Mengirim data ke Dashboard:",b);try{const k=await fetch(x+_,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)});if(k.ok){const S=await k.json();console.log("SUKSES TERKIRIM:",S),alert(` Berhasil! Tugas dikirim langsung ke Aplikasi Siswa (Android).

Siswa akan melihat tugas ini saat mereka membuka menu Literasi.`)}else{const S=await k.text();console.error("GAGAL KIRIM:",k.status,S),alert(` Gagal mengirim tugas.
Status: ${k.status}
Pesan: ${S}`)}}catch(k){console.error("ERROR KONEKSI:",k),alert(` Terjadi kesalahan koneksi saat mengirim ke Firebase.
${k.message}`)}}const h=async m=>{m.preventDefault();try{await m6(o),await d(o),i(!1),l({title:"",description:"",date:"",points:50,duration:60}),c()}catch(x){alert("Gagal membuat tugas: "+x.message),console.error(x)}},p=async m=>{if(window.confirm("Apakah Anda yakin ingin menghapus tugas ini?"))try{await g6(m),c()}catch(x){alert("Gagal menghapus tugas: "+x.message)}};return u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[u.jsx($c,{className:"w-8 h-8 text-blue-600"}),"Kelola Program Literasi"]}),u.jsx("p",{className:"text-gray-500",children:"Buat dan pantau tugas literasi mingguan siswa"})]}),u.jsxs("button",{onClick:()=>i(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition",children:[u.jsx(Oi,{className:"w-5 h-5"}),"Buat Tugas Baru"]})]}),s&&u.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-lg p-6 animate-in zoom-in duration-200",children:[u.jsx("h2",{className:"text-xl font-bold mb-4",children:"Buat Tugas Literasi Baru"}),u.jsxs("form",{onSubmit:h,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Judul Tugas"}),u.jsx("input",{type:"text",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"Contoh: Review Buku Sejarah",value:o.title,onChange:m=>l({...o,title:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi & Instruksi"}),u.jsx("textarea",{required:!0,rows:"3",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none resize-none",placeholder:"Jelaskan apa yang harus dilakukan siswa...",value:o.description,onChange:m=>l({...o,description:m.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tanggal Pelaksanaan"}),u.jsx("input",{type:"date",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:o.date,onChange:m=>l({...o,date:m.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Poin"}),u.jsx("input",{type:"number",required:!0,className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:o.points,onChange:m=>l({...o,points:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Durasi (Mnt)"}),u.jsx("input",{type:"number",required:!0,placeholder:"60",className:"w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:o.duration,onChange:m=>l({...o,duration:m.target.value})})]})]})]}),u.jsxs("div",{className:"flex gap-3 mt-6",children:[u.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition",children:"Batal"}),u.jsx("button",{type:"submit",className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition",children:"Simpan & Kirim"})]})]})]})}),u.jsx("div",{className:"grid gap-4",children:n?u.jsx("div",{className:"text-center py-10 text-gray-500",children:"Memuat tugas..."}):t.length===0?u.jsx("div",{className:"text-center py-10 text-gray-500",children:"Belum ada tugas literasi."}):t.map(m=>u.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 flex flex-col md:flex-row gap-6 items-start md:items-center",children:[u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[u.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-bold flex items-center gap-1 ${m.status==="active"?"bg-green-100 text-green-700":"bg-gray-100 text-gray-600"}`,children:[m.status==="active"?u.jsx(zc,{className:"w-3 h-3"}):u.jsx(O1,{className:"w-3 h-3"}),m.status==="active"?"Sedang Berlangsung":"Selesai"]}),u.jsxs("span",{className:"text-sm text-gray-500 flex items-center gap-1",children:[u.jsx(zm,{className:"w-4 h-4"})," ",m.date]})]}),u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:m.title}),u.jsx("p",{className:"text-gray-600 text-sm mt-1",children:m.description}),u.jsxs("div",{className:"mt-2 text-xs text-gray-500 flex gap-3",children:[u.jsxs("span",{className:"flex items-center gap-1",children:[" ",m.points||0," Poin"]}),u.jsxs("span",{className:"flex items-center gap-1",children:[" ",m.duration||60," Menit"]})]})]}),u.jsxs("div",{className:"flex items-center gap-6 w-full md:w-auto justify-between md:justify-end border-t md:border-t-0 pt-4 md:pt-0",children:[u.jsxs("div",{className:"text-center",children:[u.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Partisipan"}),u.jsxs("div",{className:"flex items-center gap-1 font-bold text-gray-700",children:[u.jsx(Nt,{className:"w-4 h-4 text-blue-500"}),m.submissions||0," Siswa"]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx("button",{onClick:()=>{confirm("Kirim ulang tugas ini ke Dashboard Admin?")&&d(m)},className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition",title:"Kirim ke Dashboard",children:u.jsx(gO,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>p(m.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Hapus",children:u.jsx(qm,{className:"w-5 h-5"})})]})]})]},m.id))})]})},gS="settings",yS="general",L6=async()=>{try{const t=Xt(Ee,gS,yS),e=await Tm(t);if(e.exists())return e.data();{const n={libraryName:"Perpustakaan SMA Negeri 1 Jakarta",address:"Jl. Budi Utomo No. 7, Jakarta Pusat",email:"perpus@sman1jkt.sch.id",phone:"(021) 3865001",finePerDay:2e3,maxBorrowDays:7,maxBooksPerStudent:3};return await Lc(t,n),n}}catch(t){throw console.error("Error getting settings:",t),t}},V6=async t=>{try{const e=Xt(Ee,gS,yS);return await Lc(e,t,{merge:!0}),!0}catch(e){throw console.error("Error updating settings:",e),e}},M6=()=>{const[t,e]=L.useState("general"),[n,r]=L.useState(!1),[s,i]=L.useState(!0),[o,l]=L.useState({libraryName:"",address:"",email:"",phone:"",finePerDay:2e3,maxBorrowDays:7,maxBooksPerStudent:3});L.useEffect(()=>{c()},[]);const c=async()=>{try{i(!0);const m=await L6();l(m)}catch(m){console.error("Failed to fetch settings:",m),alert("Gagal memuat pengaturan.")}finally{i(!1)}},[d,h]=L.useState({currentPassword:"",newPassword:"",confirmPassword:""}),p=async m=>{m.preventDefault(),r(!0);try{if(t==="general")await V6(o),alert("Pengaturan berhasil disimpan!");else{if(d.newPassword!==d.confirmPassword)throw new Error("Konfirmasi password tidak cocok");if(d.newPassword.length<6)throw new Error("Password harus minimal 6 karakter");const x=Bc.currentUser;if(!x)throw new Error("User tidak ditemukan");const _=zs.credential(x.email,d.currentPassword);await UD(x,_),await zD(x,d.newPassword),alert("Password berhasil diperbarui!"),h({currentPassword:"",newPassword:"",confirmPassword:""})}}catch(x){console.error("Failed to save settings:",x);let _="Gagal menyimpan pengaturan.";x.code==="auth/wrong-password"?_="Password saat ini salah.":x.code==="auth/requires-recent-login"?_="Silakan login ulang sebelum mengganti password.":x.message&&(_=x.message),alert(_)}finally{r(!1)}};return s?u.jsx("div",{className:"flex items-center justify-center h-screen",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"flex justify-between items-center",children:u.jsxs("div",{children:[u.jsxs("h1",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:[u.jsx(qc,{className:"w-8 h-8 text-gray-600"}),"Pengaturan"]}),u.jsx("p",{className:"text-gray-500",children:"Kelola konfigurasi aplikasi perpustakaan"})]})}),u.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[u.jsx("div",{className:"lg:w-64 flex-shrink-0",children:u.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:u.jsxs("nav",{className:"flex flex-col",children:[u.jsxs("button",{onClick:()=>e("general"),className:`flex items-center gap-3 px-6 py-4 text-left transition-colors ${t==="general"?"bg-blue-50 text-blue-600 border-r-4 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[u.jsx(pO,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Umum"})]}),u.jsxs("button",{onClick:()=>e("account"),className:`flex items-center gap-3 px-6 py-4 text-left transition-colors ${t==="account"?"bg-blue-50 text-blue-600 border-r-4 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[u.jsx(TO,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Akun & Keamanan"})]}),u.jsxs("button",{onClick:()=>e("notifications"),className:`flex items-center gap-3 px-6 py-4 text-left transition-colors ${t==="notifications"?"bg-blue-50 text-blue-600 border-r-4 border-blue-600":"text-gray-600 hover:bg-gray-50"}`,children:[u.jsx(Bm,{className:"w-5 h-5"}),u.jsx("span",{className:"font-medium",children:"Notifikasi"})]})]})})}),u.jsx("div",{className:"flex-1",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[t==="general"&&u.jsxs("form",{onSubmit:p,className:"space-y-6",children:[u.jsxs("div",{className:"border-b border-gray-100 pb-4 mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Informasi Perpustakaan"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Informasi dasar tentang identitas perpustakaan"})]}),u.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Perpustakaan"}),u.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",value:o.libraryName,onChange:m=>l({...o,libraryName:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Alamat"}),u.jsx("textarea",{rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",value:o.address,onChange:m=>l({...o,address:m.target.value})})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Kontak"}),u.jsx("input",{type:"email",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",value:o.email,onChange:m=>l({...o,email:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nomor Telepon"}),u.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",value:o.phone,onChange:m=>l({...o,phone:m.target.value})})]})]})]}),u.jsxs("div",{className:"border-b border-gray-100 pb-4 mb-4 mt-8",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Aturan Peminjaman"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Konfigurasi denda dan batas waktu peminjaman"})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Denda per Hari (Rp)"}),u.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",value:o.finePerDay,onChange:m=>l({...o,finePerDay:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lama Pinjam (Hari)"}),u.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",value:o.maxBorrowDays,onChange:m=>l({...o,maxBorrowDays:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Maks. Buku Dipinjam"}),u.jsx("input",{type:"number",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",value:o.maxBooksPerStudent,onChange:m=>l({...o,maxBooksPerStudent:m.target.value})})]})]}),u.jsx("div",{className:"pt-6 flex justify-end",children:u.jsxs("button",{type:"submit",disabled:n,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50",children:[u.jsx(Jv,{className:"w-4 h-4"}),n?"Menyimpan...":"Simpan Perubahan"]})})]}),t==="account"&&u.jsxs("form",{onSubmit:p,className:"space-y-6",children:[u.jsxs("div",{className:"border-b border-gray-100 pb-4 mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Ubah Password"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Amankan akun administrator Anda"})]}),u.jsxs("div",{className:"space-y-4 max-w-md",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Saat Ini"}),u.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",value:d.currentPassword,onChange:m=>h({...d,currentPassword:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Baru"}),u.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",value:d.newPassword,onChange:m=>h({...d,newPassword:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Konfirmasi Password Baru"}),u.jsx("input",{type:"password",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition",value:d.confirmPassword,onChange:m=>h({...d,confirmPassword:m.target.value})})]})]}),u.jsx("div",{className:"pt-6 flex justify-end",children:u.jsxs("button",{type:"submit",disabled:n,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-6 rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50",children:[u.jsx(Jv,{className:"w-4 h-4"}),n?"Menyimpan...":"Update Password"]})})]}),t==="notifications"&&u.jsxs("div",{className:"space-y-6",children:[u.jsxs("div",{className:"border-b border-gray-100 pb-4 mb-4",children:[u.jsx("h3",{className:"text-lg font-bold text-gray-800",children:"Preferensi Notifikasi"}),u.jsx("p",{className:"text-gray-500 text-sm",children:"Atur bagaimana Anda menerima pemberitahuan"})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-800",children:"Notifikasi Email"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Terima laporan harian via email"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-800",children:"Peringatan Keterlambatan"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Notifikasi otomatis saat ada siswa terlambat"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer",defaultChecked:!0}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),u.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-100 rounded-lg",children:[u.jsxs("div",{children:[u.jsx("h4",{className:"font-medium text-gray-800",children:"Stok Buku Menipis"}),u.jsx("p",{className:"text-sm text-gray-500",children:"Beritahu saya saat stok buku populer habis"})]}),u.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[u.jsx("input",{type:"checkbox",className:"sr-only peer"}),u.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})]})})]})]})};function f_({children:t}){return Wc()?t:u.jsx(fN,{to:"/login"})}function U6(){return u.jsx(vN,{children:u.jsxs(mN,{children:[u.jsx(We,{path:"/login",element:u.jsx(PO,{})}),u.jsxs(We,{path:"/",element:u.jsx(_6,{}),children:[u.jsx(We,{index:!0,element:u.jsx(LO,{})}),u.jsx(We,{path:"catalog",element:u.jsx(AO,{})}),u.jsx(We,{path:"literacy",element:u.jsx(y6,{})}),u.jsx(We,{path:"my-books",element:u.jsx(f_,{children:u.jsx(OO,{})})}),u.jsx(We,{path:"book/:id",element:u.jsx(VO,{})}),u.jsx(We,{path:"profile",element:u.jsx(v6,{})})]}),u.jsxs(We,{path:"/admin",element:u.jsx(f_,{children:u.jsx(w6,{})}),children:[u.jsx(We,{index:!0,element:u.jsx(b6,{})}),u.jsx(We,{path:"books",element:u.jsx(I6,{})}),u.jsx(We,{path:"borrows",element:u.jsx(k6,{})}),u.jsx(We,{path:"students",element:u.jsx(P6,{})}),u.jsx(We,{path:"statistics",element:u.jsx(j6,{})}),u.jsx(We,{path:"literacy",element:u.jsx(O6,{})}),u.jsx(We,{path:"reports",element:u.jsx(D6,{})}),u.jsx(We,{path:"settings",element:u.jsx(M6,{})})]})]})})}uh.createRoot(document.getElementById("root")).render(u.jsx(S_.StrictMode,{children:u.jsx(U6,{})}));
